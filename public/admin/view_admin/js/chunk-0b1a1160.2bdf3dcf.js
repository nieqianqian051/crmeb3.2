(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0b1a1160"],{"0029":function(t,e,a){},"0201":function(t,e,a){"use strict";var r=a("8bf7");a.n(r).a},"0fc4":function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return i}));var r=a("b6bd");function o(){return Object(r.a)({url:"erp/config",method:"get"})}function i(t){return Object(r.a)({url:"product/import_erp_product",method:"post",data:t})}},"28b9":function(t,e,a){"use strict";var r=a("0029");a.n(r).a},3044:function(t,e,a){"use strict";var r=a("bdc2");a.n(r).a},"5d4b":function(t,e,a){"use strict";var r=a("c4c8");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){i=function(){return e};var t,e={},a=Object.prototype,r=a.hasOwnProperty,n=Object.defineProperty||function(t,e,a){t[e]=a.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function m(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{m({},"")}catch(t){m=function(t,e,a){return t[e]=a}}function d(t,e,a,r){var o=e&&e.prototype instanceof _?e:_,i=Object.create(o.prototype),s=new B(r||[]);return n(i,"_invoke",{value:D(t,a,s)}),i}function f(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var p="suspendedStart",h="suspendedYield",v="executing",y="completed",b={};function _(){}function g(){}function w(){}var x={};m(x,l,(function(){return this}));var k=Object.getPrototypeOf,C=k&&k(k(L([])));C&&C!==a&&r.call(C,l)&&(x=C);var V=w.prototype=_.prototype=Object.create(x);function $(t){["next","throw","return"].forEach((function(e){m(t,e,(function(t){return this._invoke(e,t)}))}))}function F(t,e){function a(i,n,s,l){var c=f(t[i],t,n);if("throw"!==c.type){var u=c.arg,m=u.value;return m&&"object"==o(m)&&r.call(m,"__await")?e.resolve(m.__await).then((function(t){a("next",t,s,l)}),(function(t){a("throw",t,s,l)})):e.resolve(m).then((function(t){u.value=t,s(u)}),(function(t){return a("throw",t,s,l)}))}l(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){a(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function D(e,a,r){var o=p;return function(i,n){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===i)throw n;return{value:t,done:!0}}for(r.method=i,r.arg=n;;){var s=r.delegate;if(s){var l=I(s,r);if(l){if(l===b)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var c=f(e,a,r);if("normal"===c.type){if(o=r.done?y:h,c.arg===b)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=y,r.method="throw",r.arg=c.arg)}}}function I(e,a){var r=a.method,o=e.iterator[r];if(o===t)return a.delegate=null,"throw"===r&&e.iterator.return&&(a.method="return",a.arg=t,I(e,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=f(o,e.iterator,a.arg);if("throw"===i.type)return a.method="throw",a.arg=i.arg,a.delegate=null,b;var n=i.arg;return n?n.done?(a[e.resultName]=n.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,b):n:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,b)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function L(e){if(e||""===e){var a=e[l];if(a)return a.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function a(){for(;++i<e.length;)if(r.call(e,i))return a.value=e[i],a.done=!1,a;return a.value=t,a.done=!0,a};return n.next=n}}throw new TypeError(o(e)+" is not iterable")}return g.prototype=w,n(V,"constructor",{value:w,configurable:!0}),n(w,"constructor",{value:g,configurable:!0}),g.displayName=m(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,m(t,u,"GeneratorFunction")),t.prototype=Object.create(V),t},e.awrap=function(t){return{__await:t}},$(F.prototype),m(F.prototype,c,(function(){return this})),e.AsyncIterator=F,e.async=function(t,a,r,o,i){void 0===i&&(i=Promise);var n=new F(d(t,a,r,o),i);return e.isGeneratorFunction(a)?n:n.next().then((function(t){return t.done?t.value:n.next()}))},$(V),m(V,u,"Generator"),m(V,l,(function(){return this})),m(V,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),a=[];for(var r in e)a.push(r);return a.reverse(),function t(){for(;a.length;){var r=a.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function o(r,o){return s.type="throw",s.arg=e,a.next=r,o&&(a.method="next",a.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i],s=n.completion;if("root"===n.tryLoc)return o("end");if(n.tryLoc<=this.prev){var l=r.call(n,"catchLoc"),c=r.call(n,"finallyLoc");if(l&&c){if(this.prev<n.catchLoc)return o(n.catchLoc,!0);if(this.prev<n.finallyLoc)return o(n.finallyLoc)}else if(l){if(this.prev<n.catchLoc)return o(n.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return o(n.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var n=i?i.completion:{};return n.type=t,n.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),O(a),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var r=a.completion;if("throw"===r.type){var o=r.arg;O(a)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,a,r){return this.delegate={iterator:L(e),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}function n(t,e,a,r,o,i,n){try{var s=t[i](n),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(r,o)}var s={name:"menusFrom",props:{formValidate:{type:Object,default:null},fromName:{type:Number,default:0}},data:function(){return{ruleValidate:{brand_name:[{required:!0,message:"请输入品牌名称",trigger:"blur"}]},type:1,modals:!1,FromData:[],titleFrom:"",grid:{xl:24,lg:24,md:12,sm:24,xs:24}}},mounted:function(){this.getAddFrom()},methods:{getAddFrom:function(){var t=this;Object(r.e)().then(function(){var e,a=(e=i().mark((function e(a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.FromData=a.data;case 1:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(r,o){var i=e.apply(t,a);function s(t){n(i,r,o,s,l,"next",t)}function l(t){n(i,r,o,s,l,"throw",t)}s(void 0)}))});return function(t){return a.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},handleReset:function(){this.modals=!1,this.$parent.getData()},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){t?2==e.type?Object(r.H)(e.formValidate.id,e.formValidate).then((function(t){e.$Message.success(t.msg),e.getAddFrom(),e.$parent.getData(),e.modals=!1})).catch((function(t){e.$Message.error(t.msg)})):Object(r.E)(e.formValidate).then((function(t){e.$Message.success(t.msg),e.getAddFrom(),e.fromName?e.$parent.getBrandList():e.$parent.getData(),e.modals=!1})).catch((function(t){e.$Message.error(t.msg)})):e.$Message.error("请输入品牌名称")}))},cancle:function(){this.modals=!1}}},l=(a("c1b5"),a("2877")),c=Object(l.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{width:"700",scrollable:"","footer-hide":"",closable:"",title:t.titleFrom,"z-index":1,"class-name":"vertical-center-modal"},on:{"on-cancel":t.handleReset},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,"label-width":110,rules:t.ruleValidate},nativeOn:{submit:function(t){t.preventDefault()}}},[a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"上级品牌："}},[a("Cascader",{attrs:{data:t.FromData,placeholder:"请选择上级品牌","change-on-select":""},model:{value:t.formValidate.fid,callback:function(e){t.$set(t.formValidate,"fid",e)},expression:"formValidate.fid"}})],1)],1),a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"品牌名称：",prop:"brand_name"}},[a("Input",{attrs:{maxlength:"10",placeholder:"请输入品牌名称",prop:""},model:{value:t.formValidate.brand_name,callback:function(e){t.$set(t.formValidate,"brand_name",e)},expression:"formValidate.brand_name"}})],1)],1),a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"品牌排序："}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{step:1,placeholder:"请输入品牌排序"},model:{value:t.formValidate.sort,callback:function(e){t.$set(t.formValidate,"sort",e)},expression:"formValidate.sort"}})],1)],1),a("Col",t._b({},"Col",t.grid,!1),[a("FormItem",{attrs:{label:"是否显示："}},[a("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.formValidate.is_show,callback:function(e){t.$set(t.formValidate,"is_show",e)},expression:"formValidate.is_show"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)],1),a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"style-add"},[a("Button",{staticClass:"mr14",attrs:{type:"default"},on:{click:t.cancle}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("确认")])],1)])],1)],1)],1)}),[],!1,null,"0f37e54f",null);e.a=c.exports},"68bc":function(t,e,a){},"6fd3":function(t,e,a){"use strict";var r=a("2f62"),o=a("c4c8");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){l(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e,a){return(e=function(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var c={name:"addAttr",data:function(){return{spinShow:!1,modal_loading:!1,grid:{xl:3,lg:3,md:12,sm:24,xs:24},modal:!1,index:1,rules:{rule_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},formDynamic:{rule_name:"",spec:[]},attrsName:"",attrsVal:"",formDynamicNameData:[],isBtn:!1,formDynamicName:[],results:[],result:[],ids:0,title:"添加商品规格"}},computed:s(s({},Object(r.e)("admin/layout",["isMobile"])),{},{labelWidth:function(){return this.isMobile?void 0:110},labelPosition:function(){return this.isMobile?"top":"right"}}),methods:{onCancel:function(){this.clear()},addBtn:function(){if(""==this.formDynamic.rule_name.trim())return this.$Message.error("请输入分类名称");this.isBtn=!0},getIofo:function(t){var e=this;this.spinShow=!0,this.ids=t.id,this.title="编辑商品规格",Object(o.ub)(t.id).then((function(t){e.formDynamic=t.data.info,e.spinShow=!1})).catch((function(t){e.spinShow=!1,e.$Message.error(t.msg)}))},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){return!!t&&(0===e.formDynamic.spec.length?e.$Message.warning("请至少添加一条商品规格！"):(e.modal_loading=!0,void setTimeout((function(){Object(o.tb)(e.formDynamic,e.ids).then((function(t){e.$Message.success(t.msg),setTimeout((function(){e.modal=!1,e.modal_loading=!1}),500),setTimeout((function(){e.$emit("getList"),e.clear()}),600)})).catch((function(t){e.modal_loading=!1,e.$Message.error(t.msg)}))}),1200)))}))},clear:function(){this.$refs.formDynamic.resetFields(),this.formDynamic.spec=[],this.isBtn=!1,this.ids=0,this.title="添加商品规格",this.attrsName="",this.attrsVal=""},offAttrName:function(){this.isBtn=!1},cancle:function(){this.modal=!1,this.clear()},handleRemove:function(t){this.formDynamic.spec.splice(t,1)},handleRemove2:function(t,e){t.splice(e,1)},createAttrName:function(){if(this.attrsName&&this.attrsVal){var t={value:this.attrsName,detail:[this.attrsVal]};this.formDynamic.spec.push(t);var e={};this.formDynamic.spec=this.formDynamic.spec.reduce((function(t,a){return!e[a.value]&&(e[a.value]=t.push(a)),t}),[]),this.attrsName="",this.attrsVal="",this.isBtn=!1}else this.$Message.warning("请添加规格名称或规格值")},createAttr:function(t,e){if(t){this.formDynamic.spec[e].detail.push(t);var a={};this.formDynamic.spec[e].detail=this.formDynamic.spec[e].detail.reduce((function(t,e){return!a[e]&&(a[e]=t.push(e)),t}),[])}else this.$Message.warning("请添加属性")}}},u=(a("9088"),a("2877")),m=Object(u.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{scrollable:"",title:t.title,"class-name":"vertical-center-modal",width:"950"},on:{"on-cancel":t.onCancel},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{ref:"formDynamic",staticClass:"attrFrom",attrs:{model:t.formDynamic,rules:t.rules,"label-width":t.labelWidth,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[a("Row",{attrs:{gutter:24}},[a("Col",{attrs:{span:"24"}},[a("Col",{staticClass:"mb15",attrs:{span:"8"}},[a("FormItem",{attrs:{label:"分类名称：",prop:"rule_name"}},[a("Input",{attrs:{placeholder:"请输入分类名称",maxlength:20},model:{value:t.formDynamic.rule_name,callback:function(e){t.$set(t.formDynamic,"rule_name",e)},expression:"formDynamic.rule_name"}})],1)],1)],1),t._l(t.formDynamic.spec,(function(e,r){return a("Col",{key:r,staticClass:"noForm",attrs:{span:"23"}},[a("FormItem",[a("div",{staticClass:"acea-row row-middle"},[a("span",{staticClass:"mr5"},[t._v(t._s(e.value))]),a("Icon",{attrs:{type:"ios-close-circle"},on:{click:function(e){return t.handleRemove(r)}}})],1),a("div",{staticClass:"rulesBox"},[t._l(e.detail,(function(r,o){return a("Tag",{key:o,attrs:{type:"dot",closable:"",color:"primary",name:r},on:{"on-close":function(a){return t.handleRemove2(e.detail,o)}}},[t._v(t._s(r))])})),a("Input",{staticClass:"width20",attrs:{maxlength:"30","show-word-limit":"",search:"","enter-button":"添加",placeholder:"请输入属性名称"},on:{"on-search":function(a){return t.createAttr(e.detail.attrsVal,r)}},model:{value:e.detail.attrsVal,callback:function(a){t.$set(e.detail,"attrsVal",a)},expression:"item.detail.attrsVal"}})],2)])],1)})),t.isBtn?a("Col",{staticClass:"mt10",attrs:{span:"24"}},[a("Col",{staticClass:"mt10 mr15",attrs:{span:"8"}},[a("FormItem",{attrs:{label:"规格名称："}},[a("Input",{attrs:{placeholder:"请输入规格名称",maxlength:"30","show-word-limit":""},model:{value:t.attrsName,callback:function(e){t.attrsName=e},expression:"attrsName"}})],1)],1),a("Col",{staticClass:"mt10 mr20",attrs:{span:"8"}},[a("FormItem",{attrs:{label:"规格值："}},[a("Input",{attrs:{maxlength:"30","show-word-limit":"",placeholder:"请输入规格值"},model:{value:t.attrsVal,callback:function(e){t.attrsVal=e},expression:"attrsVal"}})],1)],1),a("Col",{staticClass:"mr20",attrs:{span:"8"}},[a("div",{staticClass:"sub"},[a("Button",{staticClass:"mr20",attrs:{type:"primary"},on:{click:t.createAttrName}},[t._v("确定")]),a("Button",{on:{click:t.offAttrName}},[t._v("取消")])],1)])],1):t._e(),t.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],2),t.isBtn?t._e():a("Button",{staticClass:"ml95 mt10",attrs:{type:"primary"},on:{click:t.addBtn}},[t._v("添加新规格")])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.cancle}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.modal_loading},on:{click:function(e){return t.handleSubmit("formDynamic")}}},[t._v("确定")])],1)],1)}),[],!1,null,"07a10b5d",null);e.a=m.exports},"766a":function(t,e,a){"use strict";var r=a("b194");a.n(r).a},"8bf7":function(t,e,a){},9088:function(t,e,a){"use strict";var r=a("68bc");a.n(r).a},"9dd1":function(t,e,a){"use strict";var r=a("c183");a.n(r).a},"9e39":function(t,e,a){"use strict";var r=a("a76c");a.n(r).a},a76c:function(t,e,a){},af70:function(t,e,a){},b194:function(t,e,a){},bdc2:function(t,e,a){},c183:function(t,e,a){},c1b5:function(t,e,a){"use strict";var r=a("af70");a.n(r).a},c7e8:function(t,e,a){"use strict";a.r(e);var r=a("2f62"),o=a("c4c8"),i=a("ed08"),n=a("0fc4"),s=a("830a"),l=a("5334"),c=a("f1c7"),u=a("5d4b"),m=a("310e"),d=a.n(m),f=a("d8ad");function p(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=Array(e);a<e;a++)r[a]=t[a];return r}var v={name:"productBaseSet",props:{baseInfo:{type:Object,default:function(){}},successData:{type:Boolean,default:!1}},data:function(){return{formValidate:{id:0,brand_id:[],code:"",slider_image:[],store_name:"",cate_id:[],store_label_id:[],unit_name:"",video_link:"",video_open:!1,is_show:0,auto_on_time:"",auto_off_time:"",off_show:0,product_type:0},props:{emitPath:!1,multiple:!0,checkStrictly:!0},treeSelect:[],brandData:[],unitNameList:[],storeLabelShow:!1,formBrand:{},ruleValidate:{store_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],cate_id:[{required:!0,message:"请选择商品分类",trigger:"change",type:"array"}],unit_name:[{required:!0,message:"请输入单位",trigger:"change"}],slider_image:[{required:!0,message:"请上传商品轮播图",type:"array"}]}}},components:{storeLabelList:c.a,menusFrom:u.a,draggable:d.a},computed:{startPickOptions:function(){var t=this;return{disabledDate:function(e){return t.formValidate.auto_off_time?e.getTime()>new Date(t.formValidate.auto_off_time).getTime():""}}},endPickOptions:function(){var t=this;return{disabledDate:function(e){return"1"==t.formValidate.is_show?e.getTime()<Date.now():t.formValidate.auto_on_time?e.getTime()<new Date(t.formValidate.auto_on_time).getTime():""}}}},watch:{successData:{handler:function(t){var e=this;t&&Object.keys(this.formValidate).map((function(t){e.formValidate[t]=e.baseInfo[t]}))},immediate:!0,deep:!0}},created:function(){this.goodsCategory(),this.getBrandList(),this.getAllUnit()},methods:{getBrandList:function(){var t=this;Object(o.f)().then((function(e){t.initBran(e.data),t.brandData=e.data})).catch((function(e){t.$Message.error(e.msg)}))},initBran:function(t){var e=this;t.map((function(t){t.value=t.value.toString(),t.children&&t.children.length&&e.initBran(t.children)}))},addBrand:function(){this.$refs.menusFrom.modals=!0,this.$refs.menusFrom.titleFrom="添加品牌分类",this.formBrand={sort:0,is_show:1},this.formBrand.fid=[0],this.$refs.menusFrom.type=1},goodsCategory:function(){var t=this;Object(o.h)(1).then((function(e){t.treeSelect=e.data})).catch((function(e){t.$Message.error(e.msg)}))},addClass:function(){var t=this;this.$modalForm(Object(o.K)()).then((function(){return t.goodsCategory()}))},getAllUnit:function(){var t=this;Object(o.C)().then((function(e){t.unitNameList=e.data})).catch((function(e){t.$Message.error(e.msg)}))},addUnit:function(){var t=this;this.$modalForm(Object(o.ob)()).then((function(){return t.getAllUnit()}))},addStoreLabel:function(){this.$modalForm(Object(o.W)()).then((function(){}))},activeStoreData:function(t){this.storeLabelShow=!1,this.formValidate.store_label_id=t},openStoreLabel:function(t){this.storeLabelShow=!0,this.$refs.storeLabel.storeLabel(JSON.parse(JSON.stringify(this.formValidate.store_label_id)))},storeLabelClose:function(){this.storeLabelShow=!1},goodsOn:function(t){0!=t&&1!=t||(this.formValidate.auto_on_time="")},goodsOff:function(t){t||(this.formValidate.auto_off_time="")},onchangeShow:function(t){this.formValidate.auto_on_time=t},onchangeOff:function(t){this.formValidate.auto_off_time=t},delVideo:function(){this.$set(this.formValidate,"video_link","")},handleDragStart:function(t,e){this.dragging=e},handleDragEnd:function(t,e){this.dragging=null},handleDragOver:function(t){t.dataTransfer.dropEffect="move"},handleDragEnter:function(t,e){if(t.dataTransfer.effectAllowed="move",e!==this.dragging){var a=p(this.formValidate.slider_image),r=a.indexOf(this.dragging),o=a.indexOf(e);a.splice.apply(a,[o,0].concat(p(a.splice(r,1)))),this.formValidate.slider_image=a}},handleRemove:function(t){this.formValidate.slider_image.splice(t,1)},modalPicTap:function(){var t=this;this.$imgModal((function(e){e.forEach((function(e){t.formValidate.slider_image.push(e.att_dir),t.formValidate.slider_image=t.formValidate.slider_image.splice(0,9)}))}))},addVideo:function(){var t=this;this.$imgModal((function(e){var a=e[0].att_dir;a.includes("mp4")?t.formValidate.video_link=a:t.$Message.error("请选择正确的视频文件")}))},unitChange:function(t){f.a.$emit("unitChanged",t)}}},y=(a("3044"),a("2877")),b=Object(y.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("FormItem",{attrs:{label:"商品名称：",required:"",rules:t.ruleValidate.store_name}},[a("Input",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{placeholder:"请输入商品名称"},model:{value:t.formValidate.store_name,callback:function(e){t.$set(t.formValidate,"store_name",e)},expression:"formValidate.store_name"}})],1),a("FormItem",{attrs:{label:"商品分类：",required:"",rules:t.ruleValidate.cate_id}},[a("el-cascader",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{placeholder:"请选择商品分类",size:"mini",options:t.treeSelect,props:t.props,filterable:"",clearable:""},model:{value:t.formValidate.cate_id,callback:function(e){t.$set(t.formValidate,"cate_id",e)},expression:"formValidate.cate_id"}}),a("span",{staticClass:"addClass",on:{click:t.addClass}},[t._v("新增分类")])],1),a("FormItem",{attrs:{label:"商品品牌：",prop:""}},[a("div",{staticClass:"flex"},[a("Cascader",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{data:t.brandData,placeholder:"请选择商品品牌","change-on-select":"",filterable:""},model:{value:t.formValidate.brand_id,callback:function(e){t.$set(t.formValidate,"brand_id",e)},expression:"formValidate.brand_id"}}),a("span",{staticClass:"addClass",on:{click:t.addBrand}},[t._v("新增品牌")])],1)]),a("FormItem",{attrs:{label:"单位：",required:"",rules:t.ruleValidate.unit_name}},[a("Select",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{clearable:"",filterable:"",placeholder:"请输入单位"},on:{"on-change":t.unitChange},model:{value:t.formValidate.unit_name,callback:function(e){t.$set(t.formValidate,"unit_name",e)},expression:"formValidate.unit_name"}},t._l(t.unitNameList,(function(e,r){return a("Option",{key:r,attrs:{value:e.name}},[t._v(t._s(e.name))])})),1),a("span",{staticClass:"addClass",on:{click:t.addUnit}},[t._v("新增单位")])],1),a("FormItem",{attrs:{label:"商品编码：",prop:""}},[a("Input",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{placeholder:"请输入商品编码"},model:{value:t.formValidate.code,callback:function(e){t.$set(t.formValidate,"code",e)},expression:"formValidate.code"}})],1),a("FormItem",{attrs:{label:"商品轮播图：",required:"",rules:t.ruleValidate.slider_image}},[a("div",{staticClass:"acea-row"},[t._l(t.formValidate.slider_image,(function(e,r){return a("div",{key:r,staticClass:"pictrue",attrs:{draggable:"true"},on:{dragstart:function(a){return t.handleDragStart(a,e)},dragover:function(a){return a.preventDefault(),t.handleDragOver(a,e)},dragenter:function(a){return t.handleDragEnter(a,e)},dragend:function(a){return t.handleDragEnd(a,e)}}},[a("img",{directives:[{name:"viewer",rawName:"v-viewer"}],attrs:{src:e}}),a("Button",{staticClass:"btndel",attrs:{shape:"circle",icon:"md-close"},nativeOn:{click:function(e){return t.handleRemove(r)}}})],1)})),t.formValidate.slider_image.length<9?a("div",{staticClass:"upLoad acea-row row-center-wrapper",on:{click:function(e){return t.modalPicTap("duo")}}},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1):t._e(),a("Input",{staticClass:"input-display",model:{value:t.formValidate.slider_image[0],callback:function(e){t.$set(t.formValidate.slider_image,0,e)},expression:"formValidate.slider_image[0]"}})],2),a("div",{staticClass:"tips"},[t._v("\n      建议尺寸：800 *\n      800px，可拖拽改变图片顺序，默认首张图为主图，最多上传10张\n    ")])]),a("FormItem",{staticClass:"labelClass",attrs:{label:"商品标签："}},[a("div",{staticClass:"acea-row row-middle"},[a("div",{staticClass:"labelInput acea-row row-between-wrapper",on:{click:t.openStoreLabel}},[a("div",{staticStyle:{width:"90%"}},[t.formValidate.store_label_id.length?a("div",t._l(t.formValidate.store_label_id,(function(e,r){return a("Tag",{key:r,on:{"on-close":function(a){return t.closeStoreLabel(e)}}},[t._v(t._s(e.label_name))])})),1):a("span",{staticClass:"span"},[t._v("选择商品标签")])]),a("div",{staticClass:"iconfont iconxiayi"})]),a("span",{staticClass:"addClass",on:{click:t.addStoreLabel}},[t._v("新增标签")])])]),a("FormItem",{attrs:{label:"添加视频："}},[a("i-switch",{attrs:{size:"large"},model:{value:t.formValidate.video_open,callback:function(e){t.$set(t.formValidate,"video_open",e)},expression:"formValidate.video_open"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1),t.formValidate.video_open?a("FormItem",{attrs:{label:"上传视频：",prop:"video_link"}},[a("div",{staticClass:"flex"},[a("Input",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],model:{value:t.formValidate.video_link,callback:function(e){t.$set(t.formValidate,"video_link",e)},expression:"formValidate.video_link"}}),a("span",{staticClass:"addClass",on:{click:t.addVideo}},[t._v("选择视频")])],1),t.formValidate.video_link?a("div",{staticClass:"iview-video-style"},[a("video",{staticClass:"video-style",attrs:{src:t.formValidate.video_link,controls:"controls"}}),a("div",{staticClass:"mark"}),a("Icon",{staticClass:"iconv",attrs:{type:"ios-trash-outline"},on:{click:t.delVideo}})],1):t._e()]):t._e(),a("FormItem",{attrs:{label:"上架时间："}},[a("RadioGroup",{on:{"on-change":t.goodsOn},model:{value:t.formValidate.is_show,callback:function(e){t.$set(t.formValidate,"is_show",e)},expression:"formValidate.is_show"}},[a("Radio",{attrs:{label:1}},[a("Icon",{attrs:{type:"social-apple"}}),a("span",[t._v("立即上架")])],1),a("Radio",{attrs:{label:2}},[a("Icon",{attrs:{type:"social-android"}}),a("span",[t._v("定时上架")])],1),a("Radio",{attrs:{label:0}},[a("Icon",{attrs:{type:"social-windows"}}),a("span",[t._v("放入仓库")])],1)],1)],1),2==t.formValidate.is_show?a("FormItem",{attrs:{label:""}},[a("DatePicker",{staticStyle:{width:"250px"},attrs:{type:"datetime",options:t.startPickOptions,value:t.formValidate.auto_on_time,placeholder:"请选择上架时间",format:"yyyy-MM-dd HH:mm"},on:{"on-change":t.onchangeShow},model:{value:t.formValidate.auto_on_time,callback:function(e){t.$set(t.formValidate,"auto_on_time",e)},expression:"formValidate.auto_on_time"}})],1):t._e(),a("FormItem",{attrs:{label:"定时下架："}},[a("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},on:{"on-change":t.goodsOff},model:{value:t.formValidate.off_show,callback:function(e){t.$set(t.formValidate,"off_show",e)},expression:"formValidate.off_show"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1),1==t.formValidate.off_show?a("FormItem",{attrs:{label:""}},[a("DatePicker",{staticStyle:{width:"260px"},attrs:{type:"datetime",options:t.endPickOptions,value:t.formValidate.auto_off_time,placeholder:"请选择下架时间",format:"yyyy-MM-dd HH:mm"},on:{"on-change":t.onchangeOff},model:{value:t.formValidate.auto_off_time,callback:function(e){t.$set(t.formValidate,"auto_off_time",e)},expression:"formValidate.auto_off_time"}}),a("div",{staticClass:"tips"},[t._v("\n      开启定时下架后，系统会在设置时间下架该商品。下架时间需晚于开售时间，商品才能定时开售。\n    ")])],1):t._e(),a("Modal",{attrs:{scrollable:"",title:"选择商品标签",closable:!0,width:"540","footer-hide":!0,"mask-closable":!1},model:{value:t.storeLabelShow,callback:function(e){t.storeLabelShow=e},expression:"storeLabelShow"}},[a("storeLabelList",{ref:"storeLabel",on:{activeData:t.activeStoreData,close:t.storeLabelClose}})],1),a("menus-from",{ref:"menusFrom",attrs:{formValidate:t.formBrand,fromName:1}})],1)}),[],!1,null,"e3b22a7e",null).exports,_=a("d708"),g=a("e449"),w=a("0f0e"),x=a("c4ad"),k={name:"marketingSet",props:{baseInfo:{type:Object,default:function(){}},successData:{type:Boolean,default:!1},product_type:{type:[String,Number],default:0}},data:function(){return{baseURL:_.a.apiBaseURL.replace(/adminapi/,""),formValidate:{ficti:0,sort:0,give_integral:0,couponName:[],coupon_ids:[],store_label_id:[],is_presale_product:0,is_limit:0,limit_type:1,limit_num:1,presale_time:[],presale_day:1,is_good:0,is_vip_product:0,label_id:[],ensure_id:[],unit_name:"",min_qty:1,presale_status:1,recommend_list:[]},ensureData:[],labelShow:!1,goodsModals:!1,datePickerOptions:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}}}},components:{couponList:g.a,userLabel:w.a,goodsList:x.default},watch:{successData:{handler:function(t){var e=this;t&&Object.keys(this.formValidate).map((function(t){e.formValidate[t]=e.baseInfo[t]}))},immediate:!0,deep:!0}},created:function(){var t=this;this.getProductAllEnsure(),f.a.$on("unitChanged",(function(e){t.formValidate.unit_name=e}))},methods:{addCoupon:function(){this.$refs.couponTemplates.isTemplate=!0,this.$refs.couponTemplates.tableList()},unique:function(t){var e=new Map;return t.filter((function(t){return!e.has(t.id)&&e.set(t.id,1)}))},nameId:function(t,e){this.formValidate.coupon_ids=t,this.formValidate.couponName=this.unique(e)},handleClose:function(t){var e=this.formValidate.couponName.indexOf(t);this.formValidate.couponName.splice(e,1),this.formValidate.coupon_ids.splice(e,1)},openLabel:function(t){this.labelShow=!0,this.$refs.userLabel.userLabel(JSON.parse(JSON.stringify(this.formValidate.label_id)))},activeData:function(t){this.labelShow=!1,this.formValidate.label_id=t},labelClose:function(){this.labelShow=!1},onchangeTime:function(t){this.formValidate.presale_time=t},goodCancel:function(){this.goodsModals=!1},goodsTap:function(){this.goodsModals=!0,this.$refs.goodslist.handleSelectAll()},bindDelete:function(t){this.formValidate.recommend_list.splice(t,1)},getProductId:function(t){this.goodsModals=!1;var e=this.formValidate.recommend_list.concat(t).filter((function(t,e,a){return a.findIndex((function(e){return e.product_id==t.product_id}))==e}));this.formValidate.recommend_list=e.slice(0,12)},getProductAllEnsure:function(){var t=this;Object(o.A)().then((function(e){t.ensureData=e.data})).catch((function(e){t.$Message.error(e.msg)}))}}},C=(a("28b9"),Object(y.a)(k,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("FormItem",{attrs:{label:"已售数量："}},[a("InputNumber",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{min:0,max:999999,placeholder:"请输入已售数量"},model:{value:t.formValidate.ficti,callback:function(e){t.$set(t.formValidate,"ficti",e)},expression:"formValidate.ficti"}})],1),a("FormItem",{attrs:{label:"排序："}},[a("InputNumber",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{min:0,max:999999,placeholder:"请输入排序"},model:{value:t.formValidate.sort,callback:function(e){t.$set(t.formValidate,"sort",e)},expression:"formValidate.sort"}})],1),a("FormItem",{attrs:{label:"赠送积分：",prop:"give_integral"}},[a("InputNumber",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{min:0,max:999999,placeholder:"请输入积分"},model:{value:t.formValidate.give_integral,callback:function(e){t.$set(t.formValidate,"give_integral",e)},expression:"formValidate.give_integral"}})],1),a("FormItem",{attrs:{label:"赠送优惠券："}},[t.formValidate.couponName.length?a("div",{staticClass:"mb20"},t._l(t.formValidate.couponName,(function(e,r){return a("Tag",{key:r,attrs:{type:"border",closable:""},on:{"on-close":function(a){return t.handleClose(e)}}},[t._v(t._s(e.title))])})),1):t._e(),a("Button",{attrs:{type:"primary"},on:{click:t.addCoupon}},[t._v("添加优惠券")])],1),a("FormItem",{staticClass:"labelClass",attrs:{label:"关联用户标签："}},[a("div",{staticClass:"labelInput acea-row row-between-wrapper",on:{click:t.openLabel}},[a("div",{staticStyle:{width:"90%"}},[t.formValidate.label_id.length?a("div",t._l(t.formValidate.label_id,(function(e,r){return a("Tag",{key:r,attrs:{closable:""},on:{"on-close":function(a){return t.closeLabel(e)}}},[t._v(t._s(e.label_name))])})),1):a("span",{staticClass:"span"},[t._v("选择用户关联标签")])]),a("div",{staticClass:"iconfont iconxiayi"})]),a("div",{staticClass:"fs-12 text--w111-999 mt10"},[t._v("\n      用户购买该商品后，自动为用户关联所选标签\n    ")])]),a("FormItem",{attrs:{label:"服务保障："}},[a("CheckboxGroup",{staticClass:"checkAlls",model:{value:t.formValidate.ensure_id,callback:function(e){t.$set(t.formValidate,"ensure_id",e)},expression:"formValidate.ensure_id"}},t._l(t.ensureData,(function(e,r){return a("Checkbox",{key:r,attrs:{label:e.id}},[t._v(t._s(e.name))])})),1),a("div",{staticClass:"tips"},[a("Poptip",{attrs:{placement:"bottom",trigger:"hover",width:"256",transfer:"",padding:"8px"}},[a("a",[t._v("查看示例")]),a("div",{staticClass:"exampleImg",attrs:{slot:"content"},slot:"content"},[a("img",{attrs:{src:t.baseURL+"/statics/system/productEnsure.png",alt:""}})])])],1)],1),a("FormItem",{attrs:{label:"仅会员可见："}},[a("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.formValidate.is_vip_product,callback:function(e){t.$set(t.formValidate,"is_vip_product",e)},expression:"formValidate.is_vip_product"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),a("div",{staticClass:"fs-12 text--w111-999"},[t._v("开启后仅付费会员可以看见并购买此商品")])],1),a("FormItem",{attrs:{label:"起购数量："}},[a("Input",{staticClass:"perW20 maxW",attrs:{placeholder:"请输入起购数量"},scopedSlots:t._u([{key:"append",fn:function(){return[a("span",[t._v(t._s(t.formValidate.unit_name||"件"))])]},proxy:!0}]),model:{value:t.formValidate.min_qty,callback:function(e){t.$set(t.formValidate,"min_qty",e)},expression:"formValidate.min_qty"}})],1),a("FormItem",{attrs:{label:"是否限购："}},[a("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.formValidate.is_limit,callback:function(e){t.$set(t.formValidate,"is_limit",e)},expression:"formValidate.is_limit"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1),t.formValidate.is_limit?a("FormItem",{attrs:{label:"限购类型："}},[a("RadioGroup",{model:{value:t.formValidate.limit_type,callback:function(e){t.$set(t.formValidate,"limit_type",e)},expression:"formValidate.limit_type"}},[a("Radio",{attrs:{label:1}},[t._v("单次限购")]),a("Radio",{attrs:{label:2}},[t._v("单人限购")])],1),a("div",{staticClass:"tips"},[t._v("\n      单次限购是限制每次下单最多购买的数量，单人限购是限制一个用户总共可以购买的数量\n    ")])],1):t._e(),t.formValidate.is_limit?a("FormItem",{attrs:{label:"限购数量："}},[a("InputNumber",{staticClass:"perW20 maxW",attrs:{min:1,placeholder:"请输入限购数量"},model:{value:t.formValidate.limit_num,callback:function(e){t.$set(t.formValidate,"limit_num",e)},expression:"formValidate.limit_num"}})],1):t._e(),0==t.product_type?a("FormItem",{attrs:{label:"预售商品："}},[a("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.formValidate.is_presale_product,callback:function(e){t.$set(t.formValidate,"is_presale_product",e)},expression:"formValidate.is_presale_product"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1):t._e(),0==t.product_type&&t.formValidate.is_presale_product?a("div",[a("FormItem",{attrs:{label:"预售活动时间：",prop:"presale_time"}},[a("div",{staticClass:"acea-row row-middle"},[a("DatePicker",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{editable:!1,options:t.datePickerOptions,type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"请选择活动时间",value:t.formValidate.presale_time},on:{"on-change":t.onchangeTime},model:{value:t.formValidate.presale_time,callback:function(e){t.$set(t.formValidate,"presale_time",e)},expression:"formValidate.presale_time"}})],1),a("div",{staticClass:"tips"},[t._v("\n        设置活动开启结束时间，用户可以在设置时间内发起参与预售\n      ")])]),a("FormItem",{attrs:{label:"预计发货时间："}},[a("div",{staticClass:"acea-row row-middle"},[a("span",{staticClass:"mr10"},[t._v("预售活动结束后")]),a("InputNumber",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入发货时间",precision:0,min:1},model:{value:t.formValidate.presale_day,callback:function(e){t.$set(t.formValidate,"presale_day",e)},expression:"formValidate.presale_day"}}),a("span",{staticClass:"ml10"},[t._v("天之内")])],1)]),a("FormItem",{attrs:{label:"活动结束后状态："}},[a("RadioGroup",{model:{value:t.formValidate.presale_status,callback:function(e){t.$set(t.formValidate,"presale_status",e)},expression:"formValidate.presale_status"}},[a("Radio",{attrs:{label:1}},[t._v("上架")]),a("Radio",{attrs:{label:0}},[t._v("下架")])],1),a("div",{staticClass:"tips"},[t._v("选择上架时，预售活动结束后该商品作为普通商品继续售卖 ")])],1)],1):t._e(),a("FormItem",{attrs:{label:"优品推荐："}},[a("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.formValidate.is_good,callback:function(e){t.$set(t.formValidate,"is_good",e)},expression:"formValidate.is_good"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1),a("FormItem",{attrs:{label:"选择优品推荐商品："}},[a("div",{staticClass:"acea-row"},[t._l(t.formValidate.recommend_list,(function(e,r){return a("div",{key:r,staticClass:"pictrue"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image,expression:"item.image"}]}),a("Button",{staticClass:"btndel",attrs:{shape:"circle",icon:"md-close"},nativeOn:{click:function(e){return t.bindDelete(r)}}})],1)})),t.formValidate.recommend_list.length<12?a("div",{staticClass:"upLoad acea-row row-center-wrapper",on:{click:t.goodsTap}},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1):t._e()],2)]),a("coupon-list",{ref:"couponTemplates",attrs:{couponids:t.formValidate.coupon_ids,updateIds:t.formValidate.coupon_ids,updateName:t.formValidate.couponName},on:{nameId:t.nameId}}),a("Modal",{attrs:{scrollable:"",title:"选择用户标签",closable:!0,width:"540","footer-hide":!0,"mask-closable":!1},model:{value:t.labelShow,callback:function(e){t.labelShow=e},expression:"labelShow"}},[a("userLabel",{ref:"userLabel",on:{activeData:t.activeData,close:t.labelClose}})],1),a("Modal",{attrs:{title:"商品列表",footerHide:"",scrollable:"",width:"900"},on:{"on-cancel":t.goodCancel},model:{value:t.goodsModals,callback:function(e){t.goodsModals=e},expression:"goodsModals"}},[t.goodsModals?a("goods-list",{ref:"goodslist",attrs:{ischeckbox:!0},on:{getProductId:t.getProductId}}):t._e()],1)],1)}),[],!1,null,"6da65325",null).exports),V=a("90e7"),$={name:"otherSet",props:{baseInfo:{type:Object,default:function(){}},successData:{type:Boolean,default:!1},product_type:{type:[String,Number],default:0}},data:function(){return{baseURL:_.a.apiBaseURL.replace(/adminapi/,""),formValidate:{keyword:"",store_info:"",command_word:"",recommend_image:"",specs_id:"",is_support_refund:1,system_form_id:"",specs:[],share_content:""},formTypeList:[],formColumns:[{title:"表单标题",key:"title",minWidth:100},{title:"表单类型",key:"name",minWidth:100},{title:"是否必填",slot:"require",minWidth:100}],specsData:[],customBtn:!1}},watch:{successData:{handler:function(t){var e=this;t&&Object.keys(this.formValidate).map((function(t){e.formValidate[t]=e.baseInfo[t],e.formValidate.system_form_id&&(e.customBtn=!0,e.changeForm(e.formValidate.system_form_id))}))},immediate:!0,deep:!0}},created:function(){this.getProductAllSpecs(),this.allFormList()},methods:{changeForm:function(t){this.getSystemFormInfo(t,{type:1})},getSystemFormInfo:function(t,e){var a=this;Object(V.yb)(t,e).then((function(t){a.formTypeList=t.data.info})).catch((function(t){a.$Message.error(t.msg)}))},nameChange:function(t,e){},specsInfo:function(t){var e=this;this.specsData.forEach((function(a){a.id==t&&(e.formValidate.specs=a.specs)}))},delSpecs:function(t){this.formValidate.specs.splice(t,1)},addSpecs:function(){this.formValidate.specs.push({name:"",value:"",sort:0})},customMessBtn:function(t){t||(this.formValidate.system_form_id=0)},getProductAllSpecs:function(){var t=this;Object(o.B)().then((function(e){t.specsData=e.data})).catch((function(e){t.$Message.error(e.msg)}))},modalPicTap:function(){var t=this;this.$imgModal((function(e){var a=e[0].att_dir;a.includes("mp4")?t.$Message.error("请选择正确的图片文件"):t.formValidate.recommend_image=a}))},allFormList:function(){var t=this;Object(o.c)().then((function(e){t.formList=e.data})).catch((function(e){t.$Message.error(e.msg)}))}}},F=(a("0201"),Object(y.a)($,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("FormItem",{attrs:{label:"商品关键字："}},[a("Input",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{placeholder:"请输入商品关键字"},model:{value:t.formValidate.keyword,callback:function(e){t.$set(t.formValidate,"keyword",e)},expression:"formValidate.keyword"}}),a("div",{staticClass:"tips"},[t._v("通过命中关键字搜索对应商品，方便用户查找")])],1),a("FormItem",{attrs:{label:"商品简介：",prop:""}},[a("Input",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{type:"textarea",rows:3,placeholder:"请输入商品简介"},model:{value:t.formValidate.store_info,callback:function(e){t.$set(t.formValidate,"store_info",e)},expression:"formValidate.store_info"}}),a("div",{staticClass:"tips"},[t._v("\n      微信分享商品时，分享的卡片上会显示商品简介\n      "),a("Poptip",{attrs:{placement:"bottom",trigger:"hover",width:"256",transfer:"",padding:"8px"}},[a("a",[t._v("查看示例")]),a("div",{staticClass:"exampleImg",attrs:{slot:"content"},slot:"content"},[a("img",{attrs:{src:t.baseURL+"/statics/system/productDesc.png",alt:""}})])])],1)],1),a("FormItem",{attrs:{label:"分销文案：",prop:""}},[a("Input",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{type:"textarea",rows:3,placeholder:"请输入分销文案"},model:{value:t.formValidate.share_content,callback:function(e){t.$set(t.formValidate,"share_content",e)},expression:"formValidate.share_content"}})],1),a("FormItem",{attrs:{label:"商品口令："}},[a("Input",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{type:"textarea",rows:3,placeholder:"请输入商品口令"},model:{value:t.formValidate.command_word,callback:function(e){t.$set(t.formValidate,"command_word",e)},expression:"formValidate.command_word"}}),a("div",{staticClass:"tips"},[t._v("\n      可将淘宝、抖音等平台的口令复制在此处，用户点击商城商品详情后会自动复制口令，随后打开淘宝等平台会自动弹出口令弹窗\n      "),a("Poptip",{attrs:{placement:"bottom",trigger:"hover",width:"256",transfer:"",padding:"8px"}},[a("a",[t._v("查看示例")]),a("div",{staticClass:"exampleImg",attrs:{slot:"content"},slot:"content"},[a("div",{staticStyle:{"margin-bottom":"10px","font-size":"12px","line-height":"18px",color:"#666666"}},[t._v("\n            商品口令需在淘宝、天猫、京东、苏"),a("br"),t._v("宁、1688上有同款商品，复制口令后"),a("br"),t._v("可在相关应用中打开(下图为淘宝展示)\n          ")]),a("img",{attrs:{src:t.baseURL+"/statics/system/productCommandWord.png",alt:""}})])])],1)],1),a("FormItem",{attrs:{label:"商品推荐图："}},[a("div",{staticClass:"acea-row"},[t.formValidate.recommend_image?a("div",{staticClass:"pictrue"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.formValidate.recommend_image,expression:"formValidate.recommend_image"}]}),a("Button",{staticClass:"btndel",attrs:{shape:"circle",icon:"md-close"},nativeOn:{click:function(e){t.formValidate.recommend_image=""}}})],1):a("div",{staticClass:"upLoad acea-row row-center-wrapper",on:{click:function(e){return t.modalPicTap()}}},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1)]),a("div",{staticClass:"tips"},[t._v("\n      在特殊的商品分类样式中显示(建议图片比例5:2)\n      "),a("Poptip",{attrs:{placement:"bottom",trigger:"hover",width:"256",transfer:"",padding:"8px"}},[a("a",[t._v("查看示例")]),a("div",{staticClass:"exampleImg",attrs:{slot:"content"},slot:"content"},[a("img",{attrs:{src:t.baseURL+"/statics/system/productRecommendImage.png",alt:""}})])])],1)]),a("FormItem",{attrs:{label:"商品参数：",prop:""}},[a("Select",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{clearable:"",filterable:"",placeholder:"请输入商品参数"},on:{"on-change":t.specsInfo},model:{value:t.formValidate.specs_id,callback:function(e){t.$set(t.formValidate,"specs_id",e)},expression:"formValidate.specs_id"}},t._l(t.specsData,(function(e,r){return a("Option",{key:r,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),t.formValidate.specs_id?a("FormItem",[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",size:"small",data:t.formValidate.specs}},[a("el-table-column",{attrs:{label:"参数名称",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Input",{attrs:{type:"text"},model:{value:e.row.name,callback:function(a){t.$set(e.row,"name",a)},expression:"scope.row.name"}})]}}],null,!1,3491685061)}),a("el-table-column",{attrs:{label:"参数值",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Input",{attrs:{type:"text"},model:{value:e.row.value,callback:function(a){t.$set(e.row,"value",a)},expression:"scope.row.value"}})]}}],null,!1,396612073)}),a("el-table-column",{attrs:{label:"排序",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("Input",{attrs:{type:"number"},model:{value:e.row.sort,callback:function(a){t.$set(e.row,"sort",a)},expression:"scope.row.sort"}})]}}],null,!1,4223351558)}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.$index>0?a("a",{on:{click:function(a){return t.delSpecs(e.$index)}}},[t._v("删除")]):t._e()]}}],null,!1,1532940429)})],1),a("Button",{staticClass:"mt20",on:{click:t.addSpecs}},[t._v("添加参数")])],1):t._e(),t.product_type>0?a("FormItem",{attrs:{label:"支持退款："}},[a("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.formValidate.is_support_refund,callback:function(e){t.$set(t.formValidate,"is_support_refund",e)},expression:"formValidate.is_support_refund"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1):t._e(),a("FormItem",{attrs:{label:"自定义留言："}},[a("i-switch",{attrs:{size:"large"},on:{"on-change":t.customMessBtn},model:{value:t.customBtn,callback:function(e){t.customBtn=e},expression:"customBtn"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),t.customBtn?a("div",{staticClass:"mt10"},[a("Select",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{filterable:"",placeholder:"请选择"},on:{"on-change":t.changeForm},model:{value:t.formValidate.system_form_id,callback:function(e){t.$set(t.formValidate,"system_form_id",e)},expression:"formValidate.system_form_id"}},t._l(t.formList,(function(e,r){return a("Option",{key:r,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1):t._e()],1),t.customBtn&&t.formValidate.system_form_id?a("FormItem",[a("Table",{ref:"table",staticClass:"specsList on",attrs:{border:"",columns:t.formColumns,data:t.formTypeList},scopedSlots:t._u([{key:"require",fn:function(e){var r=e.row;return[a("span",[t._v(t._s(r.require?"必填":"不必填"))])]}}],null,!1,419446279)})],1):t._e()],1)}),[],!1,null,"9d4fa1c4",null).exports),D=a("6fd3"),I=a("a069"),S=a("c276"),O=a("2e83");function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(){L=function(){return e};var t,e={},a=Object.prototype,r=a.hasOwnProperty,o=Object.defineProperty||function(t,e,a){t[e]=a.value},i="function"==typeof Symbol?Symbol:{},n=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,a){return t[e]=a}}function u(t,e,a,r){var i=e&&e.prototype instanceof y?e:y,n=Object.create(i.prototype),s=new S(r||[]);return o(n,"_invoke",{value:$(t,a,s)}),n}function m(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",v={};function y(){}function b(){}function _(){}var g={};c(g,n,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(O([])));x&&x!==a&&r.call(x,n)&&(g=x);var k=_.prototype=y.prototype=Object.create(g);function C(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function V(t,e){function a(o,i,n,s){var l=m(t[o],t,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==B(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){a("next",t,n,s)}),(function(t){a("throw",t,n,s)})):e.resolve(u).then((function(t){c.value=t,n(c)}),(function(t){return a("throw",t,n,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){a(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function $(e,a,r){var o=d;return function(i,n){if(o===p)throw Error("Generator is already running");if(o===h){if("throw"===i)throw n;return{value:t,done:!0}}for(r.method=i,r.arg=n;;){var s=r.delegate;if(s){var l=F(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=m(e,a,r);if("normal"===c.type){if(o=r.done?h:f,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=h,r.method="throw",r.arg=c.arg)}}}function F(e,a){var r=a.method,o=e.iterator[r];if(o===t)return a.delegate=null,"throw"===r&&e.iterator.return&&(a.method="return",a.arg=t,F(e,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=m(o,e.iterator,a.arg);if("throw"===i.type)return a.method="throw",a.arg=i.arg,a.delegate=null,v;var n=i.arg;return n?n.done?(a[e.resultName]=n.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,v):n:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,v)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function O(e){if(e||""===e){var a=e[n];if(a)return a.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function a(){for(;++o<e.length;)if(r.call(e,o))return a.value=e[o],a.done=!1,a;return a.value=t,a.done=!0,a};return i.next=i}}throw new TypeError(B(e)+" is not iterable")}return b.prototype=_,o(k,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:b,configurable:!0}),b.displayName=c(_,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,c(t,l,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},C(V.prototype),c(V.prototype,s,(function(){return this})),e.AsyncIterator=V,e.async=function(t,a,r,o,i){void 0===i&&(i=Promise);var n=new V(u(t,a,r,o),i);return e.isGeneratorFunction(a)?n:n.next().then((function(t){return t.done?t.value:n.next()}))},C(k),c(k,l,"Generator"),c(k,n,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),a=[];for(var r in e)a.push(r);return a.reverse(),function t(){for(;a.length;){var r=a.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function o(r,o){return s.type="throw",s.arg=e,a.next=r,o&&(a.method="next",a.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i],s=n.completion;if("root"===n.tryLoc)return o("end");if(n.tryLoc<=this.prev){var l=r.call(n,"catchLoc"),c=r.call(n,"finallyLoc");if(l&&c){if(this.prev<n.catchLoc)return o(n.catchLoc,!0);if(this.prev<n.finallyLoc)return o(n.finallyLoc)}else if(l){if(this.prev<n.catchLoc)return o(n.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return o(n.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var n=i?i.completion:{};return n.type=t,n.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),I(a),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var r=a.completion;if("throw"===r.type){var o=r.arg;I(a)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,a,r){return this.delegate={iterator:O(e),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function N(t,e,a,r,o,i,n){try{var s=t[i](n),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(r,o)}var T={name:"addCarMy",props:{virtualList:{type:Array,default:function(){return[]}}},data:function(){return{cartMyType:1,fixedCar:{disk_info:"",stock:0},cardUrl:_.a.apiBaseURL+"/file/upload/1",header:{}}},created:function(){this.getToken()},mounted:function(){},methods:{getCarMyList:function(){var t,e=this;return(t=L().mark((function t(){var a,r,o,i,n;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],r=[],o=[],i="",t.next=3,e.getExcelData();case 3:n=t.sent,i||(i=n.filename),r.length||(r=n.filekey),a.length||(a=n.header),o=n.export,Object(O.a)(a,r,i,o);case 9:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(r,o){var i=t.apply(e,a);function n(t){N(i,r,o,n,s,"next",t)}function s(t){N(i,r,o,n,s,"throw",t)}n(void 0)}))})()},getExcelData:function(){return new Promise((function(t,e){Object(o.o)().then((function(e){return t(e.data)}))}))},removeVirtual:function(t){this.virtualList.splice(t,1)},upFile:function(t){var e=this;Object(o.v)({file:t.data.src}).then((function(t){e.$emit("changeVirtual",JSON.parse(JSON.stringify(t.data)))})).catch((function(t){return e.$Message.error(t.msg)}))},handleFormatError:function(t){return this.$Message.error("必须上传xlsx格式文件")},getToken:function(){this.header["Authori-zation"]="Bearer "+S.a.cookies.get("token")},cancel:function(){this.$emit("closeCarMy")},handleAdd:function(){this.virtualList.push({key:"",value:""})},beforeUpload:function(){var t=this;return new Promise((function(e){t.$nextTick((function(){e(!0)}))}))},subBtn:function(){if(1==this.cartMyType){if(this.fixedCar.cartMyType=1,""==this.fixedCar.disk_info)return this.$Message.error("请填写卡密信息");if(!this.fixedCar.stock)return this.$Message.error("请填写库存数量");this.$emit("fixdBtn",JSON.parse(JSON.stringify(this.fixedCar)))}else{for(var t={cartMyType:2,virtualList:this.virtualList},e=0;e<this.virtualList.length;e++)if(!this.virtualList[e].value)return this.$Message.error("请输入所有卡密");this.$emit("fixdBtn",JSON.parse(JSON.stringify(t)))}}}},M=(a("9dd1"),Object(y.a)(T,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"carMywrapper"},[a("div",{staticClass:"type-radio"},[a("Form",{attrs:{"label-width":80}},[a("FormItem",{attrs:{label:"卡密类型："}},[a("RadioGroup",{attrs:{size:"large"},model:{value:t.cartMyType,callback:function(e){t.cartMyType=e},expression:"cartMyType"}},[a("Radio",{attrs:{label:1}},[t._v("固定卡密")]),a("Radio",{attrs:{label:2}},[t._v("一次性卡密")])],1),1==t.cartMyType?a("div",[a("div",{staticClass:"stock-disk"},[a("Input",{attrs:{size:"large",type:"textarea",rows:4,placeholder:"填写卡密信息"},model:{value:t.fixedCar.disk_info,callback:function(e){t.$set(t.fixedCar,"disk_info",e)},expression:"fixedCar.disk_info"}})],1),a("div",{staticClass:"stock-input"},[a("Input",{attrs:{type:"number",size:"large",placeholder:"填写库存数量"},model:{value:t.fixedCar.stock,callback:function(e){t.$set(t.fixedCar,"stock",e)},expression:"fixedCar.stock"}},[a("span",{attrs:{slot:"append"},slot:"append"},[t._v("件")])])],1)]):t._e(),2==t.cartMyType?a("div",{staticClass:"scroll-virtual"},t._l(t.virtualList,(function(e,r){return a("div",{key:r,staticClass:"acea-row row-middle mb10"},[a("span",{staticClass:"mr10 virtual-title"},[t._v("卡号"+t._s(r+1)+"：")]),a("Input",{staticClass:"mr10 width15",attrs:{type:"text",placeholder:"请输入卡号(非必填)"},model:{value:e.key,callback:function(a){t.$set(e,"key","string"==typeof a?a.trim():a)},expression:"item.key"}}),a("span",{staticClass:"mr10 virtual-title"},[t._v("卡密"+t._s(r+1)+"：")]),a("Input",{staticClass:"mr10 width15",attrs:{type:"text",placeholder:"请输入卡密"},model:{value:e.value,callback:function(a){t.$set(e,"value","string"==typeof a?a.trim():a)},expression:"item.value"}}),a("span",{staticClass:"deteal-btn",on:{click:function(e){return t.removeVirtual(r)}}},[t._v("删除")])],1)})),0):t._e(),2==t.cartMyType?a("div",{staticClass:"add-more"},[a("Button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("添加卡密")]),a("Upload",{ref:"upload",staticClass:"ml10",attrs:{action:t.cardUrl,"before-upload":t.beforeUpload,headers:t.header,"on-success":t.upFile,format:["xlsx"],"on-format-error":t.handleFormatError}},[a("Button",{attrs:{type:"success"}},[t._v("导入卡密")])],1),a("Button",{staticClass:"download",attrs:{type:"default",icon:"ios-download-outline"},on:{click:t.getCarMyList}},[t._v("下载卡密模板")])],1):t._e()],1)],1)],1),a("div",{staticClass:"footer"},[a("Button",{staticClass:"btns",attrs:{type:"primary",ghost:""},on:{click:t.cancel}},[t._v("取消")]),a("Button",{staticClass:"btns",attrs:{type:"primary"},on:{click:t.subBtn}},[t._v("确定")])],1)])}),[],!1,null,"77f8fa91",null).exports),j={name:"taoBao",data:function(){return{soure_link:"",spinShow:!1,grid:{xl:8,lg:8,md:12,sm:24,xs:24},grid2:{xl:12,lg:12,md:12,sm:24,xs:24},copyConfig:{copy_type:"",copy_num:0},artFrom:{type:"taobao",url:""}}},computed:{},created:function(){},mounted:function(){this.getCopyConfig()},methods:{mealPay:function(t){this.$router.push({path:"/admin/setting/sms/sms_config/index"})},getCopyConfig:function(){var t=this;Object(o.k)().then((function(e){t.copyConfig.copy_type=e.data.copy_type,t.copyConfig.copy_num=e.data.copy_num}))},add:function(){var t=this;return this.soure_link?/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/.test(this.soure_link)?(this.spinShow=!0,this.artFrom.url=this.soure_link,void Object(o.l)(this.artFrom).then((function(e){var a=e.data.productInfo;t.$emit("on-close",a),t.spinShow=!1})).catch((function(e){t.spinShow=!1,t.$Message.error(e.msg)}))):this.$Message.warning("请输入以http开头的地址！"):this.$Message.warning("请输入链接地址！")}}},E=(a("766a"),Object(y.a)(j,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Box"},[a("Card",[a("div",[t._v("生成的商品默认是没有上架的，请手动上架商品！\n            "),2==t.copyConfig.copy_type?a("a",{attrs:{href:"http://help.crmeb.net/crmeb-v4/1863579",target:"_blank"}},[t._v("如何配置密钥")]):a("span",[t._v("您当前剩余"+t._s(t.copyConfig.copy_num)+"条采集次数，"),a("a",{attrs:{href:"#"},on:{click:function(e){return t.mealPay("copy")}}},[t._v("增加采集次数")])])]),a("div",[t._v("商品采集设置：设置 > 系统设置 > 第三方接口设置 > 采集商品配置")])]),a("Form",{ref:"formValidate",staticClass:"formValidate mt20",attrs:{"label-width":120,"label-position":"right"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("Row",{attrs:{gutter:24,type:"flex"}},[a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"链接地址："}},[a("Input",{staticClass:"numPut",attrs:{search:"","enter-button":"确定",placeholder:"请输入链接地址"},on:{"on-search":t.add},model:{value:t.soure_link,callback:function(e){t.soure_link=e},expression:"soure_link"}})],1)],1)],1)],1),t.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)}),[],!1,null,"e2458f88",null).exports);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(){A=function(){return e};var t,e={},a=Object.prototype,r=a.hasOwnProperty,o=Object.defineProperty||function(t,e,a){t[e]=a.value},i="function"==typeof Symbol?Symbol:{},n=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,a){return t[e]=a}}function u(t,e,a,r){var i=e&&e.prototype instanceof y?e:y,n=Object.create(i.prototype),s=new S(r||[]);return o(n,"_invoke",{value:$(t,a,s)}),n}function m(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",v={};function y(){}function b(){}function _(){}var g={};c(g,n,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(O([])));x&&x!==a&&r.call(x,n)&&(g=x);var k=_.prototype=y.prototype=Object.create(g);function C(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function V(t,e){function a(o,i,n,s){var l=m(t[o],t,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==P(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){a("next",t,n,s)}),(function(t){a("throw",t,n,s)})):e.resolve(u).then((function(t){c.value=t,n(c)}),(function(t){return a("throw",t,n,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){a(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function $(e,a,r){var o=d;return function(i,n){if(o===p)throw Error("Generator is already running");if(o===h){if("throw"===i)throw n;return{value:t,done:!0}}for(r.method=i,r.arg=n;;){var s=r.delegate;if(s){var l=F(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var c=m(e,a,r);if("normal"===c.type){if(o=r.done?h:f,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=h,r.method="throw",r.arg=c.arg)}}}function F(e,a){var r=a.method,o=e.iterator[r];if(o===t)return a.delegate=null,"throw"===r&&e.iterator.return&&(a.method="return",a.arg=t,F(e,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=m(o,e.iterator,a.arg);if("throw"===i.type)return a.method="throw",a.arg=i.arg,a.delegate=null,v;var n=i.arg;return n?n.done?(a[e.resultName]=n.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,v):n:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,v)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function O(e){if(e||""===e){var a=e[n];if(a)return a.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function a(){for(;++o<e.length;)if(r.call(e,o))return a.value=e[o],a.done=!1,a;return a.value=t,a.done=!0,a};return i.next=i}}throw new TypeError(P(e)+" is not iterable")}return b.prototype=_,o(k,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:b,configurable:!0}),b.displayName=c(_,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,c(t,l,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},C(V.prototype),c(V.prototype,s,(function(){return this})),e.AsyncIterator=V,e.async=function(t,a,r,o,i){void 0===i&&(i=Promise);var n=new V(u(t,a,r,o),i);return e.isGeneratorFunction(a)?n:n.next().then((function(t){return t.done?t.value:n.next()}))},C(k),c(k,l,"Generator"),c(k,n,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),a=[];for(var r in e)a.push(r);return a.reverse(),function t(){for(;a.length;){var r=a.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var a in this)"t"===a.charAt(0)&&r.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function o(r,o){return s.type="throw",s.arg=e,a.next=r,o&&(a.method="next",a.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i],s=n.completion;if("root"===n.tryLoc)return o("end");if(n.tryLoc<=this.prev){var l=r.call(n,"catchLoc"),c=r.call(n,"finallyLoc");if(l&&c){if(this.prev<n.catchLoc)return o(n.catchLoc,!0);if(this.prev<n.finallyLoc)return o(n.finallyLoc)}else if(l){if(this.prev<n.catchLoc)return o(n.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return o(n.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var n=i?i.completion:{};return n.type=t,n.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),I(a),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var r=a.completion;if("throw"===r.type){var o=r.arg;I(a)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,a,r){return this.delegate={iterator:O(e),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function R(t,e,a,r,o,i,n){try{var s=t[i](n),l=s.value}catch(t){return void a(t)}s.done?e(l):Promise.resolve(l).then(r,o)}function q(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var i=t.apply(e,a);function n(t){R(i,r,o,n,s,"next",t)}function s(t){R(i,r,o,n,s,"throw",t)}n(void 0)}))}}function z(t){return function(t){if(Array.isArray(t))return t}(t)||H(t)||W(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=W(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,n=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){s=!0,i=t},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw i}}}}function U(t){return function(t){if(Array.isArray(t))return J(t)}(t)||H(t)||W(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){if(t){if("string"==typeof t)return J(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?J(t,e):void 0}}function H(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=Array(e);a<e;a++)r[a]=t[a];return r}function Y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function K(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(a),!0).forEach((function(e){Q(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Q(t,e,a){return(e=function(t){var e=function(t,e){if("object"!=P(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var r=a.call(t,e||"default");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var X={name:"productAdd",data:function(){return{headTab:[{title:"基础信息",name:"1"},{title:"规格库存",name:"2"},{title:"商品详情",name:"3"},{title:"物流设置",name:"4"},{title:"营销设置",name:"5"},{title:"其他设置",name:"6"}],currentTab:"1",spinShow:!1,openSubimit:!1,ruleList:[],attrs:[],formData:Object.assign({},s.d),oneFormBatch:[{bar_code:"",code:"",cost:null,detail:{},ot_price:null,pic:"",price:null,stock:null,weight:null,volume:null,virtual_list:[]}],openErp:!1,currentIndex:0,merchantType:0,columnsInstalM:[],manyFormValidate:[],oldVal:[],disabledSpecType:!1,createBnt:!0,formDynamic:{attrsName:"",attrsVal:""},carMyShow:!1,virtualList:[],tabIndex:0,tabName:"",success:!1,changeAttrValue:"",canSel:!0,templateList:[],template:!1,templateName:"",modals:!1,type:0,section_time:[],product_type:0,description:""}},components:{freightTemplate:l.a,productBaseSet:b,marketingSet:C,otherSet:F,addAttr:D.a,wangeditor:I.a,addCarMy:M,taoBao:E,draggable:d.a},computed:K({},Object(r.e)("admin/layout",["isMobile","menuCollapse"])),destroyed:function(){this.setCopyrightShow({value:!0})},mounted:function(){var t=this;this.productGetRule(),this.productGetTemplate(),this.getErpConfig(),(this.$route.params.id||this.$route.query.copy)&&(this.changeSpec(),this.getInfo()),this.$route.query.productType&&(setTimeout((function(){t.formData.product_type=Number(t.$route.query.productType)}),100),0!=this.$route.query.productType&&this.headTab.splice(3,1)),this.$route.query.type&&-1==this.$route.query.type&&(this.modals=!0,this.type=-1)},methods:K(K({},Object(r.d)("admin/layout",["setCopyrightShow"])),{},{changeSpec:function(){var t=this,e=this.$route.params.id;e&&Object(o.j)(e).catch((function(e){t.disabledSpecType=!0}))},addPic:function(t,e){var a=this;t?(this.attrs.map((function(t,r){r!==e&&a.$set(t,"add_pic",0)})),this.canSel=!1):this.canSel=!0},onMoveSpec:function(){this.generateAttr(this.attrs)},changeCurrentIndex:function(t){this.currentIndex=t},generateAttr:function(t){var e=this;this.generateHeader(t);var a=this.generateCombinations(t).map((function(a){var r={attr_arr:a,detail:{},title:"",key:"",price:0,pic:"",ot_price:0,cost:0,stock:0,is_show:1,is_default_select:0,unique:"",weight:0,volume:0,brokerage:0,brokerage_two:0,vip_price:0,vip_proportion:0};1==e.formData.product_type&&(e.$set(r,"virtual_list",[]),e.$set(r,"disk_info",""));for(var o=0;o<a.length;o++){var n=a[o];e.$set(r,t[o].value,n),e.$set(r,"title",t[o].value),e.$set(r,"key",t[o].value),e.$set(r.detail,t[o].value,n);for(var s=0;s<e.manyFormValidate.length;s++){var l=e.manyFormValidate[s],c=Object.values(l.detail);s>0&&c&&Object(i.b)(c,a)&&(Object.assign(r,{price:l.price,cost:l.cost,ot_price:l.ot_price,stock:l.stock,pic:l.pic,unique:l.unique||"",weight:l.weight||0,is_show:l.is_show||1,is_default_select:l.is_default_select||0,volume:l.volume||0,code:l.code||0,bar_code:l.bar_code||0,is_virtual:l.is_virtual,brokerage:l.brokerage,brokerage_two:l.brokerage_two,vip_price:l.vip_price,vip_proportion:l.vip_proportion}),1==e.formData.product_type&&(r.virtual_list=l.virtual_list,r.disk_info=l.disk_info))}}return r}));this.$nextTick((function(){e.manyFormValidate=[].concat(U(e.oneFormBatch),U(a))}))},handleRemoveRole:function(t){var e=this;this.attrs.splice(t,1),this.attrs.map((function(t,a){e.$set(t,"add_pic",0)})),this.canSel=!0,this.manyFormValidate.splice(t,1),this.attrs.length?this.generateAttr(this.attrs):(this.formData.header=[],this.manyFormValidate=[])},delAttrTable:function(t){for(var e=0;e<this.manyFormValidate.length;e++){var a=this.manyFormValidate[e];Object.values(a.detail)&&Object.values(a.detail).includes(t)&&(this.manyFormValidate.splice(e,1),e--)}},handleRemove2:function(t,e,a){t.splice(e,1),this.delAttrTable(a)},attrChangeValue:function(t,e){var a=this;e.trim().length&&this.attrs[t].detail.length?(this.generateHeader(this.attrs),this.manyFormValidate.length&&(this.manyFormValidate.map((function(t,r){r>0&&Object.keys(t.detail).includes(a.changeAttrValue)&&(t.detail[e]=t.detail[a.changeAttrValue],t[e]=t[a.changeAttrValue],delete t.detail[a.changeAttrValue],delete t[a.changeAttrValue])})),this.changeAttrValue=e)):this.generateAttr(this.attrs)},attrDetailChangeValue:Object(i.a)((function(t,e){var a=this;if(this.manyFormValidate.length){var r=this.attrs[e].value;this.manyFormValidate.map((function(e,o){o>0&&Object.keys(e.detail).includes(r)&&e.detail[r]===a.changeAttrValue&&(e.detail[r]=t)})),this.changeAttrValue=t}else this.generateAttr(this.attrs,1)})),handleShowPop:function(t){this.$refs["inputRef_"+t][0].focus()},handleAddRole:function(){var t={value:this.formDynamic.attrsName,add_pic:0,detail:[]};this.attrs.push(t)},addOneAttr:function(){this.generateAttr(this.attrs)},changeSpecImg:function(t,e){var a=this;this.$Modal.confirm({title:"提示",content:"可以同步修改下方该规格图片，确定要替换吗？",onOk:function(){var r,o=G(a.manyFormValidate);try{for(o.s();!(r=o.n()).done;){var i=r.value;a.isSubset(Object.values(i.detail),t)&&a.$set(i,"pic",e)}}catch(t){o.e(t)}finally{o.f()}}})},handleFocus:function(t){this.changeAttrValue=t},handleBlur:function(){this.changeAttrValue=""},handleSelImg:function(t,e){var a=this;this.$imgModal((function(e){var r=a,o=e[0].att_dir;o.includes("mp4")?a.$Message.error("请选择正确的图片文件"):(r.$set(t,"pic",o),a.changeSpecImg([t.value],o))}))},handleRemoveImg:function(t){t.pic=""},generateCombinations:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return[a];var r=z(t),o=r[0],i=r.slice(1);return o.detail.flatMap((function(t){return e.generateCombinations(i,[].concat(U(a),[t.value]))}))},createAttr:function(t,e){var a=this;if(t){if(this.attrs[e].detail.some((function(e){return e.value===t})))return void this.$Message.error("规格值已存在");this.attrs[e].detail.push({value:t,pic:""}),this.manyFormValidate.length?this.addOneAttr(this.attrs[e].value,t):this.generateAttr(this.attrs),this.$refs["popoverRef_"+e][0].doClose(),this.formDynamic.attrsName="",this.formDynamic.attrsVal="",setTimeout((function(){a.$refs["popoverRef_"+e]&&a.$refs["popoverRef_"+e][0].doShow()}),20)}else this.$refs["popoverRef_"+e][0].doClose()},productGetRule:function(){var t=this;Object(o.Q)().then((function(e){t.ruleList=e.data}))},changeDefaultSelect:function(t){this.manyFormValidate.map((function(e,a){a!==t&&(e.is_default_select=0)}))},changeDefaultShow:function(t){1===this.manyFormValidate[t].is_default_select&&(this.manyFormValidate[t].is_show=1,this.$message.error("默认规格不可隐藏"))},tableCellClassName:function(t){var e=t.row,a=t.column,r=t.rowIndex,o=t.columnIndex;e.index=r||"",a.index=o},objectSpanMethod:function(t){t.row;var e=t.column,a=t.rowIndex;if(0===t.columnIndex&&a>0){var r=e.label,o=this.manyFormValidate[a].detail[r],i=this.manyFormValidate.findIndex((function(t,e){if(e>0)return t.detail[r]==o}));if(a==i){for(var n=1,s=i+1;s<this.manyFormValidate.length&&this.manyFormValidate[s].detail[r]===o;s++)n++;return{rowspan:n,colspan:1}}return{rowspan:0,colspan:0}}},headerRowClassName:function(){return"custom-header-class"},batchDel:function(){this.oneFormBatch=[{bar_code:"",code:"",cost:null,detail:{},ot_price:null,pic:"",price:null,stock:null,weight:null,volume:null,virtual_list:[]}]},isSubset:function(t,e){var a,r=new Set(t),o=G(new Set(e));try{for(o.s();!(a=o.n()).done;){var i=a.value;if(!r.has(i))return!1}}catch(t){o.e(t)}finally{o.f()}return!0},batchAdd:function(){var t,e=[],a=G(this.attrs);try{for(a.s();!(t=a.n()).done;){var r=t.value;this.oneFormBatch[0][r.value]&&e.push(this.oneFormBatch[0][r.value])}}catch(t){a.e(t)}finally{a.f()}var o,i=G(this.manyFormValidate);try{for(i.s();!(o=i.n()).done;){var n=o.value;e.length?this.isSubset(n.attr_arr,e)&&(this.oneFormBatch[0].pic&&this.$set(n,"pic",this.oneFormBatch[0].pic),this.$set(n,"price",this.oneFormBatch[0].price),this.oneFormBatch[0].price,null!==this.oneFormBatch[0].cost&&this.$set(n,"cost",this.oneFormBatch[0].cost),null!==this.oneFormBatch[0].ot_price&&this.$set(n,"ot_price",this.oneFormBatch[0].ot_price),null!==this.oneFormBatch[0].stock&&this.$set(n,"stock",this.oneFormBatch[0].stock),""!==this.oneFormBatch[0].code&&this.$set(n,"code",this.oneFormBatch[0].code),""!==this.oneFormBatch[0].bar_code&&this.$set(n,"bar_code",this.oneFormBatch[0].bar_code),null!==this.oneFormBatch[0].weight&&this.$set(n,"weight",this.oneFormBatch[0].weight),null!==this.oneFormBatch[0].volume&&this.$set(n,"volume",this.oneFormBatch[0].volume)):(this.oneFormBatch[0].pic&&this.$set(n,"pic",this.oneFormBatch[0].pic),null!==this.oneFormBatch[0].price&&this.$set(n,"price",this.oneFormBatch[0].price),null!==this.oneFormBatch[0].cost&&this.$set(n,"cost",this.oneFormBatch[0].cost),null!==this.oneFormBatch[0].ot_price&&this.$set(n,"ot_price",this.oneFormBatch[0].ot_price),null!==this.oneFormBatch[0].stock&&this.$set(n,"stock",this.oneFormBatch[0].stock),null!==this.oneFormBatch[0].weight&&this.$set(n,"weight",this.oneFormBatch[0].weight),null!==this.oneFormBatch[0].volume&&this.$set(n,"volume",this.oneFormBatch[0].volume),this.oneFormBatch[0].code&&this.$set(n,"code",this.oneFormBatch[0].code),this.oneFormBatch[0].bar_code&&this.$set(n,"bar_code",this.oneFormBatch[0].bar_code))}}catch(t){i.e(t)}finally{i.f()}},confirm:function(t){var e=this;if(this.createBnt=!0,this.formData.selectRule=t,this.formData.selectRule.trim().length<=0)return this.$Message.error("请选择属性");this.ruleList.forEach((function(t,a){t.rule_name===e.formData.selectRule&&(e.attrs=t.rule_value)})),this.canSel=!0,this.generateAttr(this.attrs)},addRule:function(){this.$refs.addattr.modal=!0},getEditorContent:function(t){this.formData.description=t},addVirtual:function(t,e){this.tabIndex=t,this.tabName=e,this.virtualListClear(),this.$refs.addCarMy.fixedCar={disk_info:"",stock:0},this.$refs.addCarMy.cartMyType=1,this.carMyShow=!0},seeVirtual:function(t,e,a){this.tabName=e,this.tabIndex=a,this.virtualListClear(),this.$refs.addCarMy.fixedCar={disk_info:"",stock:0},t.virtual_list&&t.virtual_list.length?(this.$refs.addCarMy.cartMyType=2,this.virtualList=t.virtual_list):t.disk_info&&(this.$refs.addCarMy.cartMyType=1,this.$refs.addCarMy.fixedCar.disk_info=t.disk_info,this.$refs.addCarMy.fixedCar.stock=t.stock),this.carMyShow=!0},closeCarMy:function(){this.carMyShow=!1},fixdBtn:function(t){1==t.cartMyType?"attr"==this.tabName?(this.formData.attr.disk_info=t.disk_info,this.formData.attr.stock=t.stock,this.formData.attr.virtual_list=[]):(this.$set(this[this.tabName][this.tabIndex],"disk_info",t.disk_info),this.$set(this[this.tabName][this.tabIndex],"stock",Number(t.stock)),this[this.tabName][this.tabIndex].virtual_list=[]):"attr"==this.tabName?(this.formData.attr.virtual_list=t.virtualList,this.formData.attr.stock=t.virtualList.length,this.formData.attr.disk_info=""):(this.$set(this[this.tabName][this.tabIndex],"virtual_list",t.virtualList),this.$set(this[this.tabName][this.tabIndex],"stock",t.virtualList.length),this[this.tabName][this.tabIndex].disk_info=""),this.carMyShow=!1},changeVirtual:function(t){this.virtualList=t},virtualListClear:function(){this.virtualList=[{key:"",value:""}]},getInfo:function(){var t=this;this.spinShow=!0,Object(o.U)(this.$route.params.id||this.$route.query.copy).then(function(){var e=q(A().mark((function e(a){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.data.productInfo,t.infoData(r),t.spinShow=!1,t.success=!0;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.spinShow=!1,t.$Message.error(e.msg)}))},infoData:function(t){var e=this;this.merchantType=parseInt(t.type),Object.keys(this.formData).map((function(a){e.formData[a]=t[a]})),0!=t.product_type&&this.headTab.splice(3,1),4==t.product_type&&(this.section_time=t.attr.section_time),this.description=t.description,this.attrs=t.items||[],this.attrs.map((function(t){t.add_pic&&(e.canSel=!1)})),this.formData.off_show=t.auto_off_time?1:0,this.formData.coupon_ids=this.formData.coupons.map((function(t){return t.id})),this.formData.couponName=t.coupons,this.formData.brand_id=this.formData.brand_id.map(String),this.formData.is_limit=this.formData.is_limit?1:0,this.formData.limit_type=parseInt(t.limit_type),this.generateHeader(this.attrs),1==t.spec_type&&t.attrs.map((function(t){e.$set(t,"price",Number(t.price)),2==e.merchantType?e.$set(t,"cost",Number(t.settle_price)):e.$set(t,"cost",Number(t.cost)),e.$set(t,"ot_price",Number(t.ot_price)),e.$set(t,"weight",Number(t.weight)),e.$set(t,"volume",Number(t.volume)),e.$set(t,"stock",Number(t.stock))})),this.manyFormValidate=[].concat(U(this.oneFormBatch),U(t.attrs))},generateHeader:function(t){var e=t.map((function(t){return{title:t.value,key:t.value,minWidth:140,fixed:"left"}}));if(0==this.formData.product_type){var a=[].concat(U(e),U(s.a)),r=a.findIndex((function(t){return"售价"===t.title}));-1!==r&&2==this.merchantType&&a.splice(r+1,0,{title:"结算价",slot:"settle_price",align:"center",minWidth:"120px"}),this.formData.header=a}else 3==this.formData.product_type?this.formData.header=[].concat(U(e),U(s.b)):1==this.formData.product_type&&(this.formData.header=[].concat(U(e),U(s.c)));this.columnsInstalM=this.formData.header},upTab:function(){5==this.currentTab&&0!=this.formData.product_type?this.currentTab=(Number(this.currentTab)-2).toString():this.currentTab=(Number(this.currentTab)-1).toString()},downTab:function(t){var e=this;this.$refs[t].validate((function(t){if(t){if(2==e.formData.is_show&&!e.formData.auto_on_time)return e.$Message.warning("请填写定时上架时间");if(1==e.off_show&&!e.formData.auto_off_time)return e.$Message.warning("请填写定时下架时间");if(4==e.currentTab&&!e.formData.delivery_type.length)return e.$Message.warning("请选择配送方式");3==e.currentTab&&0!=e.formData.product_type?e.currentTab=(Number(e.currentTab)+2).toString():e.currentTab=(Number(e.currentTab)+1).toString()}else e.$Message.warning("请完善数据")}))},attrPicTap:function(){var t=this;this.$imgModal((function(e){var a=e[0].att_dir;a.includes("mp4")?t.$Message.error("请选择正确的图片文件"):t.formData.attr.pic=a}))},setAllPic:function(){var t=this;this.$imgModal((function(e){var a=e[0].att_dir;a.includes("mp4")?t.$Message.error("请选择正确的图片文件"):t.oneFormBatch[0].pic=a}))},setAttrPic:function(t){var e=this;this.$imgModal((function(a){var r=a[0].att_dir;r.includes("mp4")?e.$Message.error("请选择正确的图片文件"):e.manyFormValidate[t].pic=r}))},getErpConfig:function(){var t=this;Object(n.a)().then((function(e){t.openErp=e.data.open_erp})).catch((function(e){t.$Message.error(e.msg)}))},productGetTemplate:function(){var t=this;Object(o.S)({id:this.formData.id}).then((function(e){t.templateList=e.data}))},addTemp:function(){this.$refs.templates.isTemplate=!0},editTemp:function(){this.$refs.templates.isTemplate=!0,this.$refs.templates.editFrom(this.formData.temp_id)},changeTemplate:function(t){this.template=t},onchangeTime:function(t){this.formData.attr.section_time=t},handleSubmit:function(){var t=this,e=this.summarizeData();if(""==e.store_name)return this.currentTab="1",void this.$Message.error("请添加商品名称");if(!e.cate_id.length)return this.currentTab="1",void this.$Message.error("请选择商品分类");if(""==e.unit_name)return this.currentTab="1",void this.$Message.error("请添加商品单位");if(e.is_limit&&e.min_qty>e.limit_num)return this.currentTab="5",void this.$Message.error("起购数量不能大于限购数量");var a=!0;if(1==e.spec_type&&this.attrs.forEach((function(t){1==t.add_pic&&t.detail.forEach((function(t){t.pic||(a=!1)}))})),!a)return this.currentTab="2",void this.$Message.error("请完整添加规格图片");Object(o.z)(e).then(function(){var e=q(A().mark((function e(a){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.openSubimit=!0,t.$Message.success(a.msg),"0"===t.$route.params.id&&cacheDelete().catch((function(e){t.$Message.error(e.msg)})),setTimeout((function(){t.formData.attr.pic="",t.$router.push({path:"/admin/product/product_list"})}),500);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.openSubimit=!1,t.$Message.error(e.msg)}))},summarizeData:function(){var t=this.$refs.productBaseSet.formValidate,e=this.$refs.marketingSet.formValidate,a=this.$refs.otherSet.formValidate,r=K(K(K({},t),e),a);return this.$route.query.copy&&this.$set(r,"id",0),this.$set(r,"type",this.type),this.$set(r,"product_type",this.formData.product_type),this.$set(r,"spec_type",this.formData.spec_type),this.$set(r,"items",this.attrs),this.$set(r,"attr",this.formData.attr),this.$set(r,"attrs",this.manyFormValidate.slice(1)),this.$set(r,"description",this.formData.description),this.$set(r,"delivery_type",this.formData.delivery_type),this.$set(r,"freight",this.formData.freight),this.$set(r,"postage",this.formData.postage),this.$set(r,"temp_id",this.formData.temp_id),this.$set(r,"label_id",e.label_id.map((function(t){return t.id}))),this.$set(r,"store_label_id",t.store_label_id.map((function(t){return t.id}))),this.$set(r,"recommend_list",e.recommend_list.map((function(t){return t.product_id}))),r},handleSaveAsTemplate:function(){var t=this,e=this;e.$Modal.confirm({title:"另存为模板",render:function(t){return t("div",[t("Input",{props:{placeholder:"请输入模板名称",value:""},style:{marginTop:"20px"},on:{input:function(t){e.templateName=t}}})])},onOk:function(){var a=t.attrs.map((function(t){return{value:t.value,detail:t.detail.map((function(t){return t.value}))}})),r={rule_name:e.templateName,spec:a};Object(o.tb)(r,0).then((function(t){e.$Message.success(t.msg),e.productGetRule()})).catch((function(e){t.$message.error(e.msg)}))}})},cancel:function(){this.$router.push({path:"/admin/product/product_list"})},onClose:function(t){this.modals=!1,this.infoData(t),this.success=!0}})},Z=(a("9e39"),Object(y.a)(X,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"i-layout-page-header"},[a("PageHeader",{staticClass:"product_tabs",attrs:{"hidden-breadcrumb":""}},[a("div",{staticClass:"acea-row row-middle",attrs:{slot:"title"},slot:"title"},[a("router-link",{attrs:{to:{path:"/admin/product/product_list"}}},[a("div",{staticClass:"font-sm after-line"},[a("span",{staticClass:"iconfont iconfanhui"}),a("span",{staticClass:"pl10"},[t._v("返回")])])]),a("span",{staticClass:"mr20 ml16",domProps:{textContent:t._s(t.$route.params.id?"编辑商品":"添加商品")}})],1)])],1),a("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[a("div",{staticClass:"new_tab"},[a("Tabs",{model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},t._l(t.headTab,(function(t,e){return a("TabPane",{key:e,attrs:{label:t.title,name:t.name}})})),1)],1),a("Form",{ref:"formData",staticClass:"formData mt20",attrs:{model:t.formData,"label-width":170,"label-position":"right"},nativeOn:{submit:function(t){t.preventDefault()}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"1"===t.currentTab,expression:"currentTab === '1'"}]},[a("FormItem",{attrs:{label:"商品类型："}},[a("Select",{directives:[{name:"width",rawName:"v-width",value:"50%",expression:"'50%'"}],attrs:{disabled:""},model:{value:t.formData.product_type,callback:function(e){t.$set(t.formData,"product_type",e)},expression:"formData.product_type"}},[a("Option",{attrs:{value:0}},[t._v("普通商品")]),a("Option",{attrs:{value:1}},[t._v("卡密/网盘")]),a("Option",{attrs:{value:3}},[t._v("虚拟商品")]),a("Option",{attrs:{value:4}},[t._v("次卡商品")])],1)],1),a("productBaseSet",{ref:"productBaseSet",attrs:{successData:t.success,baseInfo:t.formData}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.currentTab,expression:"currentTab === '2'"}]},[4!==t.formData.product_type?a("FormItem",{attrs:{label:"商品规格："}},[a("div",{staticClass:"flex-y-center"},[a("RadioGroup",{model:{value:t.formData.spec_type,callback:function(e){t.$set(t.formData,"spec_type",e)},expression:"formData.spec_type"}},[a("Radio",{staticClass:"radio",attrs:{disabled:t.disabledSpecType,label:0}},[t._v("单规格")]),a("Radio",{attrs:{disabled:t.disabledSpecType,label:1}},[t._v("多规格")])],1),1==t.formData.spec_type?a("Dropdown",{on:{"on-click":t.confirm},scopedSlots:t._u([{key:"list",fn:function(){return[a("DropdownMenu",t._l(t.ruleList,(function(e,r){return a("DropdownItem",{key:r,attrs:{name:e.rule_name}},[t._v(t._s(e.rule_name))])})),1)]},proxy:!0}],null,!1,1627096704)},[a("span",{staticClass:"pl-14 text-blue pointer"},[t._v("\n                选择规格模板\n                "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1)]):t._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.disabledSpecType,expression:"disabledSpecType"}],staticClass:"tips"},[t._v("\n            商品有活动开启，无法切换商品规格\n          ")])]):t._e(),1==t.formData.spec_type?a("div",[a("FormItem",{attrs:{label:"商品规格："}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.attrs.length,expression:"attrs.length"}],staticClass:"specifications"},[a("draggable",{attrs:{group:"specifications",list:t.attrs,handle:".move-icon",animation:"300"},on:{end:t.onMoveSpec}},t._l(t.attrs,(function(e,r){return a("div",{key:r,staticClass:"specifications-item pointer active",on:{click:function(e){return t.changeCurrentIndex(r)}}},[a("div",{staticClass:"move-icon"},[a("span",{staticClass:"iconfont icondrag2"})]),a("i",{staticClass:"del ivu-icon ivu-icon-md-close-circle",on:{click:function(e){return t.handleRemoveRole(r)}}}),a("div",{staticClass:"specifications-item-box"},[a("div",{staticClass:"lineBox"}),a("div",{staticClass:"specifications-item-name mb18"},[a("Input",{staticClass:"specifications-item-name-input",attrs:{placeholder:"规格名称",maxlength:"30","show-word-limit":""},on:{"on-change":function(a){return t.attrChangeValue(r,e.value)},"on-focus":function(a){return t.handleFocus(e.value)}},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),a("Checkbox",{staticClass:"ml20",attrs:{disabled:!e.add_pic&&!t.canSel,"true-value":1,"false-value":0},on:{"on-change":function(e){return t.addPic(e,r)}},model:{value:e.add_pic,callback:function(a){t.$set(e,"add_pic",a)},expression:"item.add_pic"}},[t._v("添加规格图")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加规格图片, 仅支持打开一个(建议尺寸:800*800)",placement:"right"}},[a("Icon",{attrs:{type:"md-information-circle"}})],1)],1),a("div",{staticClass:"rulesBox ml30"},[a("draggable",{staticClass:"item",attrs:{list:e.detail,handle:".drag"},on:{end:t.onMoveSpec}},[t._l(e.detail,(function(o,i){return a("div",{key:i,staticClass:"mr10 spec drag relative"},[a("i",{staticClass:"del2 ivu-icon ivu-icon-md-close-circle",on:{click:function(a){return t.handleRemove2(e.detail,i,o.value)}}}),a("Input",{attrs:{placeholder:"规格值",maxlength:"30","show-word-limit":""},on:{"on-change":function(e){return t.attrDetailChangeValue(o.value,r)},"on-focus":function(e){return t.handleFocus(o.value)},"on-blur":function(e){return t.handleBlur()}},model:{value:o.value,callback:function(e){t.$set(o,"value",e)},expression:"j.value"}},[a("template",{slot:"prefix"},[a("span",{staticClass:"iconfont icondrag2"})])],2),e.add_pic?a("div",{staticClass:"img-popover"},[a("div",{staticClass:"popper-arrow"}),a("div",{staticClass:"popper",on:{click:function(e){return t.handleSelImg(o,i)}}},[o.pic?a("img",{staticClass:"img",attrs:{src:o.pic}}):a("i",{staticClass:"el-icon-plus"})]),o.pic?a("i",{staticClass:"img-del el-icon-error",on:{click:function(e){return t.handleRemoveImg(o)}}}):t._e()]):t._e()],1)})),a("el-popover",{ref:"popoverRef_"+r,refInFor:!0,style:{"min-height":1==e.add_pic?"121px":""},attrs:{placement:"",width:"210",trigger:"click"},on:{"after-enter":function(e){return t.handleShowPop(r)}}},[a("Input",{ref:"inputRef_"+r,refInFor:!0,attrs:{placeholder:"请输入规格值",maxlength:"30","show-word-limit":""},on:{"on-blur":function(e){return t.createAttr(t.formDynamic.attrsVal,r)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createAttr(t.formDynamic.attrsVal,r)}},model:{value:t.formDynamic.attrsVal,callback:function(e){t.$set(t.formDynamic,"attrsVal",e)},expression:"formDynamic.attrsVal"}}),a("a",{staticClass:"addfont",attrs:{slot:"reference"},slot:"reference"},[t._v("添加规格值")])],1)],2)],1)])])})),0)],1),t.attrs.length<4?a("Button",{on:{click:function(e){return t.handleAddRole()}}},[t._v("添加新规格")]):t._e(),t.attrs.length?a("Button",{attrs:{type:"text"},on:{click:function(e){return t.handleSaveAsTemplate()}}},[t._v("另存为模板")]):t._e()],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.manyFormValidate.length,expression:"manyFormValidate.length"}],attrs:{label:"商品属性：",prop:""}},[a("el-table",{staticStyle:{width:"100%"},attrs:{size:"small",data:t.manyFormValidate,"cell-class-name":t.tableCellClassName,"span-method":t.objectSpanMethod,"header-row-class-name":t.headerRowClassName,border:""}},t._l(t.formData.header,(function(e,r){return a("el-table-column",{key:r,attrs:{label:e.title,"min-width":e.minWidth||"100",fixed:e.fixed},scopedSlots:t._u([{key:"default",fn:function(r){return[0==r.$index?[e.key?[t.attrs.length&&t.attrs[r.column.index]&&t.manyFormValidate.length?a("div",[a("el-select",{attrs:{size:"small",placeholder:"请选择"+e.title,clearable:""},model:{value:t.oneFormBatch[0][e.title],callback:function(a){t.$set(t.oneFormBatch[0],e.title,a)},expression:"oneFormBatch[0][item.title]"}},t._l(t.attrs[r.column.index].detail,(function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})})),1)],1):t._e()]:"pic"===e.slot?[a("div",{staticClass:"pictrueBox small flex-center",on:{click:function(e){return t.setAllPic()}}},[t.oneFormBatch[0].pic?a("div",{staticClass:"pictrue"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.oneFormBatch[0].pic,expression:"oneFormBatch[0].pic"}]})]):a("div",{staticClass:"upLoad acea-row row-center-wrapper"},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1)])]:"price"===e.slot?[a("InputNumber",{staticClass:"priceBox",attrs:{controls:!1,min:0,max:9999999999,clearable:""},model:{value:t.oneFormBatch[0].price,callback:function(e){t.$set(t.oneFormBatch[0],"price",e)},expression:"oneFormBatch[0].price"}})]:t._e(),"settle_price"===e.slot?[a("InputNumber",{staticClass:"priceBox",attrs:{controls:!1,disabled:"",min:0,max:9999999999},model:{value:t.oneFormBatch[0].settle_price,callback:function(e){t.$set(t.oneFormBatch[0],"settle_price",e)},expression:"oneFormBatch[0].settle_price"}})]:"cost"===e.slot?[a("InputNumber",{staticClass:"priceBox",attrs:{controls:!1,min:0,max:9999999999,clearable:""},model:{value:t.oneFormBatch[0].cost,callback:function(e){t.$set(t.oneFormBatch[0],"cost",e)},expression:"oneFormBatch[0].cost"}})]:"ot_price"===e.slot?[a("InputNumber",{staticClass:"priceBox",attrs:{controls:!1,min:0,clearable:""},model:{value:t.oneFormBatch[0].ot_price,callback:function(e){t.$set(t.oneFormBatch[0],"ot_price",e)},expression:"oneFormBatch[0].ot_price"}})]:"stock"===e.slot?[a("InputNumber",{staticClass:"priceBox",attrs:{controls:!1,disabled:1==t.formData.virtual_type,min:0,max:9999999999,clearable:""},model:{value:t.oneFormBatch[0].stock,callback:function(e){t.$set(t.oneFormBatch[0],"stock",e)},expression:"oneFormBatch[0].stock"}})]:"fictitious"===e.slot?[t._v("\n                      --\n                    ")]:"code"===e.slot?[a("Input",{model:{value:t.oneFormBatch[0].code,callback:function(e){t.$set(t.oneFormBatch[0],"code",e)},expression:"oneFormBatch[0].code"}})]:"bar_code"===e.slot?[a("Input",{model:{value:t.oneFormBatch[0].bar_code,callback:function(e){t.$set(t.oneFormBatch[0],"bar_code",e)},expression:"oneFormBatch[0].bar_code"}})]:"weight"===e.slot?[a("InputNumber",{staticClass:"priceBox",attrs:{controls:!1,step:.1,min:0,max:9999999999,clearable:""},model:{value:t.oneFormBatch[0].weight,callback:function(e){t.$set(t.oneFormBatch[0],"weight",e)},expression:"oneFormBatch[0].weight"}})]:"volume"===e.slot?[a("InputNumber",{staticClass:"priceBox",attrs:{controls:!1,step:.1,min:0,max:9999999999,clearable:""},model:{value:t.oneFormBatch[0].volume,callback:function(e){t.$set(t.oneFormBatch[0],"volume",e)},expression:"oneFormBatch[0].volume"}})]:"selected_spec"===e.slot?[t._v("\n                      --\n                    ")]:"action"===e.slot?[a("a",{on:{click:t.batchAdd}},[t._v("批量修改")]),a("Divider",{attrs:{type:"vertical"}}),a("a",{on:{click:t.batchDel}},[t._v("清空")])]:t._e()]:[e.key?[a("div",[a("span",[t._v(t._s(r.row.detail[e.key]))])])]:t._e(),"pic"===e.slot?[a("div",{staticClass:"pictrueBox small flex-center",on:{click:function(e){return t.setAttrPic(r.$index)}}},[t.manyFormValidate[r.$index].pic?a("div",{staticClass:"pictrue"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.manyFormValidate[r.$index].pic,expression:"manyFormValidate[scope.$index].pic"}]})]):a("div",{staticClass:"upLoad acea-row row-center-wrapper"},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1)])]:t._e(),"price"===e.slot?[a("InputNumber",{staticClass:"priceBox",attrs:{controls:!1,min:0,max:9999999999},model:{value:t.manyFormValidate[r.$index].price,callback:function(e){t.$set(t.manyFormValidate[r.$index],"price",e)},expression:"manyFormValidate[scope.$index].price"}})]:t._e(),"settle_price"===e.slot?[a("InputNumber",{staticClass:"priceBox",attrs:{controls:!1,disabled:"",min:0,max:9999999999},model:{value:t.manyFormValidate[r.$index].settle_price,callback:function(e){t.$set(t.manyFormValidate[r.$index],"settle_price",e)},expression:"manyFormValidate[scope.$index].settle_price"}})]:"cost"===e.slot?[a("InputNumber",{staticClass:"priceBox",attrs:{controls:!1,min:0,max:9999999999},model:{value:t.manyFormValidate[r.$index].cost,callback:function(e){t.$set(t.manyFormValidate[r.$index],"cost",e)},expression:"manyFormValidate[scope.$index].cost"}})]:"ot_price"===e.slot?[a("InputNumber",{staticClass:"priceBox",attrs:{controls:!1,min:0,max:9999999999},model:{value:t.manyFormValidate[r.$index].ot_price,callback:function(e){t.$set(t.manyFormValidate[r.$index],"ot_price",e)},expression:"manyFormValidate[scope.$index].ot_price"}})]:"stock"===e.slot?[a("InputNumber",{staticClass:"priceBox",attrs:{controls:!1,disabled:1==t.formData.product_type,min:0,max:9999999999,precision:0},model:{value:t.manyFormValidate[r.$index].stock,callback:function(e){t.$set(t.manyFormValidate[r.$index],"stock",e)},expression:"manyFormValidate[scope.$index].stock"}})]:"code"===e.slot?[a("Input",{model:{value:t.manyFormValidate[r.$index].code,callback:function(e){t.$set(t.manyFormValidate[r.$index],"code",e)},expression:"manyFormValidate[scope.$index].code"}})]:"bar_code"===e.slot?[a("Input",{model:{value:t.manyFormValidate[r.$index].bar_code,callback:function(e){t.$set(t.manyFormValidate[r.$index],"bar_code",e)},expression:"manyFormValidate[scope.$index].bar_code"}})]:"weight"===e.slot?[a("InputNumber",{staticClass:"priceBox",attrs:{controls:!1,min:0,max:9999999999},model:{value:t.manyFormValidate[r.$index].weight,callback:function(e){t.$set(t.manyFormValidate[r.$index],"weight",e)},expression:"manyFormValidate[scope.$index].weight"}})]:"volume"===e.slot?[a("InputNumber",{staticClass:"priceBox",attrs:{controls:!1,min:0,max:9999999999},model:{value:t.manyFormValidate[r.$index].volume,callback:function(e){t.$set(t.manyFormValidate[r.$index],"volume",e)},expression:"manyFormValidate[scope.$index].volume"}})]:"fictitious"===e.slot?[r.row.virtual_list&&r.row.virtual_list.length||r.row.stock?a("span",{staticClass:"seeCatMy",on:{click:function(e){return t.seeVirtual(t.manyFormValidate[r.$index],"manyFormValidate",r.$index)}}},[t._v("已设置")]):a("Button",{on:{click:function(e){return t.addVirtual(r.$index,"manyFormValidate")}}},[t._v("添加卡密")])]:"selected_spec"===e.slot?[a("i-switch",{attrs:{"true-value":1,"false-value":0},on:{"on-change":function(e){return t.changeDefaultSelect(r.$index)}},model:{value:t.manyFormValidate[r.$index].is_default_select,callback:function(e){t.$set(t.manyFormValidate[r.$index],"is_default_select",e)},expression:"\n                          manyFormValidate[scope.$index].is_default_select\n                        "}})]:"action"===e.slot?[a("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},on:{"on-change":function(e){return t.changeDefaultShow(r.$index)}},scopedSlots:t._u([{key:"open",fn:function(){return[a("span",[t._v("显示")])]},proxy:!0},{key:"close",fn:function(){return[a("span",[t._v("隐藏")])]},proxy:!0}],null,!0),model:{value:t.manyFormValidate[r.$index].is_show,callback:function(e){t.$set(t.manyFormValidate[r.$index],"is_show",e)},expression:"manyFormValidate[scope.$index].is_show"}})]:t._e()]]}}],null,!0)})})),1)],1)],1):t._e(),0==t.formData.spec_type&&[0,1,3].includes(t.formData.product_type)?a("div",[a("FormItem",{attrs:{label:"图片：",required:""}},[a("div",{staticClass:"pictrueBox",on:{click:function(e){return t.attrPicTap()}}},[t.formData.attr.pic?a("div",{staticClass:"pictrue"},[a("img",{attrs:{src:t.formData.attr.pic}})]):a("div",{staticClass:"upLoad acea-row row-center-wrapper"},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1)])]),a("FormItem",{attrs:{label:"售价：",required:""}},[a("InputNumber",{staticClass:"w-260",attrs:{min:0,max:99999999},model:{value:t.formData.attr.price,callback:function(e){t.$set(t.formData.attr,"price",e)},expression:"formData.attr.price"}})],1),2==t.merchantType?a("FormItem",{attrs:{label:"结算价：",required:""}},[a("InputNumber",{staticClass:"w-260",attrs:{disabled:!0,min:0,max:99999999},model:{value:t.formData.attr.settle_price,callback:function(e){t.$set(t.formData.attr,"settle_price",e)},expression:"formData.attr.settle_price"}})],1):t._e(),a("FormItem",{attrs:{label:"成本价："}},[a("InputNumber",{staticClass:"w-260",attrs:{min:0,max:99999999},model:{value:t.formData.attr.cost,callback:function(e){t.$set(t.formData.attr,"cost",e)},expression:"formData.attr.cost"}})],1),a("FormItem",{attrs:{label:"划线价："}},[a("InputNumber",{staticClass:"w-260",attrs:{min:0,max:99999999},model:{value:t.formData.attr.ot_price,callback:function(e){t.$set(t.formData.attr,"ot_price",e)},expression:"formData.attr.ot_price"}})],1),a("FormItem",{attrs:{label:"库存：",required:""}},[a("InputNumber",{staticClass:"w-260",attrs:{min:0,max:99999999,disabled:1==t.formData.product_type||t.openErp,precision:0},model:{value:t.formData.attr.stock,callback:function(e){t.$set(t.formData.attr,"stock",e)},expression:"formData.attr.stock"}})],1),a("FormItem",{attrs:{label:"商品编号："}},[a("Input",{staticClass:"w-260",attrs:{placeholder:"请输入商品编码"},model:{value:t.formData.attr.code,callback:function(e){t.$set(t.formData.attr,"code","string"==typeof e?e.trim():e)},expression:"formData.attr.code"}})],1),a("FormItem",{attrs:{label:"商品条形码："}},[a("Input",{staticClass:"w-260",attrs:{placeholder:"请输入商品条形码"},model:{value:t.formData.attr.bar_code,callback:function(e){t.$set(t.formData.attr,"bar_code","string"==typeof e?e.trim():e)},expression:"formData.attr.bar_code"}})],1),0==t.formData.product_type?a("FormItem",{attrs:{label:"重量（KG）："}},[a("InputNumber",{staticClass:"w-260",attrs:{min:0,max:99999999},model:{value:t.formData.attr.weight,callback:function(e){t.$set(t.formData.attr,"weight",e)},expression:"formData.attr.weight"}})],1):t._e(),0==t.formData.product_type?a("FormItem",{attrs:{label:"体积(m³)："}},[a("InputNumber",{staticClass:"w-260",attrs:{min:0,max:99999999},model:{value:t.formData.attr.volume,callback:function(e){t.$set(t.formData.attr,"volume",e)},expression:"formData.attr.volume"}})],1):t._e(),1==t.formData.product_type?[a("FormItem",{attrs:{label:"卡密设置："}},[t.formData.attr.virtual_list.length||t.formData.attr.stock?a("span",{staticClass:"seeCatMy",on:{click:function(e){return t.seeVirtual(t.formData.attr,"attr")}}},[t._v("已设置")]):a("Button",{on:{click:function(e){return t.addVirtual(0,"attr")}}},[t._v("添加卡密")])],1)]:t._e()],2):t._e(),0===t.formData.spec_type&&4==t.formData.product_type?a("div",[a("FormItem",{attrs:{label:"图片：",required:""}},[a("div",{staticClass:"pictrueBox",on:{click:function(e){return t.attrPicTap()}}},[t.formData.attr.pic?a("div",{staticClass:"pictrue"},[a("img",{attrs:{src:t.formData.attr.pic}})]):a("div",{staticClass:"upLoad acea-row row-center-wrapper"},[a("Icon",{attrs:{type:"ios-camera-outline",size:"26"}})],1)])]),a("FormItem",{attrs:{label:"核销次数："}},[a("InputNumber",{staticClass:"w-260",attrs:{min:1,max:99999999,precision:0,placeholder:"请输入核销次数"},model:{value:t.formData.attr.write_times,callback:function(e){t.$set(t.formData.attr,"write_times",e)},expression:"formData.attr.write_times"}})],1),a("FormItem",{attrs:{required:"",label:"核销时效："}},[a("RadioGroup",{model:{value:t.formData.attr.write_valid,callback:function(e){t.$set(t.formData.attr,"write_valid",e)},expression:"formData.attr.write_valid"}},[a("Radio",{attrs:{label:1}},[t._v("永久有效")]),a("Radio",{attrs:{label:2}},[t._v("购买后几天有效")]),a("Radio",{attrs:{label:3}},[t._v("固定有效期")])],1)],1),2==t.formData.attr.write_valid?a("FormItem",{attrs:{label:"",prop:"freight"}},[a("div",{staticClass:"acea-row row-middle"},[a("InputNumber",{staticClass:"w-260",attrs:{min:1,placeholder:"请输入有效天数"},model:{value:t.formData.attr.days,callback:function(e){t.$set(t.formData.attr,"days",e)},expression:"formData.attr.days"}}),a("span",{staticClass:"ml10"},[t._v("天")])],1)]):t._e(),3==t.formData.attr.write_valid?a("FormItem",{attrs:{label:"",prop:"freight"}},[a("div",{staticClass:"acea-row row-middle"},[a("DatePicker",{staticClass:"w-260",attrs:{editable:!1,clearable:"",type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss",placement:"bottom-start",placeholder:"请选择固定有效期"},on:{"on-change":t.onchangeTime},model:{value:t.section_time,callback:function(e){t.section_time=e},expression:"section_time"}})],1)]):t._e(),a("FormItem",{attrs:{label:"售价：",required:""}},[a("InputNumber",{staticClass:"w-260",attrs:{min:0,max:99999999},model:{value:t.formData.attr.price,callback:function(e){t.$set(t.formData.attr,"price",e)},expression:"formData.attr.price"}})],1),a("FormItem",{attrs:{label:"成本价："}},[a("InputNumber",{staticClass:"w-260",attrs:{min:0,max:99999999},model:{value:t.formData.attr.cost,callback:function(e){t.$set(t.formData.attr,"cost",e)},expression:"formData.attr.cost"}})],1),a("FormItem",{attrs:{label:"划线价："}},[a("InputNumber",{staticClass:"w-260",attrs:{min:0,max:99999999},model:{value:t.formData.attr.ot_price,callback:function(e){t.$set(t.formData.attr,"ot_price",e)},expression:"formData.attr.ot_price"}})],1),a("FormItem",{attrs:{label:"库存：",required:""}},[a("InputNumber",{staticClass:"w-260",attrs:{min:0,max:99999999,disabled:1==t.formData.product_type||t.openErp,precision:0},model:{value:t.formData.attr.stock,callback:function(e){t.$set(t.formData.attr,"stock",e)},expression:"formData.attr.stock"}})],1)],1):t._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"3"===t.currentTab,expression:"currentTab === '3'"}]},[a("Row",{staticClass:"mb10"},[a("Col",{attrs:{span:"16"}},[a("wangeditor",{staticStyle:{width:"100%"},attrs:{content:t.description},on:{editorContent:t.getEditorContent}})],1),a("Col",{staticStyle:{width:"33%"},attrs:{span:"6"}},[a("div",{staticClass:"ifam"},[a("div",{staticClass:"content",domProps:{innerHTML:t._s(t.formData.description)}})])])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"4"===t.currentTab,expression:"currentTab === '4'"}]},[a("FormItem",{attrs:{label:"配送方式：",prop:"",required:""}},[a("CheckboxGroup",{model:{value:t.formData.delivery_type,callback:function(e){t.$set(t.formData,"delivery_type",e)},expression:"formData.delivery_type"}},[a("Checkbox",{attrs:{label:"1"}},[t._v("快递")]),a("Checkbox",{attrs:{label:"2"}},[t._v("自提")])],1)],1),a("FormItem",{attrs:{label:"运费设置："}},[a("RadioGroup",{model:{value:t.formData.freight,callback:function(e){t.$set(t.formData,"freight",e)},expression:"formData.freight"}},[a("Radio",{attrs:{label:1}},[t._v("包邮")]),a("Radio",{attrs:{label:2}},[t._v("固定邮费")]),a("Radio",{attrs:{label:3}},[t._v("运费模板")])],1)],1),2==t.formData.freight?a("FormItem",{attrs:{label:"",prop:"freight"}},[a("div",{staticClass:"acea-row row-middle"},[a("InputNumber",{staticClass:"perW20 maxW",attrs:{min:0,placeholder:"请输入金额"},model:{value:t.formData.postage,callback:function(e){t.$set(t.formData,"postage",e)},expression:"formData.postage"}}),a("span",{staticClass:"ml10"},[t._v("元")])],1)]):t._e(),3==t.formData.freight?a("FormItem",{attrs:{label:""}},[a("div",{staticClass:"acea-row"},[a("Select",{staticClass:"perW20 maxW",attrs:{clearable:""},model:{value:t.formData.temp_id,callback:function(e){t.$set(t.formData,"temp_id",e)},expression:"formData.temp_id"}},t._l(t.templateList,(function(e,r){return a("Option",{key:r,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1),t.formData.temp_id?a("Button",{staticClass:"ml15",on:{click:t.editTemp}},[t._v("查看运费模板")]):a("Button",{staticClass:"ml15",on:{click:t.addTemp}},[t._v("添加运费模板")])],1)]):t._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"5"===t.currentTab,expression:"currentTab === '5'"}]},[a("marketingSet",{ref:"marketingSet",attrs:{successData:t.success,baseInfo:t.formData,product_type:t.formData.product_type}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"6"===t.currentTab,expression:"currentTab === '6'"}]},[a("otherSet",{ref:"otherSet",attrs:{successData:t.success,baseInfo:t.formData,product_type:t.formData.product_type}})],1)])],1),a("Card",{staticClass:"fixed-card",style:{left:t.menuCollapse?t.isMobile?"0":"80px":"200px"},attrs:{bordered:!1,"dis-hover":""}},[a("div",{staticClass:"flex-center"},["1"!==t.currentTab?a("Button",{on:{click:t.upTab}},[t._v("上一步")]):t._e(),"6"!==t.currentTab?a("Button",{staticClass:"submission",attrs:{type:"primary"},on:{click:function(e){return t.downTab("formData")}}},[t._v("下一步")]):t._e(),"1"!=t.currentTab?a("Button",{staticClass:"submission",attrs:{type:"primary",disabled:t.openSubimit},on:{click:function(e){return t.handleSubmit()}}},[t._v("保存")]):t._e()],1)]),a("add-attr",{ref:"addattr",on:{getList:t.productGetRule}}),a("Modal",{attrs:{scrollable:"",title:"添加卡密",closable:"",width:"700","footer-hide":!0,"mask-closable":!1},model:{value:t.carMyShow,callback:function(e){t.carMyShow=e},expression:"carMyShow"}},[a("add-carMy",{ref:"addCarMy",attrs:{virtualList:t.virtualList},on:{changeVirtual:t.changeVirtual,fixdBtn:t.fixdBtn,closeCarMy:t.closeCarMy}})],1),a("freightTemplate",{ref:"templates",attrs:{template:t.template,merchantType:t.merchantType},on:{changeTemplate:t.changeTemplate}}),a("Modal",{staticClass:"Box",attrs:{"class-name":"vertical-center-modal",scrollable:"","footer-hide":"",closable:"",title:"复制淘宝、天猫、京东、苏宁、1688","mask-closable":!1,width:"800",height:"500"},on:{"on-cancel":t.cancel},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[t.modals?a("tao-bao",{ref:"taobaos",on:{"on-close":t.onClose}}):t._e()],1)],1)}),[],!1,null,"7bfe6f56",null));e.default=Z.exports}}]);