(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5d38b7a8","chunk-9560c5a2"],{"0a1e":function(t,e,r){},"2ede":function(t,e,r){},"31b4":function(t,e,r){"use strict";var n=r("9860"),i=r.n(n),a=r("b6bd"),o=r("2f62");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d={name:"edit",components:{formCreate:i.a.$form()},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(o.e)("admin/userLevel",["taskId","levelId"])),props:{FromData:{type:Object,default:null},userEdit:{type:Number,default:0}},data:function(){return{modals:!1,type:0,config:{global:{upload:{props:{onSuccess:function(t,e){200===t.status?e.url=t.data.src:this.Message.error(t.msg)}}}}},isDisable:!1}},methods:{couponsType:function(){this.$parent.addType(this.type)},onSubmit:function(t){var e,r=this;(setTimeout((function(){r.isDisable=!1}),1e3),this.isDisable)||(this.isDisable=!0,e=t,Object(a.a)({url:this.FromData.action,method:this.FromData.method,data:e}).then((function(t){r.$parent.getList(),r.$Message.success(t.msg),r.modals=!1,setTimeout((function(){r.$emit("submitFail")}),1e3)})).catch((function(t){r.$Message.error(t.msg)})))},cancel:function(){this.type=0}}},u=(r("bddf"),r("2877")),f=Object(u.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.FromData?r("div",[r("Modal",{class:t.userEdit?"userEdit":"",attrs:{scrollable:"","footer-hide":"",closable:"",title:t.FromData.title,width:"700"},on:{"on-cancel":t.cancel},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[["/marketing/coupon/save.html"===t.FromData.action?r("div",{staticClass:"radio acea-row row-middle"},[r("div",{staticClass:"name ivu-form-item-content"},[t._v("优惠券类型")]),r("Radio-group",{on:{"on-change":t.couponsType},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[r("Radio",{attrs:{label:0}},[t._v("通用券")]),r("Radio",{attrs:{label:1}},[t._v("品类券")]),r("Radio",{attrs:{label:2}},[t._v("商品券")])],1)],1):t._e()],r("form-create",{ref:"fc",staticClass:"formBox",attrs:{option:t.config,rule:Array.from(t.FromData.rules),handleIcon:"false"},on:{"on-submit":t.onSubmit}})],2)],1):t._e()}),[],!1,null,"2850396f",null);e.a=f.exports},"370a":function(t,e,r){"use strict";r.r(e);var n=r("a464"),i=r("f8b7"),a=r("2f62"),o=r("31b4"),s=r("fc48"),l=r("61f8"),c=r("417c"),d=r("d616"),u=r("a716");function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(){p=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,o=Object.create(a.prototype),s=new $(n||[]);return i(o,"_invoke",{value:E(t,r,s)}),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var m="suspendedStart",v="suspendedYield",h="executing",_="completed",y={};function g(){}function b(){}function w(){}var I={};c(I,o,(function(){return this}));var x=Object.getPrototypeOf,C=x&&x(x(T([])));C&&C!==r&&n.call(C,o)&&(I=C);var D=w.prototype=g.prototype=Object.create(I);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(i,a,o,s){var l=u(t[i],t,a);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==f(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(d).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return a=a?a.then(i,i):i()}})}function E(e,r,n){var i=m;return function(a,o){if(i===h)throw Error("Generator is already running");if(i===_){if("throw"===a)throw o;return{value:t,done:!0}}for(n.method=a,n.arg=o;;){var s=n.delegate;if(s){var l=S(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===m)throw i=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var c=u(e,r,n);if("normal"===c.type){if(i=n.done?_:v,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=_,n.method="throw",n.arg=c.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=u(i,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(f(e)+" is not iterable")}return b.prototype=w,i(D,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=c(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,c(t,l,"GeneratorFunction")),t.prototype=Object.create(D),t},e.awrap=function(t){return{__await:t}},k(j.prototype),c(j.prototype,s,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new j(d(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(D),c(D,l,"Generator"),c(D,o,(function(){return this})),c(D,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function m(t,e,r,n,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}function v(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(t){m(a,n,i,o,s,"next",t)}function s(t){m(a,n,i,o,s,"throw",t)}o(void 0)}))}}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==f(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g={name:"table_list",components:{expandRow:n.a,editFrom:o.a,detailsFrom:s.a,orderRemark:l.a,orderRecord:c.a,orderSend:d.a,userDetails:u.a},props:["where","isAll"],data:function(){var t=this;return{delfromData:{},modal:!1,orderList:[],orderCards:[],loading:!1,orderId:0,columns:[{type:"expand",width:30,render:function(t,e){return t(n.a,{props:{row:e.row}})}},{width:50,align:"center",renderHeader:function(e,r){return e("div",{class:{"select-panel":!0},on:{mouseenter:function(e){t.display="block"},mouseleave:function(e){t.display="none"}}},[e("Checkbox",{props:{value:t.checkBox},on:{"on-change":function(e){t.checkBox=e,t.$refs.table.selectAll(t.checkBox),t.$emit("on-all",e?0:-1)}}}),e("div",{style:{position:"absolute",top:0,zIndex:2,display:t.display,width:"80px",height:"100%",padding:"0px 0",borderRadius:"4px",backgroundColor:"#fff",boxShadow:"0 0px 5px rgba(0, 0, 0, 0.2)",transform:"translateX(25%)"}},[e("div",{class:{"select-item":!0,on:0==t.isAll},style:{padding:"1px 6px",cursor:"pointer",height:"50%"},on:{click:function(e){0===t.isAll?(t.$emit("on-all",-1),t.checkBox=!1,t.$refs.table.selectAll(t.checkBox)):(t.$emit("on-all",0),t.formSelection.length||(t.checkBox=!0,t.$refs.table.selectAll(t.checkBox))),t.display="none"}}},"选择当页"),e("div",{class:{"select-item":!0,on:1==t.isAll},style:{padding:"1px 6px",cursor:"pointer",height:"50%"},on:{click:function(e){1===t.isAll?(t.isAll=-1,t.$emit("on-all",-1),t.checkBox=!1):(t.isAll=1,t.$emit("on-all",1),t.checkBox=!0),t.$refs.table.selectAll(t.checkBox),t.display="none"}}},"选择全部")])])},render:function(e,r){return e("Checkbox",{props:{value:r.row.checkBox},on:{"on-change":function(e){e?t.formSelection.push(r.row):(t.checkBox=!1,t.formSelection.forEach((function(e,n){e.id===r.row.id&&t.formSelection.splice(n,1)}))),t.$emit("on-all",t.formSelection.length?0:-1),r.row.checkBox=e,t.orderList[r.index].checkBox=e}},ref:"checkbox",refInFor:!0})}},{title:"订单号",align:"center",slot:"order_id",minWidth:150},{title:"订单类型",key:"pink_name",minWidth:120},{title:"用户信息",slot:"nickname",minWidth:100},{title:"商品信息",slot:"info",minWidth:330},{title:"实际支付",key:"pay_price",minWidth:70},{title:"支付时间",key:"_pay_time",minWidth:100},{title:"支付状态",key:"pay_type_name",minWidth:80},{title:"订单状态",key:"statusName",slot:"statusName",minWidth:120},{title:"操作",slot:"action",minWidth:150,align:"center"}],page:{total:0,pageNum:1,pageSize:10},data:[],FromData:null,orderDatalist:null,modalTitleSs:"",isDelIdList:[],checkBox:!1,formSelection:[],selectionCopy:[],display:"none",autoDisabled:!1,status:0}},computed:_({},Object(a.e)("admin/order",["orderPayType","orderStatus","orderTime","orderNum","fieldKey","orderType","orderChartType"])),mounted:function(){},created:function(){this.getList()},watch:{orderType:function(){this.page.pageNum=1,this.getList()},formSelection:function(t){this.$emit("order-select",t),t.length?this.$emit("auto-disabled",0):this.$emit("auto-disabled",1);var e=t.some((function(t){return 1===t.is_del}));this.getIsDel(e),this.getisDelIdListl(t)},orderList:{deep:!0,handler:function(t){var e=this;t.forEach((function(t){e.formSelection.forEach((function(e){e.id===t.id&&(t.checkBox=!0)}))}));var r=this.orderList.filter((function(t){return t.checkBox}));this.orderList.length?this.checkBox=this.orderList.length===r.length:this.checkBox=!1}}},methods:_(_({},Object(a.d)("admin/order",["getIsDel","getisDelIdListl"])),{},{selectAll:function(t){var e=this;t.length&&(this.formSelection=t,this.selectionCopy=t),this.selectionCopy.forEach((function(t,r){t.checkBox=e.checkBox,e.$set(e.orderList,r,t)}))},showUserInfo:function(t){this.$refs.userDetails.modals=!0,this.$refs.userDetails.getDetails(t.uid)},changeMenu:function(t,e){var r=this;switch(this.orderId=t.id,e){case"1":this.delfromData={title:"修改立即支付",url:"/order/pay_offline/".concat(t.id),method:"post",ids:""},this.$modalSure(this.delfromData).then((function(t){r.$Message.success(t.msg),r.$emit("changeGetTabs"),r.getList()})).catch((function(t){r.$Message.error(t.msg)}));break;case"2":this.getData(t.id);break;case"3":this.$refs.record.modals=!0,this.$refs.record.getList(t.id);break;case"4":this.$refs.remarks.modals=!0;break;case"5":this.getOnlyRefundData(t.id,t.refund_type);break;case"55":this.getRefundData(t.id,t.refund_type);break;case"6":this.getRefundIntegral(t.id);break;case"7":this.getNoRefundData(t.id);break;case"8":this.delfromData={title:"修改确认收货",url:"/order/take/".concat(t.id),method:"put",ids:""},this.$modalSure(this.delfromData).then((function(t){r.$Message.success(t.msg),r.getList()})).catch((function(t){r.$Message.error(t.msg)}));break;case"10":this.delfromData={title:"立即打印订单",info:"您确认打印此订单吗?",url:"/order/print/".concat(t.id),method:"get",ids:""},this.$modalSure(this.delfromData).then((function(t){r.$Message.success(t.msg),r.$emit("changeGetTabs"),r.getList()})).catch((function(t){r.$Message.error(t.msg)}));break;case"11":this.delfromData={title:"立即打印电子面单",info:"您确认打印此电子面单吗?",url:"/order/order_dump/".concat(t.id),method:"get",ids:""},this.$modalSure(this.delfromData).then((function(t){r.$Message.success(t.msg),r.getList()})).catch((function(t){r.$Message.error(t.msg)}));break;default:this.delfromData={title:"删除订单",url:"/order/del/".concat(t.id),method:"DELETE",ids:""},this.delOrder(t,this.delfromData)}},submitModel:function(){this.getList()},pageChange:function(t){this.page.pageNum=t,this.getList()},limitChange:function(t){this.page.pageSize=t,this.getList()},getOrderList:function(t){Object(i.cb)(t).then((function(t){}))},getList:function(t){var e=this;this.page.pageNum=1===t?1:this.page.pageNum,this.loading=!0,Object(i.cb)(this.$route.query.id).then(function(){var t=v(p().mark((function t(r){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.data,e.orderList=n.map((function(t){return 1===e.isAll?t.checkBox=!0:t.checkBox=!1,t})),e.orderCards=n.stat,e.page.total=n.count,e.$emit("on-changeCards",n.stat),e.loading=!1;case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},onSelectTab:function(t){this.formSelection=t;var e=t.some((function(t){return 1===t.is_del}));this.getIsDel(e),this.getisDelIdListl(t)},edit:function(t){this.getOrderData(t.id)},splitOrderDetail:function(t){this.$router.push({path:"split_order",query:{id:t.id}})},delOrder:function(t,e){var r=this;1===t.is_del?this.$modalSure(e).then((function(t){r.$Message.success(t.msg),r.getList()})).catch((function(t){r.$Message.error(t.msg)})):this.$Modal.error({title:"错误！",content:"<p>您选择的的订单存在用户未删除的订单，无法删除用户未删除的订单！</p>"})},getOrderData:function(t){var e=this;Object(i.l)(t).then(function(){var t=v(p().mark((function t(r){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==r.data.status){t.next=2;break}return t.abrupt("return",e.$authLapse(r.data));case 2:e.$authLapse(r.data),e.FromData=r.data,e.$refs.edits.modals=!0;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},getData:function(t){var e=this;Object(i.g)(t).then(function(){var t=v(p().mark((function t(r){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$refs.detailss.modals=!0,e.orderDatalist=r.data,e.orderDatalist.orderInfo.refund_reason_wap_img)try{e.orderDatalist.orderInfo.refund_reason_wap_img=JSON.parse(e.orderDatalist.orderInfo.refund_reason_wap_img)}catch(t){e.orderDatalist.orderInfo.refund_reason_wap_img=[]}case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},submitFail:function(){this.status=0,this.getList()},getOnlyRefundData:function(t,e){var r=this;this.$modalForm(Object(i.q)(t)).then((function(){r.getList(),r.$emit("changeGetTabs")}))},getRefundData:function(t,e){var r=this;this.$route.query.orderChartType,this.delfromData={title:"是否立即退货退款",url:"/refund/agree/".concat(t),method:"get"},this.$modalSure(this.delfromData).then((function(t){r.$Message.success(t.msg),r.getList(),r.$emit("changeGetTabs")})).catch((function(t){r.$Message.error(t.msg)}))},getRefundIntegral:function(t){var e=this;Object(i.W)(t).then(function(){var t=v(p().mark((function t(r){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.FromData=r.data,e.$refs.edits.modals=!0;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},getNoRefundData:function(t){var e=this;this.$modalForm(Object(i.s)(t)).then((function(){e.getList(),e.$emit("changeGetTabs")}))},sendOrder:function(t){var e=this;this.$refs.send.modals=!0,this.orderId=t.id,this.status=t._status,this.$refs.send.getList(),this.$refs.send.getDeliveryList(),this.$nextTick((function(r){e.$refs.send.getCartInfo(t._status,t.id)}))},delivery:function(t){var e=this;Object(i.h)(t.id).then(function(){var t=v(p().mark((function t(r){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.FromData=r.data,e.$refs.edits.modals=!0;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},change:function(t){},exportData:function(){this.$refs.table.exportCsv({filename:"商品列表"})},bindWrite:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确定要核销该订单吗？",cancelText:"取消",closable:!0,maskClosable:!0,onOk:function(){Object(i.gb)(t.order_id).then((function(t){e.$Message.success(t.msg),e.getList()}))},onCancel:function(){}})},onSelectCancel:function(t,e){}})},b=(r("7bd4"),r("2877")),w=Object(b.a)(g,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"i-layout-page-header"},[r("PageHeader",{staticClass:"product_tabs",attrs:{title:"子订单列表","hidden-breadcrumb":""}})],1),r("Table",{ref:"table",staticClass:"orderData mt25",attrs:{columns:t.columns,data:t.orderList,loading:t.loading,"highlight-row":"","no-data-text":"暂无数据","no-filtered-data-text":"暂无筛选结果"},on:{"on-selection-change":t.onSelectTab,"on-select-all":t.selectAll,"on-select-all-cancel":t.selectAll,"on-select-cancel":t.onSelectCancel},scopedSlots:t._u([{key:"order_id",fn:function(e){var n=e.row;return e.index,[r("span",{staticStyle:{display:"block"},domProps:{textContent:t._s(n.order_id)}}),r("span",{directives:[{name:"show",rawName:"v-show",value:1===n.is_del,expression:"row.is_del === 1"}],staticClass:"span-del"},[t._v("用户已删除")])]}},{key:"nickname",fn:function(e){var n=e.row;return e.index,[r("a",{on:{click:function(e){return t.showUserInfo(n)}}},[t._v(t._s(n.nickname))])]}},{key:"info",fn:function(e){var n=e.row;return e.index,t._l(n._info,(function(e,n){return r("div",{key:n,staticClass:"tabBox"},[r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.image:e.cart_info.productInfo.image,expression:"\n                val.cart_info.productInfo.attrInfo\n                  ? val.cart_info.productInfo.attrInfo.image\n                  : val.cart_info.productInfo.image\n              "}]})]),r("span",{staticClass:"tabBox_tit"},[t._v("\n            "+t._s(e.cart_info.productInfo.store_name+" | ")+t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.suk:"")+"\n          ")]),r("span",{staticClass:"tabBox_pice"},[t._v(t._s("￥"+e.cart_info.truePrice+" x "+e.cart_info.cart_num))])])}))}},{key:"statusName",fn:function(e){var n=e.row;return e.index,[r("div",{staticClass:"pt5",domProps:{innerHTML:t._s(n.status_name.status_name)}}),r("div",{staticClass:"pictrue-box"},t._l(n.status_name.pics||[],(function(e,i){return n.status_name.pics?r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:i},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"item"}],staticClass:"pictrue mr10",attrs:{src:e}})]):t._e()})),0)]}},{key:"action",fn:function(e){var n=e.row;return e.index,[1===n._status?r("a",{on:{click:function(e){return t.edit(n)}}},[t._v("编辑")]):t._e(),2!==n._status&&8!==n._status||1!==n.shipping_type||null!==n.pinkStatus&&2!==n.pinkStatus?t._e():r("a",{on:{click:function(e){return t.sendOrder(n)}}},[t._v("发送货")]),4===n._status?r("a",{on:{click:function(e){return t.delivery(n)}}},[t._v("配送信息")]):t._e(),2==n.shipping_type&&0==n.status&&1==n.paid&&0===n.refund_status?r("a",{on:{click:function(e){return t.bindWrite(n)}}},[t._v("立即核销")]):t._e(),2===n._status||8===n._status?r("Divider",{attrs:{type:"vertical"}}):t._e(),8===n._status?r("a",{on:{click:function(e){return t.splitOrderDetail(n)}}},[t._v("查看子订单")]):t._e(),1===n._status||(2===n._status||8===n._status)&&(null===n.pinkStatus||2===n.pinkStatus)||4===n._status||2==n.shipping_type&&0==n.status&&1==n.paid&&0===n.refund_status?r("Divider",{attrs:{type:"vertical"}}):t._e(),[r("Dropdown",{on:{"on-click":function(e){return t.changeMenu(n,e)}}},[r("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n              更多\n              "),r("Icon",{attrs:{type:"ios-arrow-down"}})],1),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[r("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:1===n._status&&0===n.paid&&"offline"===n.pay_type,expression:"\n                  row._status === 1 &&\n                  row.paid === 0 &&\n                  row.pay_type === 'offline'\n                "}],ref:"ones",attrs:{name:"1"}},[t._v("立即支付")]),r("DropdownItem",{attrs:{name:"2"}},[t._v("订单详情")]),r("DropdownItem",{attrs:{name:"3"}},[t._v("订单记录")]),r("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:n._status>=3&&n.express_dump,expression:"row._status >= 3 && row.express_dump"}],attrs:{name:"11"}},[t._v("电子面单打印")]),r("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:n._status>=2,expression:"row._status >= 2"}],attrs:{name:"10"}},[t._v("小票打印")]),r("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:1!==n._status||3===n._status&&n.use_integral>0&&n.use_integral>=n.back_integral,expression:"\n                  row._status !== 1 ||\n                  (row._status === 3 &&\n                    row.use_integral > 0 &&\n                    row.use_integral >= row.back_integral)\n                "}],attrs:{name:"4"}},[t._v("订单备注")]),r("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:2!=n.refund_type&&4!=n.refund_type&&6!=n.refund_type&&1==n.paid&&2!==n.refund_status&&parseFloat(n.pay_price)>0,expression:"row.refund_type != 2 && row.refund_type != 4 && row.refund_type != 6 && row.paid==1 && row.refund_status !==2 && parseFloat(row.pay_price) > 0"}],attrs:{name:"5"}},[t._v("立即退款")]),r("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:2==n.refund_type,expression:"row.refund_type == 2"}],attrs:{name:"55"}},[t._v("同意退货")]),r("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:4===n._status,expression:"row._status === 4"}],attrs:{name:"8"}},[t._v("已收货")]),1==n.is_del?r("DropdownItem",{attrs:{name:"9"}},[t._v("删除订单")]):t._e()],1)],1)]]}}])}),r("div",{staticClass:"acea-row row-right page"}),r("edit-from",{ref:"edits",attrs:{FromData:t.FromData},on:{submitFail:t.submitFail}}),r("user-details",{ref:"userDetails"}),r("details-from",{ref:"detailss",attrs:{orderDatalist:t.orderDatalist,orderId:t.orderId}}),r("order-remark",{ref:"remarks",attrs:{orderId:t.orderId},on:{submitFail:t.submitFail}}),r("order-record",{ref:"record"}),r("order-send",{ref:"send",attrs:{orderId:t.orderId,status:t.status},on:{submitFail:t.submitFail}})],1)}),[],!1,null,"1d8693ab",null);e.default=w.exports},"388a":function(t,e,r){},"3cb6":function(t,e,r){},"7bd4":function(t,e,r){"use strict";var n=r("2ede");r.n(n).a},"9cc7":function(t,e,r){"use strict";var n=r("0a1e");r.n(n).a},"9cc8":function(t,e,r){"use strict";var n=r("388a");r.n(n).a},a464:function(t,e,r){"use strict";var n={name:"table-expand",props:{row:Object}},i=(r("9cc7"),r("2877")),a=Object(i.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tdinfo"},[r("Row",{staticClass:"expand-row"},[r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("商品总价：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.total_price)}})]),r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("下单时间：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.add_time)}})]),r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("推广人：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.spread_nickname?t.row.spread_nickname:"无")}})])],1),r("Row",[r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("用户备注：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.mark?t.row.mark:"无")}})]),r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("商家备注：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.remark?t.row.remark:"无")}})])],1)],1)}),[],!1,null,"b662070e",null);e.a=a.exports},a496:function(t,e,r){},add5:function(t,e,r){var n;window,n=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}({"./src/index.js":function(t,e,r){"use strict";r.r(e),r("./src/sass/index.scss");var n=r("./src/js/init.js").default.init;"undefined"!=typeof window&&(window.printJS=n),e.default=n},"./src/js/browser.js":function(t,e,r){"use strict";r.r(e);var n={isFirefox:function(){return"undefined"!=typeof InstallTrigger},isIE:function(){return-1!==navigator.userAgent.indexOf("MSIE")||!!document.documentMode},isEdge:function(){return!n.isIE()&&!!window.StyleMedia},isChrome:function(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||-1!==navigator.userAgent.toLowerCase().indexOf("safari")},isIOSChrome:function(){return-1!==navigator.userAgent.toLowerCase().indexOf("crios")}};e.default=n},"./src/js/functions.js":function(t,e,r){"use strict";r.r(e),r.d(e,"addWrapper",(function(){return o})),r.d(e,"capitalizePrint",(function(){return s})),r.d(e,"collectStyles",(function(){return l})),r.d(e,"addHeader",(function(){return d})),r.d(e,"cleanUp",(function(){return u})),r.d(e,"isRawHTML",(function(){return f}));var n=r("./src/js/modal.js"),i=r("./src/js/browser.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return'<div style="font-family:'+e.font+" !important; font-size: "+e.font_size+' !important; width:100%;">'+t+"</div>"}function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}function l(t,e){for(var r="",n=(document.defaultView||window).getComputedStyle(t,""),i=0;i<n.length;i++)(-1!==e.targetStyles.indexOf("*")||-1!==e.targetStyle.indexOf(n[i])||c(e.targetStyles,n[i]))&&n.getPropertyValue(n[i])&&(r+=n[i]+":"+n.getPropertyValue(n[i])+";");return r+"max-width: "+e.maxWidth+"px !important; font-size: "+e.font_size+" !important;"}function c(t,e){for(var r=0;r<t.length;r++)if("object"===a(e)&&-1!==e.indexOf(t[r]))return!0;return!1}function d(t,e){var r=document.createElement("div");if(f(e.header))r.innerHTML=e.header;else{var n=document.createElement("h1"),i=document.createTextNode(e.header);n.appendChild(i),n.setAttribute("style",e.headerStyle),r.appendChild(n)}t.insertBefore(r,t.childNodes[0])}function u(t){t.showModal&&n.default.close(),t.onLoadingEnd&&t.onLoadingEnd(),(t.showModal||t.onLoadingStart)&&window.URL.revokeObjectURL(t.printable);var e="mouseover";(i.default.isChrome()||i.default.isFirefox())&&(e="focus"),window.addEventListener(e,(function r(){window.removeEventListener(e,r),t.onPrintDialogClose();var n=document.getElementById(t.frameId);n&&n.remove()}))}function f(t){return new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>").test(t)}},"./src/js/html.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/js/functions.js"),i=r("./src/js/print.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.default={print:function(t,e){var r,o="object"===a(r=t.printable)&&r&&(r instanceof HTMLElement||1===r.nodeType)?t.printable:document.getElementById(t.printable);o?(t.printableElement=function t(e,r){for(var i=e.cloneNode(),a=Array.prototype.slice.call(e.childNodes),o=0;o<a.length;o++)if(-1===r.ignoreElements.indexOf(a[o].id)){var s=t(a[o],r);i.appendChild(s)}switch(r.scanStyles&&1===e.nodeType&&i.setAttribute("style",Object(n.collectStyles)(e,r)),e.tagName){case"SELECT":i.value=e.value;break;case"CANVAS":i.getContext("2d").drawImage(e,0,0)}return i}(o,t),t.header&&Object(n.addHeader)(t.printableElement,t),i.default.send(t,e)):window.console.error("Invalid HTML element id: "+t.printable)}}},"./src/js/image.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/js/functions.js"),i=r("./src/js/print.js"),a=r("./src/js/browser.js");e.default={print:function(t,e){t.printable.constructor!==Array&&(t.printable=[t.printable]),t.printableElement=document.createElement("div"),t.printable.forEach((function(e){var r=document.createElement("img");if(r.setAttribute("style",t.imageStyle),r.src=e,a.default.isFirefox()){var n=r.src;r.src=n}var i=document.createElement("div");i.appendChild(r),t.printableElement.appendChild(i)})),t.header&&Object(n.addHeader)(t.printableElement,t),i.default.send(t,e)}}},"./src/js/init.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/js/browser.js"),i=r("./src/js/modal.js"),a=r("./src/js/pdf.js"),o=r("./src/js/html.js"),s=r("./src/js/raw-html.js"),l=r("./src/js/image.js"),c=r("./src/js/json.js");function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var u=["pdf","html","image","json","raw-html"];e.default={init:function(){var t={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(t){throw t},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},e=arguments[0];if(void 0===e)throw new Error("printJS expects at least 1 attribute.");switch(d(e)){case"string":t.printable=encodeURI(e),t.fallbackPrintable=t.printable,t.type=arguments[1]||t.type;break;case"object":for(var r in t.printable=e.printable,t.fallbackPrintable=void 0!==e.fallbackPrintable?e.fallbackPrintable:t.printable,t.fallbackPrintable=t.base64?"data:application/pdf;base64,".concat(t.fallbackPrintable):t.fallbackPrintable,t)"printable"!==r&&"fallbackPrintable"!==r&&(t[r]=void 0!==e[r]?e[r]:t[r]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+d(e))}if(!t.printable)throw new Error("Missing printable information.");if(!t.type||"string"!=typeof t.type||-1===u.indexOf(t.type.toLowerCase()))throw new Error("Invalid print type. Available types are: pdf, html, image and json.");t.showModal&&i.default.show(t),t.onLoadingStart&&t.onLoadingStart();var f=document.getElementById(t.frameId);f&&f.parentNode.removeChild(f);var p=document.createElement("iframe");switch(n.default.isFirefox()?p.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):p.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),p.setAttribute("id",t.frameId),"pdf"!==t.type&&(p.srcdoc="<html><head><title>"+t.documentTitle+"</title>",t.css&&(Array.isArray(t.css)||(t.css=[t.css]),t.css.forEach((function(t){p.srcdoc+='<link rel="stylesheet" href="'+t+'">'}))),p.srcdoc+="</head><body></body></html>"),t.type){case"pdf":if(n.default.isIE())try{window.open(t.fallbackPrintable,"_blank").focus(),t.onIncompatibleBrowser()}catch(e){t.onError(e)}finally{t.showModal&&i.default.close(),t.onLoadingEnd&&t.onLoadingEnd()}else a.default.print(t,p);break;case"image":l.default.print(t,p);break;case"html":o.default.print(t,p);break;case"raw-html":s.default.print(t,p);break;case"json":c.default.print(t,p)}}}},"./src/js/json.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/js/functions.js"),i=r("./src/js/print.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.default={print:function(t,e){if("object"!==a(t.printable))throw new Error("Invalid javascript data object (JSON).");if("boolean"!=typeof t.repeatTableHeader)throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!t.properties||!Array.isArray(t.properties))throw new Error("Invalid properties array for your JSON data.");t.properties=t.properties.map((function(e){return{field:"object"===a(e)?e.field:e,displayName:"object"===a(e)?e.displayName:e,columnSize:"object"===a(e)&&e.columnSize?e.columnSize+";":100/t.properties.length+"%;"}})),t.printableElement=document.createElement("div"),t.header&&Object(n.addHeader)(t.printableElement,t),t.printableElement.innerHTML+=function(t){var e=t.printable,r=t.properties,i='<table style="border-collapse: collapse; width: 100%;">';t.repeatTableHeader&&(i+="<thead>"),i+="<tr>";for(var a=0;a<r.length;a++)i+='<th style="width:'+r[a].columnSize+";"+t.gridHeaderStyle+'">'+Object(n.capitalizePrint)(r[a].displayName)+"</th>";i+="</tr>",t.repeatTableHeader&&(i+="</thead>"),i+="<tbody>";for(var o=0;o<e.length;o++){i+="<tr>";for(var s=0;s<r.length;s++){var l=e[o],c=r[s].field.split(".");if(c.length>1)for(var d=0;d<c.length;d++)l=l[c[d]];else l=l[r[s].field];i+='<td style="width:'+r[s].columnSize+t.gridStyle+'">'+l+"</td>"}i+="</tr>"}return i+"</tbody></table>"}(t),i.default.send(t,e)}}},"./src/js/modal.js":function(t,e,r){"use strict";r.r(e);var n={show:function(t){var e=document.createElement("div");e.setAttribute("style","font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;"),e.setAttribute("id","printJS-Modal");var r=document.createElement("div");r.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var i=document.createElement("div");i.setAttribute("class","printClose"),i.setAttribute("id","printClose"),r.appendChild(i);var a=document.createElement("span");a.setAttribute("class","printSpinner"),r.appendChild(a);var o=document.createTextNode(t.modalMessage);r.appendChild(o),e.appendChild(r),document.getElementsByTagName("body")[0].appendChild(e),document.getElementById("printClose").addEventListener("click",(function(){n.close()}))},close:function(){var t=document.getElementById("printJS-Modal");t&&t.parentNode.removeChild(t)}};e.default=n},"./src/js/pdf.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/js/print.js"),i=r("./src/js/functions.js");function a(t,e,r){var i=new window.Blob([r],{type:"application/pdf"});i=window.URL.createObjectURL(i),e.setAttribute("src",i),n.default.send(t,e)}e.default={print:function(t,e){if(t.base64){var r=Uint8Array.from(atob(t.printable),(function(t){return t.charCodeAt(0)}));a(t,e,r)}else{t.printable=/^(blob|http|\/\/)/i.test(t.printable)?t.printable:window.location.origin+("/"!==t.printable.charAt(0)?"/"+t.printable:t.printable);var n=new window.XMLHttpRequest;n.responseType="arraybuffer",n.addEventListener("error",(function(){Object(i.cleanUp)(t),t.onError(n.statusText,n)})),n.addEventListener("load",(function(){if(-1===[200,201].indexOf(n.status))return Object(i.cleanUp)(t),void t.onError(n.statusText,n);a(t,e,n.response)})),n.open("GET",t.printable,!0),n.send()}}}},"./src/js/print.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/js/browser.js"),i=r("./src/js/functions.js"),a={send:function(t,e){document.getElementsByTagName("body")[0].appendChild(e);var r=document.getElementById(t.frameId);r.onload=function(){if("pdf"!==t.type){var e=r.contentWindow||r.contentDocument;if(e.document&&(e=e.document),e.body.appendChild(t.printableElement),"pdf"!==t.type&&t.style){var i=document.createElement("style");i.innerHTML=t.style,e.head.appendChild(i)}var a=e.getElementsByTagName("img");a.length>0?function(t){var e=t.map((function(t){if(t.src&&t.src!==window.location.href)return function(t){return new Promise((function(e){!function r(){t&&void 0!==t.naturalWidth&&0!==t.naturalWidth&&t.complete?e():setTimeout(r,500)}()}))}(t)}));return Promise.all(e)}(Array.from(a)).then((function(){return o(r,t)})):o(r,t)}else n.default.isFirefox()?setTimeout((function(){return o(r,t)}),1e3):o(r,t)}}};function o(t,e){try{if(t.focus(),n.default.isEdge()||n.default.isIE())try{t.contentWindow.document.execCommand("print",!1,null)}catch(e){t.contentWindow.print()}else t.contentWindow.print()}catch(t){e.onError(t)}finally{n.default.isFirefox()&&(t.style.visibility="hidden",t.style.left="-1px"),Object(i.cleanUp)(e)}}e.default=a},"./src/js/raw-html.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/js/print.js");e.default={print:function(t,e){t.printableElement=document.createElement("div"),t.printableElement.setAttribute("style","width:100%"),t.printableElement.innerHTML=t.printable,n.default.send(t,e)}}},"./src/sass/index.scss":function(t,e,r){},0:function(t,e,r){t.exports=r("./src/index.js")}}).default},t.exports=n()},bddf:function(t,e,r){"use strict";var n=r("3cb6");r.n(n).a},d5d4:function(t,e,r){"use strict";var n=r("a496");r.n(n).a},d616:function(t,e,r){"use strict";var n=r("2f62"),i=r("add5"),a=r.n(i),o=r("f8b7");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(){l=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,o=Object.create(a.prototype),s=new $(n||[]);return i(o,"_invoke",{value:E(t,r,s)}),o}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var m="suspendedStart",v="suspendedYield",h="executing",_="completed",y={};function g(){}function b(){}function w(){}var I={};u(I,o,(function(){return this}));var x=Object.getPrototypeOf,C=x&&x(x(T([])));C&&C!==r&&n.call(C,o)&&(I=C);var D=w.prototype=g.prototype=Object.create(I);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(i,a,o,l){var c=p(t[i],t,a);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==s(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,o,l)}),(function(t){r("throw",t,o,l)})):e.resolve(u).then((function(t){d.value=t,o(d)}),(function(t){return r("throw",t,o,l)}))}l(c.arg)}var a;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return a=a?a.then(i,i):i()}})}function E(e,r,n){var i=m;return function(a,o){if(i===h)throw Error("Generator is already running");if(i===_){if("throw"===a)throw o;return{value:t,done:!0}}for(n.method=a,n.arg=o;;){var s=n.delegate;if(s){var l=S(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===m)throw i=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var c=p(e,r,n);if("normal"===c.type){if(i=n.done?_:v,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=_,n.method="throw",n.arg=c.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=p(i,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(s(e)+" is not iterable")}return b.prototype=w,i(D,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=u(w,d,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,d,"GeneratorFunction")),t.prototype=Object.create(D),t},e.awrap=function(t){return{__await:t}},k(j.prototype),u(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new j(f(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(D),u(D,d,"Generator"),u(D,o,(function(){return this})),u(D,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function c(t,e,r,n,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}function d(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(t){c(a,n,i,o,s,"next",t)}function s(t){c(a,n,i,o,s,"throw",t)}o(void 0)}))}}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p={name:"orderSend",props:{orderId:Number,status:Number,pay_type:String},data:function(){var t=this;return{productType:0,orderStatus:0,splitSwitch:!1,formItem:{type:"1",express_record_type:"1",delivery_name:"",delivery_id:"",express_temp_id:"",to_name:"",to_tel:"",to_addr:"",sh_delivery:"",fictitious_content:"",station_type:1,delivery_type:"1",cargo_weight:0,remark:"",mark:"",server_type:"",day_type:0,pickup_time:["",""]},modals:!1,express:[],expressTemp:[],deliveryList:[],temp:{pic:""},export_open:!0,manyFormValidate:[],stopSubmit:!1,header:[{type:"selection",width:60,align:"center"},{title:"商品信息",slot:"image",width:200,align:"center"},{title:"规格",slot:"value",align:"center",minWidth:120},{title:"商品售价",slot:"sellPrice",align:"center",minWidth:100},{title:"商品优惠价",slot:"price",align:"center",minWidth:100},{title:"总数",key:"cart_num",align:"center",minWidth:80},{title:"待发数量",key:"surplus_num",align:"center",width:180,render:function(e,r){return e("div",[e("InputNumber",{props:{min:1,max:r.row.numShow,value:r.row.surplus_num||1},on:{"on-change":function(e){r.row.surplus_num=e||1,t.manyFormValidate[r.index]=r.row,t.selectData.forEach((function(e,n){e.cart_id===r.row.cart_id&&t.selectData.splice(n,1,r.row)}))}}})])}}],selectData:[],sheetInfo:{},serviceTypeList:[],kuaidiExpress:[],sendPrice:0}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(n.e)("admin/order",["splitOrder"])),methods:{printImg:function(t){a()({printable:t,type:"image",documentTitle:"快递信息",style:"img{\n          width: 100%;\n          height: 476px;\n        }"})},changeDelivery:function(t){},selectOne:function(t){this.selectData=t},changeModal:function(t){t||this.cancel()},changeSplitStatus:function(t){var e=this;t&&Object(o.Z)(this.orderId).then((function(t){var r=t.data;r.forEach((function(t){t.numShow=t.surplus_num})),e.manyFormValidate=r}))},changeRadio:function(t){switch(this.$refs.formItem.resetFields(),t){case"1":this.formItem.delivery_name="",this.formItem.delivery_id="",this.formItem.express_temp_id="",this.formItem.express_record_type="1",this.expressTemp=[];break;case"2":this.formItem.sh_delivery="",this.sheetInfo.self_delivery_status?this.formItem.delivery_type="1":this.formItem.delivery_type="2",this.sheetInfo.dada_delivery_status?this.formItem.station_type=1:this.formItem.station_type=2;break;case"3":this.formItem.fictitious_content=""}},changeExpress:function(t){switch(t){case"2":this.formItem.delivery_name="",this.formItem.express_temp_id="",this.expressTemp=[],this.getList(2);break;case"1":this.formItem.delivery_name="",this.formItem.delivery_id="",this.getList(1)}},reset:function(){this.formItem={type:"1",express_record_type:"1",delivery_name:"",delivery_id:"",express_temp_id:"",to_name:"",to_tel:"",to_addr:"",sh_delivery:"",fictitious_content:"",station_type:1,delivery_type:"1",cargo_weight:0,remark:"",mark:"",server_type:"",day_type:0,pickup_time:["",""]},this.sendPrice=0},getList:function(t){var e=this,r=2===t?1:"";Object(o.k)(r).then(function(){var t=d(l().mark((function t(r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.express=r.data,e.getSheetInfo();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},putSend:function(t){var e=this,r={id:this.orderId,datas:this.formItem};if("1"===this.formItem.type&&"2"===this.formItem.express_record_type){if(""===this.formItem.delivery_name)return this.$Message.error("快递公司不能为空");if(""===this.formItem.express_temp_id)return this.$Message.error("电子面单不能为空");if(""===this.formItem.to_name)return this.$Message.error("寄件人姓名不能为空");if(""===this.formItem.to_tel)return this.$Message.error("寄件人电话不能为空");if(!/^1(3|4|5|7|8|9|6)\d{9}$/i.test(this.formItem.to_tel))return this.$Message.error("请输入正确的手机号码");if(""===this.formItem.to_addr)return this.$Message.error("寄件人地址不能为空")}if("1"===this.formItem.type&&"1"===this.formItem.express_record_type){if(""===this.formItem.delivery_name)return this.$Message.error("快递公司不能为空");if(""===this.formItem.delivery_id)return this.$Message.error("快递单号不能为空")}if("2"===this.formItem.type){if("1"===this.formItem.delivery_type&&""===this.formItem.sh_delivery)return this.$Message.error("送货人不能为空");if("2"===this.formItem.delivery_type&&this.formItem.cargo_weight<=0)return this.$Message.error("请输入有效的重量")}this.splitSwitch?(r.datas.cart_ids=[],this.selectData.forEach((function(t){r.datas.cart_ids.push({cart_id:t.cart_id,cart_num:t.surplus_num})})),Object(o.ab)(r).then((function(t){e.modals=!1,e.$Message.success(t.msg),e.$emit("submitFail"),e.reset(),e.splitSwitch=!1,t.data.dump.label&&e.printImg(t.data.dump.label)})).catch((function(t){e.$Message.error(t.msg)}))):Object(o.M)(r).then(function(){var t=d(l().mark((function t(r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.modals=!1,e.$Message.success(r.msg),e.splitSwitch=!1,e.$emit("submitFail"),e.reset(),r.data.dump.label&&e.printImg(r.data.dump.label);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},cancel:function(t){this.modals=!1,this.orderStatus=0,this.splitSwitch=!1,this.selectData=[],this.reset()},expressChange:function(t){var e=this;this.formItem.service_type="";var r=("3"==this.formItem.express_record_type?this.kuaidiExpress:this.express).find((function(e){return e.value===t}));void 0!==r&&(this.serviceTypeList=r.types,1==this.formItem.type&&3==this.formItem.express_record_type&&(this.formItem.service_type=r.types.length?r.types[0]:""),this.formItem.delivery_code=r.code,this.formItem.to_name&&this.formItem.to_addr&&3==this.formItem.express_record_type&&this.watchPrice(),"2"===this.formItem.express_record_type?(this.expressTemp=[],this.formItem.express_temp_id="",Object(o.z)({com:this.formItem.delivery_code}).then((function(t){e.expressTemp=t.data,e.formItem.express_temp_id=t.data.length?t.data[0].temp_id:"",e.temp=e.expressTemp[0],t.data.length||e.$Message.error("请配置你所选快递公司的电子面单")})).catch((function(t){e.$Message.error(t.msg)}))):"3"==this.formItem.express_record_type&&(this.expressTemp=r.list,r.list.length&&(this.formItem.express_temp_id=r.list[0].temp_id,this.temp=r.list[0])))},watchPrice:function(){var t=this;if(3==this.formItem.express_record_type){var e={kuaidicom:this.formItem.delivery_code,send_address:this.formItem.to_addr,orderId:this.orderId,service_type:this.formItem.service_type,cart_ids:[]};this.selectData.forEach((function(t){e.cart_ids.push({cart_id:t.cart_id,cart_num:t.num||t.surplus_num})})),Object(o.G)(e).then((function(e){t.sendPrice=e.data.price,t.deliveryErrorMsg=""})).catch((function(e){t.$Message.error(e.msg),1==t.formItem.type&&(t.deliveryErrorMsg=e.msg)}))}},getCartInfo:function(){var t=this;Object(o.Z)(this.orderId).then((function(e){var r=e.data;r.forEach((function(t){t.numShow=t.surplus_num})),t.manyFormValidate=r,t.productType=r[0].product_type,3==t.productType&&(t.formItem.type="3",t.formItem.fictitious_content="")}))},getDeliveryList:function(){var t=this;Object(o.x)().then((function(e){t.deliveryList=e.data.list})).catch((function(e){t.$Message.error(e.msg)}))},getSheetInfo:function(){var t=this;Object(o.J)().then((function(e){var r=e.data;for(var n in r)r.hasOwnProperty(n)&&(t.formItem[n]=r[n]);t.export_open=void 0===r.export_open||r.export_open,t.export_open||(t.formItem.express_record_type="1"),t.formItem.to_addr=r.to_add,t.sheetInfo=r})).catch((function(e){t.$Message.error(e.msg)}))},shDeliveryChange:function(t){if(t){var e=this.deliveryList.find((function(e){return e.id===t}));this.formItem.sh_delivery_name=e.wx_name,this.formItem.sh_delivery_id=e.phone,this.formItem.sh_delivery_uid=e.uid}},expressTempChange:function(t){this.temp=this.expressTemp.find((function(e){return t===e.temp_id})),void 0===this.temp&&(this.temp={})},preview:function(){if(!this.temp.pic)return this.$Message.warning("请先选择物流公司或者电子面单");this.$refs.viewer.$viewer.show()},getBusineseList:function(){var t=this;Object(o.u)().then((function(e){t.kuaidiExpress=e.data,t.formItem.delivery_name&&t.expressChange(t.formItem.delivery_name)}))}}},m=(r("d5d4"),r("2877")),v=Object(m.a)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"订单发送货",closable:!1,width:"1000"},on:{"on-visible-change":t.changeModal},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[t.modals?r("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":120},nativeOn:{submit:function(t){t.preventDefault()}}},[r("FormItem",{attrs:{label:"选择类型："}},[r("RadioGroup",{on:{"on-change":t.changeRadio},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},[t.productType?t._e():r("Radio",{attrs:{label:"1"}},[t._v("发货")]),!t.productType&&t.sheetInfo.city_delivery_status?r("Radio",{attrs:{label:"2"}},[t._v("送货")]):t._e(),r("Radio",{attrs:{label:"3"}},[t._v("无需配送")])],1)],1),1==t.formItem.type?r("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.export_open,expression:"export_open"}],attrs:{label:"发货类型："}},[r("RadioGroup",{on:{"on-change":t.changeExpress},model:{value:t.formItem.express_record_type,callback:function(e){t.$set(t.formItem,"express_record_type",e)},expression:"formItem.express_record_type"}},[r("Radio",{attrs:{label:"3"}},[t._v("商家寄件")]),r("Radio",{attrs:{label:"1"}},[t._v("手动填写")]),r("Radio",{attrs:{label:"2"}},[t._v("电子面单打印")])],1)],1):t._e(),["2","3"].includes(t.formItem.express_record_type)&&1==t.formItem.type?[r("FormItem",{attrs:{label:"寄件人姓名："}},[r("Input",{staticClass:"input-add",attrs:{placeholder:"请输入寄件人姓名"},model:{value:t.formItem.to_name,callback:function(e){t.$set(t.formItem,"to_name",e)},expression:"formItem.to_name"}})],1),r("FormItem",{attrs:{label:"寄件人电话："}},[r("Input",{staticClass:"input-add",attrs:{placeholder:"请输入寄件人电话"},model:{value:t.formItem.to_tel,callback:function(e){t.$set(t.formItem,"to_tel",e)},expression:"formItem.to_tel"}})],1),r("FormItem",{attrs:{label:"寄件人地址："}},[r("Input",{staticClass:"input-add",attrs:{placeholder:"请输入寄件人地址"},model:{value:t.formItem.to_addr,callback:function(e){t.$set(t.formItem,"to_addr",e)},expression:"formItem.to_addr"}})],1)]:t._e(),r("div",[1==t.formItem.type?r("FormItem",{attrs:{label:"快递公司：",required:""}},[r("Select",{staticClass:"input-add",attrs:{filterable:"",placeholder:"请选择快递公司"},on:{"on-change":t.expressChange},model:{value:t.formItem.delivery_name,callback:function(e){t.$set(t.formItem,"delivery_name",e)},expression:"formItem.delivery_name"}},t._l(3==t.formItem.express_record_type?t.kuaidiExpress:t.express,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.value)+"\n          ")])})),1)],1):t._e(),1==t.formItem.type&&3==t.formItem.express_record_type?r("FormItem",{attrs:{label:"快递业务类型：",required:""}},[r("Select",{staticClass:"input-add",attrs:{filterable:"",placeholder:"请选择业务类型"},on:{"on-change":t.watchPrice},model:{value:t.formItem.service_type,callback:function(e){t.$set(t.formItem,"service_type",e)},expression:"formItem.service_type"}},t._l(t.serviceTypeList,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e)+"\n          ")])})),1)],1):t._e(),"1"===t.formItem.express_record_type&&1==t.formItem.type?r("FormItem",{attrs:{label:"快递单号：",required:""}},[r("Input",{staticClass:"input-add",attrs:{placeholder:"请输入快递单号"},model:{value:t.formItem.delivery_id,callback:function(e){t.$set(t.formItem,"delivery_id",e)},expression:"formItem.delivery_id"}}),"顺丰速运"==t.formItem.delivery_name?r("div",{staticClass:"trips"},[r("p",[t._v("顺丰请输入单号 :收件人或寄件人手机号后四位，")]),r("p",[t._v("例如：SF000000000000:3941")])]):t._e()],1):t._e(),["2","3"].includes(t.formItem.express_record_type)&&"1"===t.formItem.type?[r("FormItem",{staticClass:"express_temp_id",attrs:{label:"电子面单："}},[r("Select",{staticClass:"input-add",attrs:{placeholder:"请选择电子面单"},on:{"on-change":t.expressTempChange},model:{value:t.formItem.express_temp_id,callback:function(e){t.$set(t.formItem,"express_temp_id",e)},expression:"formItem.express_temp_id"}},t._l(t.expressTemp,(function(e,n){return r("Option",{key:n,attrs:{value:e.temp_id}},[t._v(t._s(e.title)+"\n            ")])})),1),t.formItem.express_temp_id?r("Button",{attrs:{type:"text"},on:{click:t.preview}},[t._v("预览\n          ")]):t._e()],1),3==t.formItem.express_record_type?[r("FormItem",{attrs:{label:"预计寄件金额："}},[r("span",{staticClass:"red"},[t._v(t._s(t.sendPrice))]),r("Button",{attrs:{type:"text",size:"small"},on:{click:t.watchPrice}},[t._v("立即计算")])],1),r("FormItem",{attrs:{label:"取件日期："}},[r("RadioGroup",{model:{value:t.formItem.day_type,callback:function(e){t.$set(t.formItem,"day_type",e)},expression:"formItem.day_type"}},[r("Radio",{attrs:{label:0}},[t._v("今天")]),r("Radio",{attrs:{label:1}},[t._v("明天")]),r("Radio",{attrs:{label:2}},[t._v("后天")])],1)],1),r("FormItem",{attrs:{label:"取件时间："}},[r("TimePicker",{attrs:{type:"timerange",format:"HH:mm",placement:"bottom-end",placeholder:"请选择取件时间"},model:{value:t.formItem.pickup_time,callback:function(e){t.$set(t.formItem,"pickup_time",e)},expression:"formItem.pickup_time"}})],1)]:t._e()]:t._e()],2),r("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.formItem.type,expression:"formItem.type === '2'"}]},[r("FormItem",{attrs:{label:"配送类型："}},[r("RadioGroup",{on:{"on-change":t.changeDelivery},model:{value:t.formItem.delivery_type,callback:function(e){t.$set(t.formItem,"delivery_type",e)},expression:"formItem.delivery_type"}},[t.sheetInfo.self_delivery_status?r("Radio",{attrs:{label:"1"}},[t._v("商家配送")]):t._e(),t.sheetInfo.dada_delivery_status||t.sheetInfo.uu_delivery_status?r("Radio",{attrs:{label:"2"}},[t._v("第三方配送")]):t._e()],1)],1),"1"===t.formItem.delivery_type?r("FormItem",{attrs:{label:"送货人：",required:""}},[r("Select",{staticClass:"input-add",attrs:{placeholder:"请选择送货人"},on:{"on-change":t.shDeliveryChange},model:{value:t.formItem.sh_delivery,callback:function(e){t.$set(t.formItem,"sh_delivery",e)},expression:"formItem.sh_delivery"}},t._l(t.deliveryList,(function(e,n){return r("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.wx_name)+"（"+t._s(e.phone)+"）\n          ")])})),1)],1):t._e(),"2"===t.formItem.delivery_type?r("div",[r("FormItem",{attrs:{label:"配送平台："}},[r("RadioGroup",{model:{value:t.formItem.station_type,callback:function(e){t.$set(t.formItem,"station_type",e)},expression:"formItem.station_type"}},[t.sheetInfo.dada_delivery_status?r("Radio",{attrs:{label:1}},[t._v("达达")]):t._e(),t.sheetInfo.uu_delivery_status?r("Radio",{attrs:{label:2}},[t._v("uu跑腿")]):t._e()],1)],1),r("FormItem",{attrs:{label:"包裹重量：",required:""}},[r("InputNumber",{staticClass:"input-add",attrs:{min:0},model:{value:t.formItem.cargo_weight,callback:function(e){t.$set(t.formItem,"cargo_weight",e)},expression:"formItem.cargo_weight"}}),r("span",{staticStyle:{"margin-left":"10px"}},[t._v("kg")])],1),r("FormItem",{attrs:{label:"配送备注："}},[r("Input",{staticClass:"input-add",attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"配送备注"},model:{value:t.formItem.remark,callback:function(e){t.$set(t.formItem,"remark",e)},expression:"formItem.remark"}})],1),r("FormItem",{attrs:{label:"备注："}},[r("Input",{staticClass:"input-add",attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"备注"},model:{value:t.formItem.mark,callback:function(e){t.$set(t.formItem,"mark",e)},expression:"formItem.mark"}})],1)],1):t._e()],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"3"===t.formItem.type,expression:"formItem.type === '3'"}]},[r("FormItem",{attrs:{label:"备注："}},[r("Input",{staticClass:"input-add",attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"备注"},model:{value:t.formItem.fictitious_content,callback:function(e){t.$set(t.formItem,"fictitious_content",e)},expression:"formItem.fictitious_content"}})],1)],1),t.splitOrder>1&&"3"!==t.formItem.type?r("div",[r("FormItem",{attrs:{label:"分单发货："}},[r("i-switch",{attrs:{size:"large",disabled:8===t.orderStatus},on:{"on-change":t.changeSplitStatus},model:{value:t.splitSwitch,callback:function(e){t.splitSwitch=e},expression:"splitSwitch"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),r("div",{staticClass:"trips"},[r("p",[t._v("\n            可选择表格中的商品单独发货，发货后会生成新的订单且不能撤回，请谨慎操作！\n          ")])]),t.splitSwitch&&t.manyFormValidate.length?r("Table",{attrs:{data:t.manyFormValidate,columns:t.header,border:""},on:{"on-selection-change":t.selectOne},scopedSlots:t._u([{key:"image",fn:function(e){var n=e.row;return e.index,[r("div",{staticClass:"product-data"},[r("img",{staticClass:"image",attrs:{src:n.cart_info.productInfo.image}}),r("div",{staticClass:"line2"},[t._v("\n                "+t._s(n.cart_info.productInfo.store_name)+"\n              ")])])]}},{key:"value",fn:function(e){var n=e.row;return e.index,[r("div",[t._v(t._s(n.cart_info.productInfo.attrInfo.suk))])]}},{key:"sellPrice",fn:function(e){var n=e.row;return e.index,[r("div",[t._v("\n              "+t._s(n.cart_info.productInfo.attrInfo?n.cart_info.productInfo.attrInfo.price:n.cart_info.productInfo.price)+"\n            ")])]}},{key:"price",fn:function(e){var n=e.row;return e.index,[r("div",[r("div",[t._v(t._s(n.cart_info.truePrice))])])]}}],null,!1,1129913299)}):t._e()],1)],1):t._e()],2):t._e(),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:t.cancel}},[t._v("取消")]),t.stopSubmit?r("Button",{attrs:{type:"warning"}},[t._v("存在售后待处理订单")]):r("Button",{attrs:{type:"primary"},on:{click:t.putSend}},[t._v("提交")])],1),r("div",{directives:[{name:"viewer",rawName:"v-viewer"},{name:"show",rawName:"v-show",value:t.temp,expression:"temp"}],ref:"viewer"},[r("img",{staticClass:"display-add",attrs:{src:t.temp.pic}})])],1)}),[],!1,null,"c713abaa",null);e.a=v.exports},d84c:function(t,e,r){"use strict";var n=r("f361");r.n(n).a},f361:function(t,e,r){},fc48:function(t,e,r){"use strict";var n=r("f8b7");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",d=s.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new $(n||[]);return o(a,"_invoke",{value:E(t,r,s)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var m="suspendedStart",v="suspendedYield",h="executing",_="completed",y={};function g(){}function b(){}function w(){}var I={};u(I,l,(function(){return this}));var x=Object.getPrototypeOf,C=x&&x(x(T([])));C&&C!==r&&n.call(C,l)&&(I=C);var D=w.prototype=g.prototype=Object.create(I);function k(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(a,o,s,l){var c=p(t[a],t,o);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==i(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,s,l)}),(function(t){r("throw",t,s,l)})):e.resolve(u).then((function(t){d.value=t,s(d)}),(function(t){return r("throw",t,s,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return a=a?a.then(i,i):i()}})}function E(e,r,n){var i=m;return function(a,o){if(i===h)throw Error("Generator is already running");if(i===_){if("throw"===a)throw o;return{value:t,done:!0}}for(n.method=a,n.arg=o;;){var s=n.delegate;if(s){var l=S(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===m)throw i=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var c=p(e,r,n);if("normal"===c.type){if(i=n.done?_:v,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=_,n.method="throw",n.arg=c.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=p(i,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[l];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(i(e)+" is not iterable")}return b.prototype=w,o(D,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=u(w,d,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,d,"GeneratorFunction")),t.prototype=Object.create(D),t},e.awrap=function(t){return{__await:t}},k(j.prototype),u(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new j(f(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(D),u(D,d,"Generator"),u(D,l,(function(){return this})),u(D,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;L(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function o(t,e,r,n,i,a,o){try{var s=t[a](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,i)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function s(t){o(a,n,i,s,l,"next",t)}function l(t){o(a,n,i,s,l,"throw",t)}s(void 0)}))}}var l={components:{template:r("6112").default},name:"orderDetails",filters:{invoiceType:function(t){return 1==t?"电子普通发票":"纸质专用发票"},invoiceHeaderType:function(t){return 1==t?"个人":"企业"}},data:function(){return{isShow:0,modal2:!1,modals:!1,grid:{xl:8,lg:8,md:12,sm:24,xs:24},result:[],columns1:[{title:"商品信息",slot:"product",minWidth:400},{title:"售价",key:"sum_price"},{title:"实付金额",key:"truePrice"},{title:"商品编码",slot:"code"},{title:"数量",key:"cart_num"},{title:"小计",render:function(t,e){return t("div",(e.row.truePrice*e.row.cart_num).toFixed(2))}}],columns2:[{title:"订单ID",key:"oid",minWidth:40},{title:"操作记录",key:"change_message",minWidth:280},{title:"操作时间",key:"change_time",minWidth:100}],columnSplit:[{title:"订单号",slot:"order_id",minWidth:100},{title:"商品信息",slot:"product",minWidth:250},{title:"发货信息",slot:"deliveryInfo",minWidth:100},{title:"操作",slot:"action",minWidth:90}],columns3:[{title:"商品ID",key:"product_id",minWidth:40},{title:"图片",slot:"product",minWidth:60},{title:"商品名称",key:"store_name",minWidth:100},{title:"核销数",key:"writeoff_num",minWidth:40},{title:"核销时间",key:"add_time",minWidth:280},{title:"核销人员",key:"writeoff_name",minWidth:100}],recordData:[],activeName:"detail",orderData:{},splitList:[],logisticsChecked:{delivery_name:"",delivery_id:""},offRecordList:[],showWhiteOff:!1}},props:{orderDatalist:Object,orderId:Number,rowActive:Object,formType:{type:Number,default:0},openErp:{type:Boolean,default:!1}},watch:{orderDatalist:function(t){this.orderData=t.orderInfo,this.getList(this.formType?t.orderInfo.id:t.orderInfo.store_order_id),this.formType&&this.getSplitOrder(t.orderInfo.id),2==t.orderInfo.shipping_type&&2==t.orderInfo.status&&(this.showWhiteOff=!0,this.getWriteoffRecord())},orderData:function(t){var e=this;t&&t.custom_form&&t.custom_form.length&&t.custom_form.forEach((function(t){if(t.value)return e.isShow=1}))}},mounted:function(){var t=this;this.orderData&&this.orderData.custom_form&&this.orderData.custom_form.length&&this.orderData.custom_form.forEach((function(e){if(e.value)return t.isShow=1}))},methods:{getWriteoffRecord:function(){var t=this;Object(n.hb)(this.orderId).then((function(e){t.offRecordList=e.data})).catch((function(e){t.$Message.error(e.msg)}))},openItemLogistics:function(t){var e=this;this.logisticsChecked.delivery_name=t.delivery_name,this.logisticsChecked.delivery_id=t.delivery_id,this.modal2=!0,Object(n.j)(t.id).then(function(){var t=s(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.result=r.data.result;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},openLogistics:function(){this.logisticsChecked.delivery_name=this.orderDatalist.orderInfo.delivery_name,this.logisticsChecked.delivery_id=this.orderDatalist.orderInfo.delivery_id,this.modal2=!0,this.getOrderData()},btnClick:function(t){var e=this,r={supplier_id:t.supplier_id,id:t.id};Object(n.Y)(r).then(function(){var t=s(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$Message.success(r.msg);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},getOrderData:function(){var t=this;Object(n.j)(this.formType?this.orderDatalist.orderInfo.id:this.orderDatalist.orderInfo.store_order_id).then(function(){var e=s(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.result=r.data.result;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},getSplitOrder:function(t){var e=this;t&&Object(n.bb)(t,{status:2}).then((function(t){e.splitList=t.data})).catch((function(t){e.$Message.error(t.msg)}))},getList:function(t){var e=this,r={id:t,datas:this.page};this.loading=!0,Object(n.n)(r).then(function(){var t=s(a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.recordData=r.data,e.loading=!1;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},changeMenu:function(t,e,r,n){if(n)this.$parent.changeMenu(e,r,n);else if(5==t){var i=this.splitList.length?this.splitList[0]:this.rowActive;this.$parent.changeMenu(i,t)}else this.$parent.changeMenu(this.rowActive,t)},distribution:function(t,e){e?this.$parent.distribution(t):this.$parent.distribution(this.rowActive)},edit:function(t,e){e?this.$parent.edit(t):this.$parent.edit(this.rowActive)},sendOrder:function(t,e){e?this.$parent.sendOrder(t,e):this.$parent.sendOrder(this.rowActive)},delivery:function(t,e){e?this.$parent.delivery(t,e):this.$parent.delivery(this.rowActive)},bindWrite:function(t,e){e?this.$parent.bindWrite(t):this.$parent.bindWrite(this.rowActive)}},computed:{}},c=(r("d84c"),r("9cc8"),r("2877")),d=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Drawer",{attrs:{closable:!1,width:"1000","class-name":"order_box",styles:{padding:0}},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[t.orderDatalist?n("div",[n("div",{staticClass:"head"},[n("div",{staticClass:"full"},[n("Icon",{class:{"sale-after":-1===t.orderDatalist.orderInfo._status._type},attrs:{custom:"iconfont icondingdan",size:"60"}}),n("div",{staticClass:"text"},[n("div",{staticClass:"title"},[t._v(t._s(t.orderData.pink_name||"售后订单"))]),n("div",[t._v("订单编号："+t._s(t.orderDatalist.orderInfo.order_id))])]),null==t.rowActive.delete_time?n("div",[1===t.orderData._status_new&&0===t.orderData.paid&&"offline"===t.orderData.pay_type?n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("1")}}},[t._v("确认收款\n            ")]):t._e(),1==t.orderData._status_new?n("Button",{on:{click:t.edit}},[t._v("订单改价")]):t._e(),2!==t.orderData._status_new&&8!==t.orderData._status_new&&4!==t.orderData.status||1!==t.orderData.shipping_type||null!==t.orderData.pinkStatus&&2!==t.orderData.pinkStatus||t.orderData.refund.length?t._e():n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:t.sendOrder}},[t._v("发送货\n            ")]),4!==t.orderData._status_new||t.rowActive.split.length?t._e():n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:t.delivery}},[t._v("\n              配送信息\n            ")]),2!=t.orderData.shipping_type||0!=t.orderData.status&&5!=t.orderData.status||1!=t.orderData.paid||0!==t.orderData.refund_status?t._e():n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:t.bindWrite}},[t._v("立即核销\n            ")]),t.orderData._status_new>=2?n("Button",{on:{click:function(e){return t.changeMenu("10")}}},[t._v("小票打印")]):t._e(),t.orderData._status_new>=3&&t.orderData.express_dump?n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("11")}}},[t._v("电子面单打印\n            ")]):t._e(),t.orderData.kuaidi_label?n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("13")}}},[t._v("快递面单打印\n            ")]):t._e(),1!=t.orderData.apply_type&&5!=t.orderData.refund_type&&(4!=t.orderData.refund_type||3!=t.orderData.apply_type)||[3,6].includes(t.orderData.refund_type)||!(parseFloat(t.orderData.pay_price)>parseFloat(t.orderData.refunded_price)||0==t.orderData.pay_price)||t.formType?t._e():n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("5")}}},[t._v("立即退款\n            ")]),[2,3].includes(t.orderData.apply_type)&&[0,1,2].includes(t.orderData.refund_type)&&!t.formType?n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("55")}}},[t._v("同意退货\n            ")]):t._e(),[0,1,2,5].includes(t.orderData.refund_type)&&!t.formType?n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("7")}}},[t._v("不退款\n            ")]):t._e(),t.formType?t._e():n("Button",{on:{click:function(e){return t.changeMenu("4")}}},[t._v("售后备注")]),1==t.orderData.is_del?n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("9")}}},[t._v("删除订单\n            ")]):t._e(),1!==t.orderData._status_new&&t.formType?n("Dropdown",{on:{"on-click":t.changeMenu}},[n("Button",{attrs:{icon:"ios-more"}}),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[1!==t.orderData._status_new||3===t.orderData._status_new&&t.orderData.use_integral>0&&t.orderData.use_integral>=t.orderData.back_integral?n("DropdownItem",{attrs:{name:"4"}},[t._v("订单备注\n                ")]):t._e(),[0,1,4,5].includes(t.orderData.refund_type)&&1==t.orderData.paid&&2!==t.orderData.refund_status&&parseFloat(t.orderData.pay_price)>0?n("DropdownItem",{attrs:{disabled:t.openErp,name:"5"}},[t._v("立即退款\n                ")]):t._e(),4===t.orderData._status_new?n("DropdownItem",{attrs:{disabled:t.openErp,name:"8"}},[t._v("已收货")]):t._e(),t.orderData.paid?n("DropdownItem",{attrs:{name:"12"}},[t._v("打印配货单")]):t._e()],1)],1):t._e()],1):t._e()],1),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"title"},[t._v("订单状态")]),t.formType?n("div",{staticClass:"value1"},[n("span",{domProps:{innerHTML:t._s(t.orderData.status_name.status_name)}}),!t.orderData.is_all_refund&&t.orderData.refund.length?n("span",[t._v(",部分退款中")]):t._e(),t.orderData.is_all_refund&&t.orderData.refund.length&&6!=t.orderData.refund_type?n("span",[t._v(",退款中")]):t._e()]):n("div",[1==t.orderData.refund_type?n("div",{staticClass:"value1"},[t._v("\n                仅退款\n              ")]):2==t.orderData.refund_type?n("div",{staticClass:"value1"},[t._v("\n                退货退款\n              ")]):3==t.orderData.refund_type?n("div",{staticClass:"value1"},[t._v("\n                拒绝退款\n              ")]):4==t.orderData.refund_type?n("div",{staticClass:"value1"},[t._v("\n                商品待退货\n              ")]):5==t.orderData.refund_type?n("div",{staticClass:"value1"},[t._v("\n                退货待收货\n              ")]):6==t.orderData.refund_type?n("div",{staticClass:"value2"},[t._v("\n                已退款\n              ")]):t._e()])]),t.orderData.orderStatus?n("li",{staticClass:"item"},[n("div",{staticClass:"title"},[t._v("主订单状态")]),n("div",[n("div",[t._v("\n                "+t._s(t.orderData.orderStatus._title)+"\n              ")])])]):t._e(),n("li",{staticClass:"item"},[n("div",{staticClass:"title"},[t._v("实际支付")]),n("div",[t._v("\n              ¥"+t._s(t.orderDatalist.orderInfo.paid>0?t.orderDatalist.orderInfo.pay_price:0)+"\n            ")])]),t.formType?n("li",{staticClass:"item"},[n("div",{staticClass:"title"},[t._v("支付方式")]),n("div",[t._v(t._s(t.orderDatalist.orderInfo._status._payType||"-"))])]):n("li",{staticClass:"item"},[n("div",{staticClass:"title"},[t._v("退款件数")]),n("div",[t._v(t._s(t.orderDatalist.orderInfo.total_num||0))])]),t.formType?n("li",{staticClass:"item"},[n("div",{staticClass:"title"},[t._v("支付时间")]),n("div",[t._v(t._s(t.orderDatalist.orderInfo._pay_time||"-"))])]):n("li",{staticClass:"item"},[n("div",{staticClass:"title"},[t._v("退款时间")]),n("div",[t._v(t._s(t.orderDatalist.orderInfo._refund_time||"-"))])])])]),n("Tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("TabPane",{attrs:{label:"订单信息",name:"detail"}},[t.formType?t._e():n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("退款信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("退款原因：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.refund_reason||"-")+"\n                ")])]),parseFloat(t.orderDatalist.orderInfo.refund_price)||parseFloat(t.orderDatalist.orderInfo.refunded_price)?n("li",{staticClass:"item"},[n("div",[t._v("退款金额：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(parseFloat(t.orderDatalist.orderInfo.refunded_price)?parseFloat(t.orderDatalist.orderInfo.refunded_price):parseFloat(t.orderDatalist.orderInfo.refund_price)||0)+"\n                ")])]):t._e(),parseFloat(t.orderDatalist.orderInfo.back_integral)?n("li",{staticClass:"item"},[n("div",[t._v("退回积分：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(parseFloat(t.orderDatalist.orderInfo.back_integral)||"-")+"\n                ")])]):t._e(),n("li",{staticClass:"item"},[n("div",[t._v("退款说明：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.refund_explain||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("退款凭证：")]),n("div",{staticClass:"value"},t._l(t.orderDatalist.orderInfo.refund_img,(function(t,e){return n("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e,staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"img"}]})])})),0)])])]),!t.formType&&t.orderDatalist.orderInfo.refund_express_name?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("退货信息")]),n("ul",{staticClass:"list"},[2==t.orderDatalist.orderInfo.apply_type?n("li",{staticClass:"item"},[n("div",[t._v("物流公司：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.refund_express_name||"-")+"\n                ")])]):t._e(),2==t.orderDatalist.orderInfo.apply_type?n("li",{staticClass:"item"},[n("div",[t._v("物流单号：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.refund_express||"-")+"\n                ")])]):t._e(),n("li",{staticClass:"item"},[n("div",[t._v("退货说明：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.refund_goods_explain||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("退货凭证：")]),n("div",{staticClass:"value"},t._l(t.orderDatalist.orderInfo.refund_goods_img,(function(t,e){return n("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e,staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"img"}]})])})),0)])])]):t._e(),n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("用户信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("用户UID：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.userInfo.uid?t.orderDatalist.userInfo.uid:"游客")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("用户昵称：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.userInfo.uid?t.orderDatalist.userInfo.nickname:"游客")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("绑定电话：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.userInfo.phone||"-")+"\n                ")])])])]),0==t.orderDatalist.orderInfo.product_type?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("收货信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"value"},[t._v("\n                  收货人："+t._s(t.orderDatalist.orderInfo.real_name||"-")+"\n                ")])])]),n("ul",{staticClass:"list"},[n("li",{staticClass:"mt10"},[n("div",{staticClass:"value"},[t._v("\n                  收货电话："+t._s(t.orderDatalist.orderInfo.user_phone||"-")+"\n                ")])])]),n("ul",{staticClass:"list"},[n("li",{staticClass:"mt10"},[n("div",{staticClass:"value"},[t._v("\n                  收货地址："+t._s(t.orderDatalist.orderInfo.user_address||"-")+"\n                ")])])])]):t._e(),t.orderDatalist.orderInfo.fictitious_content&&1!=t.orderDatalist.orderInfo.cartInfo[0].product_type?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("虚拟发货")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.fictitious_content)+"\n                ")])])])]):t._e(),1==t.orderDatalist.orderInfo.cartInfo[0].product_type?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("卡密发货")]),t.orderDatalist.orderInfo.virtual.length?n("div",t._l(t.orderDatalist.orderInfo.virtual,(function(e,r){return n("div",{key:r,staticClass:"list"},[n("div",{staticClass:"item"},[n("div",[t._v("卡号"+t._s(r+1)+"：")]),n("div",{staticClass:"value"},[t._v(t._s(e.card_no))])]),n("div",{staticClass:"item"},[n("div",[t._v("密码"+t._s(r+1)+"：")]),n("div",{staticClass:"value"},[t._v(t._s(e.card_pwd))])])])})),0):n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.virtual_info||"-")+"\n                ")])])])]):t._e(),t.orderDatalist.orderInfo.supplierInfo?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("供应商信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("供应商：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.supplierInfo.supplier_name?t.orderDatalist.orderInfo.supplierInfo.supplier_name:"游客")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("供应商姓名：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.supplierInfo.name?t.orderDatalist.orderInfo.supplierInfo.name:"游客")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("联系方式：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.supplierInfo.phone||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("供应商邮箱：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.supplierInfo.email||"-")+"\n                ")])])])]):t._e(),n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("订单信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("创建时间：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo._add_time||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("商品总数：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.total_num||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("商品总价：")]),n("div",{staticClass:"value"},[t._v("\n                  ￥"+t._s(t.orderDatalist.orderInfo.total_price||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("优惠券金额：")]),n("div",{staticClass:"value"},[t._v("\n                  ￥"+t._s(t.orderDatalist.orderInfo.coupon_price||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("积分抵扣：")]),n("div",{staticClass:"value"},[t._v("\n                  ￥"+t._s(t.orderDatalist.orderInfo.deduction_price||0)+"\n                ")])]),parseFloat(t.orderDatalist.orderInfo.use_integral)?n("li",{staticClass:"item"},[n("div",[t._v("使用积分：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(parseFloat(t.orderDatalist.orderInfo.use_integral))+"\n                ")])]):t._e(),n("li",{staticClass:"item"},[n("div",[t._v("支付邮费：")]),n("div",{staticClass:"value"},[t._v("\n                  ￥"+t._s(t.orderDatalist.orderInfo.pay_postage||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("会员商品优惠：")]),n("div",{staticClass:"value"},[t._v("\n                  ￥"+t._s(t.orderDatalist.orderInfo.vip_true_price||0)+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("首单优惠：")]),n("div",{staticClass:"value"},[t._v("\n                  ￥"+t._s(t.orderDatalist.orderInfo.first_order_price||0)+"\n                ")])]),2===t.orderDatalist.orderInfo.shipping_type&&0===t.orderDatalist.orderInfo.refund_status&&1===t.orderDatalist.orderInfo.paid?n("li",{staticClass:"item"},[n("div",[t._v("门店名称：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo._store_name||"-")+"\n                ")])]):t._e(),2===t.orderDatalist.orderInfo.shipping_type&&0===t.orderDatalist.orderInfo.refund_status&&1===t.orderDatalist.orderInfo.paid?n("li",{staticClass:"item"},[n("div",[t._v("核销码：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.verify_code||"-")+"\n                ")])]):t._e(),n("li",{staticClass:"item"},[n("div",[t._v("推广人：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.userInfo.spread_name)+"/ID:"+t._s(t.orderDatalist.userInfo.spread_uid)+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("支付时间：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo._pay_time||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("支付方式：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo._status._payType||"-")+"\n                ")])]),t.orderDatalist.orderInfo.store_order_sn?n("li",{staticClass:"item"},[n("div",[t._v("原订单号：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.store_order_sn)+"\n                ")])]):t._e(),t._l(t.orderDatalist.orderInfo.promotions_detail,(function(e,r){return n("li",{key:r,staticClass:"item"},[n("div",[t._v(t._s(e.title)+"：")]),n("div",{staticClass:"value"},[t._v("\n                  -￥"+t._s(parseFloat(e.promotions_price).toFixed(2))+"\n                ")])])})),4===t.orderDatalist.orderInfo.type?n("li",{staticClass:"item"},[n("div",[t._v("实付积分：")]),n("div",{staticClass:"value"},[t._v("\n                  -￥"+t._s(t.orderDatalist.orderInfo.pay_integral)+"\n                ")])]):t._e()],2)]),"express"===t.orderDatalist.orderInfo.delivery_type?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("物流信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("快递公司：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.delivery_name||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("快递单号：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.delivery_id)),n("span",{staticClass:"logisticsLook",on:{click:t.openLogistics}},[t._v("查询")])])])])]):t._e(),"send"===t.orderDatalist.orderInfo.delivery_type?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("配送信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("送货人姓名：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.delivery_name||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("送货人电话：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.delivery_id||"-")+"\n                ")])])])]):t._e(),t.orderDatalist.orderInfo.custom_form.length&&t.isShow?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("自定义留言")]),n("ul",{staticClass:"list"},t._l(t.orderDatalist.orderInfo.custom_form,(function(e,r){return e.value&&-1==["uploadPicture","dateranges"].indexOf(e.name)||e.value.length&&-1!=["uploadPicture","dateranges"].indexOf(e.name)?n("li",{key:r,staticClass:"item"},[n("div",{staticClass:"txtVal"},[t._v(t._s(e.titleConfig.value)+"：")]),"dateranges"===e.name?n("div",{staticClass:"value"},[t._v("\n                  "+t._s(e.value[0]+"/"+e.value[1])+"\n                ")]):"uploadPicture"===e.name?n("div",{staticClass:"value"},t._l(e.value,(function(t,e){return n("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e,staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"img"}]})])})),0):n("div",{staticClass:"value"},[t._v(t._s(e.value||"-"))])]):t._e()})),0)]):t._e(),t.orderDatalist.orderInfo.mark?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("买家留言")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.mark||"-")+"\n                ")])])])]):t._e(),t.orderDatalist.orderInfo.remark?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("订单备注")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("备注：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.remark||"-")+"\n                ")])])])]):t._e(),t.orderDatalist.orderInfo.refuse_reason?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("拒绝退款原因")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.refuse_reason)+"\n                ")])])])]):t._e(),t.orderDatalist.orderInfo.invoice?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("发票信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("发票类型：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t._f("invoiceType")(t.orderDatalist.orderInfo.invoice.type))+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("抬头类型：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t._f("invoiceHeaderType")(t.orderDatalist.orderInfo.invoice.header_type))+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("发票抬头：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.invoice.name||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("税号：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.invoice.duty_number||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("邮箱：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.invoice.email||"-")+"\n                ")])]),2==t.orderDatalist.orderInfo.invoice.type?n("li",{staticClass:"item"},[n("div",[t._v("开户银行：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.invoice.bank||"-")+"\n                ")])]):t._e(),2==t.orderDatalist.orderInfo.invoice.type?n("li",{staticClass:"item"},[n("div",[t._v("企业地址：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.invoice.address||"-")+"\n                ")])]):t._e(),n("li",{staticClass:"item"},[n("div",[t._v("企业电话：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.invoice.drawer_phone||"-")+"\n                ")])])])]):t._e()]),n("TabPane",{attrs:{label:"商品信息",name:"product"}},[n("Table",{attrs:{columns:t.columns1,data:t.orderDatalist.orderInfo.cartInfo,"highlight-row":""},scopedSlots:t._u([{key:"product",fn:function(e){var r=e.row;return[n("Tooltip",{attrs:{theme:"dark","max-width":"300",delay:600}},[n("div",{staticClass:"product"},[n("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:r.productInfo.attrInfo?r.productInfo.attrInfo.image:r.productInfo.image,expression:"\n                        row.productInfo.attrInfo\n                          ? row.productInfo.attrInfo.image\n                          : row.productInfo.image\n                      "}]})]),n("div",{staticClass:"title"},[n("div",{staticClass:"line2"},[r.is_gift?n("span",{staticClass:"font-color-red"},[t._v("[赠品]")]):t._e(),t._v("\n                      "+t._s(r.productInfo.store_name)+" |\n                      "+t._s(r.productInfo.attrInfo?r.productInfo.attrInfo.suk:"")+"\n                    ")])])]),n("div",{attrs:{slot:"content"},slot:"content"},[n("div",[r.is_gift?n("p",{staticClass:"font-color-red"},[t._v("[赠品]")]):t._e(),n("p",[t._v(t._s(r.productInfo.store_name))]),n("p",[t._v("\n                      "+t._s(r.productInfo.attrInfo?r.productInfo.attrInfo.suk:"")+"\n                    ")])])])])]}},{key:"code",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.productInfo.spec_type?r.productInfo.attrInfo.code:r.productInfo.code))])]}}],null,!1,2962409082)})],1),n("TabPane",{attrs:{label:"订单记录",name:"record"}},[n("Table",{attrs:{columns:t.columns2,data:t.recordData,loading:t.loading,"no-data-text":"暂无数据","highlight-row":"","no-filtered-data-text":"暂无筛选结果"}})],1),t.splitList.length?n("TabPane",{attrs:{label:"发货记录",name:"recordList",index:1}},[n("Table",{attrs:{columns:t.columnSplit,data:t.splitList,loading:t.loading,"no-data-text":"暂无数据","highlight-row":"","no-filtered-data-text":"暂无筛选结果"},scopedSlots:t._u([{key:"order_id",fn:function(e){var r=e.row;return[n("div",[t._v(t._s(r.order_id))]),r.supplier_name?n("span",{staticClass:"supplierName"},[t._v("["+t._s(r.supplier_name)+"]")]):t._e(),r.store_name?n("span",{staticClass:"supplierName"},[t._v("["+t._s(r.store_name)+"]")]):t._e()]}},{key:"product",fn:function(e){var r=e.row;return[n("Tooltip",{attrs:{theme:"dark","max-width":"300",delay:600}},[t._l(r._info,(function(e,r){return n("div",{key:r,staticClass:"product productTime"},[n("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.image:e.cart_info.productInfo.image,expression:"\n                        j.cart_info.productInfo.attrInfo\n                          ? j.cart_info.productInfo.attrInfo.image\n                          : j.cart_info.productInfo.image\n                      "}]})]),n("div",{staticClass:"title"},[n("div",{staticClass:"line2"},[e.cart_info.is_gift?n("span",{staticClass:"font-color-red"},[t._v("[赠品]")]):t._e(),t._v("\n                      "+t._s(e.cart_info.productInfo.store_name)+" |\n                      "+t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.suk:"")+"\n                    ")])])])})),n("div",{attrs:{slot:"content"},slot:"content"},t._l(r._info,(function(e,r){return n("div",{key:r},[e.cart_info.is_gift?n("p",{staticClass:"font-color-red"},[t._v("\n                      [赠品]\n                    ")]):t._e(),n("p",[t._v(t._s(e.cart_info.productInfo.store_name))]),n("p",[t._v("\n                      "+t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.suk:"")+"\n                    ")]),n("p",{staticClass:"tabBox_pice"},[t._v("\n                      "+t._s("￥"+e.cart_info.sum_price+" x "+e.cart_info.cart_num)+"\n                    ")])])})),0)],2)]}},{key:"deliveryInfo",fn:function(e){var r=e.row;return[r.add_time?n("div",[n("span",[t._v("创建时间：")]),t._v(t._s(r.add_time)+"\n              ")]):t._e(),r.delivery_time?n("div",[n("span",[t._v("发货时间：")]),t._v(t._s(r.delivery_time)+"\n              ")]):t._e(),"express"==r.delivery_type||"send"==r.delivery_type||"fictitious"==r.delivery_type?n("div",[t._v("\n                发货方式：\n                "),"express"==r.delivery_type?n("span",[t._v("物流发货")]):t._e(),"send"==r.delivery_type?n("span",[t._v("送货")]):t._e(),"fictitious"==r.delivery_type?n("span",[t._v("虚拟发货")]):t._e()]):t._e(),r.delivery_name?n("div",[t._v("\n                快递公司："+t._s(r.delivery_name)+"\n              ")]):t._e(),r.delivery_id?["express"==r.delivery_type?n("div",{on:{click:function(e){return t.openItemLogistics(r)}}},[t._v("\n                  快递单号："),n("span",{staticStyle:{color:"#1890ff",cursor:"pointer"}},[t._v(t._s(r.delivery_id))])]):t._e(),"send"==r.delivery_type?n("div",[t._v("\n                  快递单号："),n("span",{staticStyle:{color:"#1890ff"}},[t._v(t._s(r.delivery_id))])]):t._e()]:t._e()]}},{key:"action",fn:function(e){var r=e.row;return e.index,[2!==r._status||r.supplier_name||0!=r.store_id?t._e():n("Divider",{attrs:{type:"vertical"}}),1===r._status?n("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.edit(r,1)}}},[t._v("编辑")]):t._e(),2!==r._status&&8!==r._status&&4!==r.status||1!==r.shipping_type||null!==r.pinkStatus&&2!==r.pinkStatus||r.supplier_name||0!=r.store_id?t._e():n("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.sendOrder(r,1)}}},[t._v("发送货")]),4!==r._status||r.split.length?t._e():n("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.delivery(r,1)}}},[t._v("配送信息")]),4===r._status&&!r.split.length&&r.supplier_name&&0==r.store_id?n("Divider",{attrs:{type:"vertical"}}):t._e(),2!=r.shipping_type||0!=r.status&&5!=r.status||1!=r.paid||0!==r.refund_status?t._e():n("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.bindWrite(r,1)}}},[t._v("立即核销")]),r.supplier_name&&"未发货"==r.status_name.status_name?n("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.btnClick(r)}}},[t._v("提醒发货")]):t._e(),1===r._status||(2===r._status||r.split.length)&&1===r.shipping_type&&(null===r.pinkStatus||2===r.pinkStatus)||4===r._status||2==r.shipping_type&&0==r.status&&1==r.paid&&0===r.refund_status||r.supplier_name&&r.supplier_name&&"未发货"==r.status_name.status_name?n("Divider",{attrs:{type:"vertical"}}):t._e(),[n("Dropdown",{attrs:{transfer:!0},on:{"on-click":function(e){return t.changeMenu("",r,e,1)}}},[n("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n                    更多\n                    "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:1===r._status&&0===r.paid&&"offline"===r.pay_type,expression:"\n                        row._status === 1 &&\n                          row.paid === 0 &&\n                          row.pay_type === 'offline'\n                      "}],ref:"ones",attrs:{disabled:t.openErp,name:"1"}},[t._v("立即支付")]),n("DropdownItem",{attrs:{disabled:t.openErp,name:"3"}},[t._v("订单记录")]),n("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:r._status>=3&&r.express_dump,expression:"row._status >= 3 && row.express_dump"}],attrs:{disabled:t.openErp,name:"11"}},[t._v("电子面单打印")]),n("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:r._status>=2,expression:"row._status >= 2"}],attrs:{name:"10"}},[t._v("小票打印")]),n("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:1!==r._status||3===r._status&&r.use_integral>0&&r.use_integral>=r.back_integral,expression:"\n                        row._status !== 1 ||\n                          (row._status === 3 &&\n                            row.use_integral > 0 &&\n                            row.use_integral >= row.back_integral)\n                      "}],attrs:{name:"4"}},[t._v("订单备注")]),n("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:2!=r.refund_type&&4!=r.refund_type&&6!=r.refund_type&&1==r.paid&&2!==r.refund_status&&parseFloat(r.pay_price)>0&&(null==r.split||0==r.split.length),expression:"\n                        row.refund_type != 2 &&\n                          row.refund_type != 4 &&\n                          row.refund_type != 6 &&\n                          row.paid == 1 &&\n                          row.refund_status !== 2 &&\n                          parseFloat(row.pay_price) > 0 &&\n                          (row.split == null || row.split.length == 0)\n                      "}],attrs:{disabled:t.openErp,name:"5"}},[t._v("立即退款")]),n("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:2==r.refund_type,expression:"row.refund_type == 2"}],attrs:{disabled:t.openErp,name:"55"}},[t._v("同意退货")]),n("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:4===r._status&&!r.split.length,expression:"row._status === 4 && !row.split.length"}],attrs:{disabled:t.openErp,name:"8"}},[t._v("已收货")]),1==r.is_del?n("DropdownItem",{attrs:{disabled:t.openErp,name:"9"}},[t._v("删除订单")]):t._e()],1)],1)]]}}],null,!1,2475477877)})],1):t._e(),t.offRecordList.length?n("TabPane",{attrs:{label:"核销记录",name:"writeOff",index:2}},[n("Table",{attrs:{columns:t.columns3,data:t.offRecordList,loading:t.loading,"no-data-text":"暂无数据","highlight-row":"","no-filtered-data-text":"暂无筛选结果"},scopedSlots:t._u([{key:"product",fn:function(t){var e=t.row;return[n("div",{staticClass:"product "},[n("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image,expression:"row.image"}]})])])]}}],null,!1,3448605298)})],1):t._e()],1)],1):t._e()]),n("Modal",{staticClass:"order_box2",attrs:{scrollable:"",title:"物流查询",width:"350"},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[n("div",{staticClass:"logistics acea-row row-top"},[n("div",{staticClass:"logistics_img"},[n("img",{attrs:{src:r("bd9b")}})]),n("div",{staticClass:"logistics_cent"},[n("span",[t._v("物流公司："+t._s(t.logisticsChecked.delivery_name))]),n("span",[t._v("物流单号："+t._s(t.logisticsChecked.delivery_id))])])]),n("div",{staticClass:"acea-row row-column-around trees-coadd"},[n("div",{staticClass:"scollhide"},[n("Timeline",t._l(t.result,(function(e,r){return n("TimelineItem",{key:r},[n("p",{staticClass:"time",domProps:{textContent:t._s(e.time)}}),n("p",{staticClass:"content",domProps:{textContent:t._s(e.status)}})])})),1)],1)])])],1)}),[],!1,null,"574ab062",null);e.a=d.exports}}]);