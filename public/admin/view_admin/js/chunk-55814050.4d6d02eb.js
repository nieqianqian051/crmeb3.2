(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-55814050"],{"26b6":function(t,e,n){},"4e4f":function(t,e,n){},"61f7":function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var s=n.call(t,e||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var r in n)if(new RegExp("(".concat(r,")")).test(e)){var s=n[r]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?s:l(s))}return e}function l(t){return("00"+t).substr(t.length)}n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return m})),n.d(e,"b",(function(){return d}));var c={min:"%s最小长度为:min",max:"%s最大长度为:max",length:"%s长度必须为:length",range:"%s长度为:range",pattern:"$s格式错误"},u=function(t,e){t.message=function(t){return e.replace("%s",t||"")}};function m(t){return a({required:!0,message:t,type:"string"},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function d(t){return p.pattern(/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,t)}u(m,"请输入%s"),u(d,"%s格式不正确");var p=Object.keys(c).reduce((function(t,e){return t[e]=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s="range"===e?{min:t[0],max:t[1]}:i({},e,t);return a(a({message:n.replace(":".concat(e),"range"===e?"".concat(t[0],"-").concat(t[1]):t),type:"string"},s),r)},u(t[e],c[e]),t}),{})},b621:function(t,e,n){"use strict";n.r(e);var r=n("b0e7"),s=n("e449"),a=n("c4ad"),i={name:"",components:{},props:{listOne:{type:Array,default:[]}},data:function(){return{formValidate:{info:""},isShow:!1,loading:!1,selectEquips:[],columns1:[{type:"selection",width:60,align:"center"},{title:"信息",key:"info"},{title:"信息格式",key:"label"},{title:"提示信息",key:"tip"}],listOneNew:[]}},computed:{},watch:{listOne:{handler:function(t){this.listOneNew=t}}},created:function(){},mounted:function(){},methods:{handleSubmit:function(){var t=this;if(this.formValidate.info){var e=[];this.listOne.forEach((function(n){-1!=n.info.indexOf(t.formValidate.info)&&e.push(n)})),this.$set(this,"listOneNew",e)}else this.$set(this,"listOneNew",this.listOne)},selectionTap:function(t){this.selectEquips=t},ok:function(){this.$emit("getInfoList",this.selectEquips),this.reset()},cancel:function(){this.isShow=!1,this.reset()},reset:function(){this.formValidate.info="",this.$refs.table.selectAll(!1),this.listOneNew=this.listOne}}},o=(n("e951"),n("2877")),l=Object(o.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"information"},[n("Modal",{staticClass:"paymentFooter",attrs:{title:"选择信息",footerHide:"",scrollable:"",width:"900"},on:{"on-cancel":t.cancel},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("Form",{ref:"formValidate",attrs:{model:t.formValidate,"label-width":100}},[n("FormItem",{attrs:{label:"信息搜索："}},[n("Input",{staticClass:"inputw",attrs:{placeholder:"请输入信息"},model:{value:t.formValidate.info,callback:function(e){t.$set(t.formValidate,"info",e)},expression:"formValidate.info"}}),n("Button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("\n          查询\n        ")])],1)],1),n("Table",{ref:"table",staticClass:"mr-20",attrs:{"no-data-text":"暂无数据","no-filtered-data-text":"暂无筛选结果",columns:t.columns1,data:t.listOneNew,loading:t.loading},on:{"on-selection-change":t.selectionTap}}),n("div",{staticClass:"footer mt20"},[n("Button",{staticClass:"btn",on:{click:t.cancel}},[t._v("取消")]),n("Button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.ok}},[t._v("确认")])],1)],1)],1)}),[],!1,null,"6c4a1af8",null).exports,c=n("a069"),u=n("c24f");function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=m(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==m(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _={name:"setupUser",components:{uploadPictures:r.a,couponList:s.a,goodsList:a.default,WangEditor:c.a,information:l},props:{},data:function(){return{tabVal:"basic",paySwitch:1,phoneSwitch:1,indexCoupon:0,val:"",formActive:{activeInput:0},basicsForm:{},selectArr:[],value:"",formItem:{info:"",format:"",tip:"",single:"",singlearr:[]},activityShow:!1,isChoice:"单选",modalPic:!1,loading:!1,addModel:!1,inputShow:!1,modals:!1,authorizedPicture:"",ids:[],avatar:{},member_card_status:1,svip_price_status:0,loginForm:{newcomer_status:"1",store_user_mobile:"",newcomer_limit_status:"",newcomer_limit_time:"",register_integral_status:"",register_give_integral:"",register_money_status:"",register_give_money:"",register_coupon_status:"",register_give_coupon:[],first_order_status:"",first_order_discount:"",first_order_discount_limit:"",register_price_status:"",product:[],newcomer_agreement:"",register_notice:""},newcomer_agreement:"",product_list:[],vipForm:{member_func_status:0,sign_give_exp:"",order_give_exp:"",invite_user_exp:"",level_activate_status:1,level_extend_info:[],level_integral_status:1,level_give_integral:8,level_money_status:1,level_give_money:15,level_coupon_status:1,level_give_coupon:[]},isShow:!1,formatList:[{value:"text",label:"文本"},{value:"num",label:"数字"},{value:"date",label:"日期"},{value:"radio",label:"单选项"},{value:"id",label:"身份证"},{value:"mail",label:"邮件"},{value:"phone",label:"手机号"},{value:"address",label:"地址"}],gridBtn:{xl:4,lg:8,md:8,sm:8,xs:8},gridPic:{xl:6,lg:8,md:12,sm:12,xs:12},columns:[{title:"",slot:"drag",width:50},{title:"信息",key:"info",width:120},{title:"使用",slot:"use",width:70},{title:"必填",slot:"required",width:70},{title:"用户端展示",slot:"user_show",minWidth:70},{title:"信息格式",key:"label",minWidth:120},{title:"提示信息",key:"tip",minWidth:120},{title:"操作",slot:"action",minWidth:80}],columns3:[{title:"信息",key:"info",width:120},{title:"必填",slot:"required",width:70},{title:"信息格式",key:"label",minWidth:120},{title:"提示信息",key:"tip",minWidth:120},{title:"操作",slot:"action",minWidth:80}],listOne:[],listVip:[],promotionsData:[{threshold:0,give_integral:0,checkIntegral:!1,checkCoupon:!1,checkGoods:!1,giveProducts:[],giveCoupon:[]}],tableData:[],columns1:[{title:"优惠券名称",key:"title",minWidth:150},{title:"类型",slot:"coupon_type",minWidth:80},{title:"面值",slot:"coupon_price",minWidth:100},{title:"最低消费额",key:"use_min_price",minWidth:100},{title:"操作",slot:"status",align:"center",minWidth:80}],ruleValidate:{info:[{required:!0,message:"信息名称不能为空",trigger:"blur"}],format:[{required:!0,message:"信息格式不能为空",trigger:"blur"}],tip:[{required:!0,message:"信息文案不能为空",trigger:"blur"}],singlearr:[{required:!0,validator:function(t,e,n){e.length<2?n(new Error("单选项最少输入2个")):n()},type:"array",trigger:"blur"}]},ruleActive:{activeInput:[{required:!0,validator:function(t,e,n){""===e||null==e||e<0?n(new Error("活动价不能为空")):n()},trigger:"blur"}]},couponType:0,vipCopon:[]}},computed:{},created:function(){"register"==this.$route.query.type?this.tabVal="register":"level"==this.$route.query.type?this.tabVal="level":this.tabVal="basic",this.settingUser()},mounted:function(){},methods:{tapCheckbox:function(t){},informationTap:function(){this.$refs.information.isShow=!0},onDragDrop:function(t,e){t=parseInt(t),e=parseInt(e);var n=this.listOne[t];if(t<e){for(var r=t+1;r<=e;r++)this.listOne.splice(r-1,1,this.listOne[r]);this.listOne.splice(e,1,n)}if(t>e){for(r=t;r>e;r--)this.listOne.splice(r,1,this.listOne[r-1]);this.listOne.splice(e,1,n)}var s=1;this.listOne.forEach((function(t){t.sort=s,s++}))},settingUser:function(){var t=this;Object(u.N)(this.tabVal).then((function(e){"basic"===t.tabVal&&(t.authorizedPicture=e.data.h5_avatar,t.listOne=e.data.user_extend_info),"register"===t.tabVal&&(t.loginForm=e.data,t.promotionsData[0].giveCoupon=e.data.register_give_coupon,t.tableData=function t(e){return e.map((function(e){return p(p({},e),{},{ativity_price:e.price,id:e.product_id,attrValue:e.attrValue?t(e.attrValue):[]})}))}(e.data.product)),"level"===t.tabVal&&(t.vipForm=e.data,t.vipCopon=e.data.level_give_coupon,e.data.level_extend_info.forEach((function(t){1==t.required||1==t.required?t.required=!0:t.required=!1})),t.listVip=e.data.level_extend_info),"svip"===t.tabVal&&(t.member_card_status=e.data.member_card_status,t.svip_price_status=e.data.svip_price_status)}))},selectAll:function(t){this.selectArr=t.records},activityShowFn:function(){0===this.selectArr.length?this.$Message.error("请先选择设置活动价的商品！"):this.activityShow=!0},cancel:function(t){this.activityShow=!1,this.$refs[t].resetFields()},ok:function(t){var e=this;this.$refs[t].validate((function(n){n&&(e.selectArr.forEach((function(t){t.ativity_price=e.formActive.activeInput})),e.activityShow=!1,e.$refs[t].resetFields())}))},delAll:function(){var t=this;0===this.selectArr.length?this.$Message.error("请先选择删除的商品！"):this.$Modal.confirm({title:"删除确认",content:"您确认要删除这些商品？",onOk:function(){t.selectArr.forEach((function(e){t.tableData.forEach((function(n,r){e.id==n.id?t.tableData.splice(r,1):n.attrValue.forEach((function(s,a){e.id==s.id&&(1==n.attrValue.length?t.tableData.splice(r,1):n.attrValue.splice(a,1))}))}))}))}})},tabChange:function(){this.settingUser()},getPic:function(t){this.authorizedPicture=t.att_dir,this.modalPic=!1},modalPicTap:function(){this.modalPic=!0},cancelSubmit:function(){this.formItem={info:"",format:"",tip:"",single:"",singlearr:[]},this.addModel=!1,this.$refs.formValidate.resetFields()},addSubmit:function(){var t=this;this.$refs.formValidate.validate((function(e){var n=p(p({},t.formItem),{},{required:0,use:0,user_show:0,label:""});switch(n.format){case"text":n.label="文本";break;case"num":n.label="数字";break;case"date":n.label="日期";break;case"radio":n.label="单选项";break;case"id":n.label="身份证";break;case"mail":n.label="邮件";break;case"phone":n.label="手机号";break;case"address":n.label="地址"}var r=[];t.listOne.forEach((function(t){r.push(t.info)})),e&&(-1==r.indexOf(n.info)?(t.listOne.push(n),t.cancelSubmit()):t.$Message.error("该信息已经添加过"))}))},delInfo:function(t){this.listOne.splice(t,1)},delVip:function(t,e){this.listVip.splice(e,1)},addlabel:function(){this.formItem.single&&(-1===this.formItem.singlearr.indexOf(this.formItem.single)&&this.formItem.singlearr.push(this.formItem.single),this.formItem.single="")},handleSubmit:function(t){var e=this;switch(t){case"basic":var n={h5_avatar:this.authorizedPicture,user_extend_info:this.listOne};Object(u.M)(t,n).then((function(t){e.$Message.success(t.msg)}));break;case"register":this.product_list=[],this.tableData.forEach((function(t){var n={product_id:t.id,price:t.ativity_price,attr:[]};t.attrValue.length&&t.attrValue.forEach((function(t){var e={unique:t.unique,price:t.ativity_price};n.attr.push(e)})),e.product_list.push(n)}));var r=this.promotionsData[0].giveCoupon.map((function(t){return t.id}));this.loginForm.register_give_coupon=Array.from(new Set(r)),this.loginForm.product=this.product_list,this.loginForm.newcomer_agreement=this.newcomer_agreement,Object(u.M)(t,this.loginForm).then((function(t){e.$Message.success(t.msg)})).catch((function(t){e.$Message.error(t.msg)}));break;case"level":var s=this.vipCopon.map((function(t){return t.id}));this.vipForm.level_give_coupon=Array.from(new Set(s)),this.vipForm.level_extend_info=this.listVip,Object(u.M)(t,this.vipForm).then((function(t){e.$Message.success(t.msg)})).catch((function(t){e.$Message.error(t.msg)}));break;case"svip":var a={member_card_status:this.member_card_status,svip_price_status:this.svip_price_status};Object(u.M)(t,a).then((function(t){e.$Message.success(t.msg)}))}},addCoupon:function(t){this.indexCoupon=t,this.$refs.couponTemplates.isTemplate=!0,this.$refs.couponTemplates.tableList()},handleClose:function(t,e){var n=this.formItem.singlearr.indexOf(e);this.formItem.singlearr.splice(n,1)},getCouponList:function(t){var e=this.indexCoupon;this.$refs.couponTemplates.isTemplate=!1,t.forEach((function(t){t.limit_num=0,t.indexCoupon=e}));var n=this.promotionsData[e].giveCoupon.concat(t),r=this.unique(n);"register"===this.tabVal?this.promotionsData[e].giveCoupon=r:this.vipCopon=r},delCoupon:function(t,e){"level"===this.tabVal&&this.vipCopon.splice(t,1),this.promotionsData[e].giveCoupon.splice(t,1)},addGoods:function(t){this.modals=!0},inputChange:function(t){t.attrValue.length>0&&t.attrValue.forEach((function(e){e.ativity_price=t.ativity_price}))},del:function(t){var e=this;this.tableData.forEach((function(n,r){if(t.id==n.id)return e.tableData.splice(r,1);n.attrValue.forEach((function(s,a){if(t.id==s.id)return 1==n.attrValue.length?e.tableData.splice(r,1):n.attrValue.splice(a,1)}))}))},unique:function(t){var e=new Map;return t.filter((function(t){return!e.has(t.id)&&e.set(t.id,1)}))},getProductId:function(t){this.modals=!1;var e=this.tableData.concat(t),n=this.unique(e);n.forEach((function(t){t.attrValue.forEach((function(e){e.cate_name=t.cate_name,e.store_label=t.store_label}))})),this.tableData=function t(e){return e.map((function(e){return p(p({},e),{},{ativity_price:"",attrValue:e.attrValue?t(e.attrValue):[]})}))}(n)},getInfoList:function(t){var e=this.listVip.concat(t),n=this.uniqueVip(e);n.forEach((function(t){1==t.required||1==t.required?t.required=!0:t.required=!1})),this.listVip=n,this.$refs.information.isShow=!1},uniqueVip:function(t){var e=new Map;return t.filter((function(t){return!e.has(t.info)&&e.set(t.info,1)}))},getEditorContent:function(t){this.newcomer_agreement=t}}},v=(n("df20"),Object(o.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[n("Tabs",{on:{"on-click":t.tabChange},model:{value:t.tabVal,callback:function(e){t.tabVal=e},expression:"tabVal"}},[n("TabPane",{attrs:{label:"基础信息",name:"basic"}},[n("Form",{attrs:{model:t.basicsForm,"label-width":120}},[n("Row",{attrs:{gutter:24,type:"flex"}},[n("Col",{attrs:{span:"24"}},[n("div",{staticClass:"basics"},[t._v("用户设置")])]),n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",{attrs:{label:"用户默认头像："}},[t.authorizedPicture?n("div",{staticClass:"uploadPictrue",on:{click:function(e){return t.modalPicTap("单选")}}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.authorizedPicture,expression:"authorizedPicture"}]})]):n("div",{staticClass:"uploadPictrue",on:{click:function(e){return t.modalPicTap("单选")}}},[n("span",{staticClass:"iconfont iconshangpinshuliang-jia"})]),n("div",{staticClass:"upload-text"},[t._v("建议尺寸：120*120px")])])],1),n("Col",{staticClass:"mt10",attrs:{span:"14"}},[n("FormItem",{attrs:{label:"用户信息设置："}},[n("Table",{ref:"table",staticClass:"mt25 goods",attrs:{data:t.listOne,columns:t.columns,"highlight-row":"",draggable:!0},on:{"on-drag-drop":t.onDragDrop},scopedSlots:t._u([{key:"drag",fn:function(t){return t.row,t.index,[n("div",{staticClass:"iconfont icondrag"})]}},{key:"use",fn:function(e){e.row;var r=e.index;return[n("Checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.listOne[r].use,callback:function(e){t.$set(t.listOne[r],"use",e)},expression:"listOne[index].use"}})]}},{key:"required",fn:function(e){e.row;var r=e.index;return[n("Checkbox",{attrs:{disabled:0==t.listOne[r].use,"true-value":1,"false-value":0},model:{value:t.listOne[r].required,callback:function(e){t.$set(t.listOne[r],"required",e)},expression:"listOne[index].required"}})]}},{key:"user_show",fn:function(e){e.row;var r=e.index;return[n("Checkbox",{attrs:{disabled:0==t.listOne[r].use,"true-value":1,"false-value":0},model:{value:t.listOne[r].user_show,callback:function(e){t.$set(t.listOne[r],"user_show",e)},expression:"listOne[index].user_show"}})]}},{key:"action",fn:function(e){e.row;var r=e.index;return[t.listOne[r].param?t._e():n("a",{on:{click:function(e){return t.delInfo(r)}}},[t._v("删除")])]}}])}),n("div",{staticClass:"upload-text goods"},[t._v("\n                  开启使用后，后台添加用户时可填写此信息；开启必填后，后台添加用户时此信息必须填写；开启用户端展示后，在商城用户个人信息中展示\n                ")]),n("div",{staticClass:"addInfo",on:{click:function(e){t.addModel=!0}}},[t._v("新增信息")]),n("div",{staticClass:"subBtn mt20",on:{click:function(e){return t.handleSubmit("basic")}}},[t._v("\n                  保存\n                ")])],1)],1)],1)],1)],1),n("TabPane",{attrs:{label:"登录注册",name:"register"}},[t.loginForm.register_notice?n("Alert",{attrs:{type:"warning","show-icon":""}},[t._v(t._s(t.loginForm.register_notice))]):t._e(),n("Form",{attrs:{model:t.loginForm,"label-width":120}},[n("Row",{attrs:{gutter:24,type:"flex"}},[n("Col",{attrs:{span:"24"}},[n("div",{staticClass:"basics"},[t._v("登录设置")])]),n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",{attrs:{label:"强制手机号绑定："}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.loginForm.store_user_mobile,callback:function(e){t.$set(t.loginForm,"store_user_mobile",e)},expression:"loginForm.store_user_mobile"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),n("div",{staticClass:"upload-text"},[t._v("商城登录时强制手机号登陆/绑定")])],1)],1),n("Col",{attrs:{span:"24"}},[n("div",{staticClass:"basics"},[t._v("注册有礼")])]),n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",{attrs:{label:"注册有礼启用："}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.loginForm.newcomer_status,callback:function(e){t.$set(t.loginForm,"newcomer_status",e)},expression:"loginForm.newcomer_status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),n("div",{staticClass:"upload-text"},[t._v("新用户注册后，会给用户赠送礼品")])],1)],1),1===t.loginForm.newcomer_status?n("Col",{attrs:{span:"24"}},[1===t.loginForm.newcomer_status?n("FormItem",{attrs:{label:"是否限时："}},[n("RadioGroup",{model:{value:t.loginForm.newcomer_limit_status,callback:function(e){t.$set(t.loginForm,"newcomer_limit_status",e)},expression:"loginForm.newcomer_limit_status"}},[n("Radio",{attrs:{label:0}},[n("span",[t._v("不限时")])]),n("Radio",{attrs:{label:1}},[n("span",[t._v("限时")])])],1),n("div",{staticClass:"upload-text"},[t._v("新人注册活动的时间设置")]),1==t.loginForm.newcomer_limit_status?n("div",{staticClass:"mt10"},[n("Input",{staticClass:"inputw",attrs:{placeholder:"请输入限时天数"},model:{value:t.loginForm.newcomer_limit_time,callback:function(e){t.$set(t.loginForm,"newcomer_limit_time",e)},expression:"loginForm.newcomer_limit_time"}}),1==t.loginForm.newcomer_limit_status?n("span",{staticClass:"span-text"},[t._v("\n                    天\n                  ")]):t._e()],1):t._e()],1):t._e()],1):t._e(),n("Col",{staticClass:"mt10",attrs:{span:"24"}},[1===t.loginForm.newcomer_status?n("FormItem",{attrs:{label:"赠送积分："}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.loginForm.register_integral_status,callback:function(e){t.$set(t.loginForm,"register_integral_status",e)},expression:"loginForm.register_integral_status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),n("div",{staticClass:"upload-text"},[t._v("用户注册后即赠送一定数额的积分")]),1===t.loginForm.register_integral_status?n("Input",{staticClass:"inputw mt10",attrs:{placeholder:"请输入赠送积分"},model:{value:t.loginForm.register_give_integral,callback:function(e){t.$set(t.loginForm,"register_give_integral",e)},expression:"loginForm.register_give_integral"}}):t._e(),1===t.loginForm.register_integral_status?n("span",{staticClass:"span-text"},[t._v("\n                  积分\n                ")]):t._e()],1):t._e()],1),1===t.loginForm.newcomer_status?n("Col",{staticClass:"mt10",attrs:{span:"24"}},[1===t.loginForm.newcomer_status?n("FormItem",{attrs:{label:"赠送余额："}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.loginForm.register_money_status,callback:function(e){t.$set(t.loginForm,"register_money_status",e)},expression:"loginForm.register_money_status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),n("div",{staticClass:"upload-text"},[t._v("\n                  用户注册后即赠送一定数额的储值余额\n                ")]),1===t.loginForm.register_money_status?n("Input",{staticClass:"inputw mt10",attrs:{placeholder:"请输入赠送余额"},model:{value:t.loginForm.register_give_money,callback:function(e){t.$set(t.loginForm,"register_give_money",e)},expression:"loginForm.register_give_money"}}):t._e(),1===t.loginForm.register_money_status?n("span",{staticClass:"span-text"},[t._v("\n                  元\n                ")]):t._e()],1):t._e()],1):t._e(),1===t.loginForm.newcomer_status?n("Col",{staticClass:"mt10",attrs:{span:"24"}},t._l(t.promotionsData,(function(e,r){return n("div",{key:r,staticClass:"item"},[1===t.loginForm.newcomer_status?n("FormItem",{attrs:{label:"赠送优惠券："}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.loginForm.register_coupon_status,callback:function(e){t.$set(t.loginForm,"register_coupon_status",e)},expression:"loginForm.register_coupon_status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),n("div",{staticClass:"upload-text"},[t._v("用户注册后即赠送优惠券")]),1===t.loginForm.register_coupon_status&&e.giveCoupon.length>0?n("Table",{ref:"table",refInFor:!0,staticClass:"table mt10",attrs:{border:"",columns:t.columns1,data:e.giveCoupon,width:"700"},scopedSlots:t._u([{key:"coupon_price",fn:function(e){var r=e.row;return[1==r.coupon_type?n("span",[t._v("\n                        "+t._s(r.coupon_price)+"元\n                      ")]):t._e(),2==r.coupon_type?n("span",[t._v("\n                        "+t._s(parseFloat(r.coupon_price)/10)+"折（"+t._s(r.coupon_price.toString().split(".")[0])+"%）\n                      ")]):t._e()]}},{key:"coupon_type",fn:function(e){return[1===e.row.coupon_type?n("span",[t._v("满减券")]):n("span",[t._v("折扣券")])]}},{key:"status",fn:function(e){e.row;var s=e.index;return[n("a",{on:{click:function(e){return t.delCoupon(s,r)}}},[t._v("删除")])]}}],null,!0)}):t._e(),1===t.loginForm.register_coupon_status?n("div",{staticClass:"add-coupon",on:{click:function(e){return t.addCoupon(r)}}},[t._v("\n                    + 添加优惠券\n                  ")]):t._e()],1):t._e()],1)})),0):t._e(),1===t.loginForm.newcomer_status?n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",{attrs:{label:"首单优惠："}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.loginForm.first_order_status,callback:function(e){t.$set(t.loginForm,"first_order_status",e)},expression:"loginForm.first_order_status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),n("div",{staticClass:"upload-text"},[t._v("\n                  新用户下单时可享折扣，折扣仅对商品打折，运费无折扣\n                ")])],1)],1):t._e(),1===t.loginForm.newcomer_status&&1===t.loginForm.first_order_status?n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",{attrs:{label:"折扣力度："}},[n("Input",{staticClass:"inputw",attrs:{placeholder:"请输入折扣力度"},model:{value:t.loginForm.first_order_discount,callback:function(e){t.$set(t.loginForm,"first_order_discount",e)},expression:"loginForm.first_order_discount"}}),n("span",{staticClass:"span-text"},[t._v("%")]),n("div",{staticClass:"upload-text"},[t._v("\n                  折扣力度为：0-100%，1折为10%\n                ")])],1)],1):t._e(),1===t.loginForm.newcomer_status&&1===t.loginForm.first_order_status?n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",{attrs:{label:"折扣上限："}},[n("Input",{staticClass:"inputw",attrs:{placeholder:"请输入折扣上限"},model:{value:t.loginForm.first_order_discount_limit,callback:function(e){t.$set(t.loginForm,"first_order_discount_limit",e)},expression:"loginForm.first_order_discount_limit"}}),n("span",{staticClass:"span-text"},[t._v("元")]),n("div",{staticClass:"upload-text"},[t._v("\n                  首单优惠最高金额，单位：元\n                ")])],1)],1):t._e(),1===t.loginForm.newcomer_status?n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",{attrs:{label:"新人专享价："}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.loginForm.register_price_status,callback:function(e){t.$set(t.loginForm,"register_price_status",e)},expression:"loginForm.register_price_status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),n("div",{staticClass:"upload-text"},[t._v("\n                  新用户可购买一件新人商品，购买后移动端不再显示新人专区\n                ")]),1===t.loginForm.register_price_status?n("vxe-table",{ref:"xTree",staticClass:"goods mt10",attrs:{border:"inner","column-config":{resizable:!0},"row-id":"id","tree-config":{children:"attrValue",reserve:!0},data:t.tableData,"header-cell-style":{background:"#F7F7F7",height:"40px"}},on:{"checkbox-all":t.selectAll,"checkbox-change":t.selectAll}},[n("vxe-column",{attrs:{type:"checkbox",title:"多选",width:"90","tree-node":""}}),n("vxe-column",{attrs:{field:"id",title:"ID","min-width":"80"}}),n("vxe-column",{attrs:{field:"info",title:"商品信息","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("div",{staticClass:"imgPic acea-row row-middle"},[n("viewer",[n("div",{staticClass:"pictrue"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:r.image,expression:"row.image"}]})])]),n("div",{staticClass:"info"},[n("Tooltip",{attrs:{"max-width":"200",placement:"bottom",transfer:""}},[n("span",{staticClass:"line2"},[t._v(t._s(r.store_name)+t._s(r.suk))]),n("p",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(r.store_name)+t._s(r.suk))])])],1)],1)]}}],null,!1,1988674042)}),n("vxe-column",{attrs:{field:"price",title:"售价","min-width":"80"}}),n("vxe-column",{attrs:{field:"stock",title:"库存","min-width":"80"}}),n("vxe-column",{attrs:{field:"date",title:"活动价","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("Input",{attrs:{border:!1,placeholder:"请输入活动价"},on:{"on-change":function(e){return t.inputChange(r)}},model:{value:r.ativity_price,callback:function(e){t.$set(r,"ativity_price",e)},expression:"row.ativity_price"}})]}}],null,!1,2807784357)}),n("vxe-column",{attrs:{field:"date",title:"操作","min-width":"50",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("a",{on:{click:function(e){return t.del(r)}}},[t._v("删除")])]}}],null,!1,1383043590)})],1):t._e(),1===t.loginForm.register_price_status?n("div",{staticClass:"add-goods"},[n("Button",{on:{click:t.addGoods}},[t._v("添加商品")]),n("Button",{staticClass:"goods-btn",on:{click:t.activityShowFn}},[t._v("\n                    设置活动价\n                  ")]),n("Button",{on:{click:t.delAll}},[t._v("批量删除")])],1):t._e()],1)],1):t._e(),n("Col",{staticClass:"mt10",attrs:{span:"24"}},[1===t.loginForm.newcomer_status?n("FormItem",{attrs:{label:"规则详情："}},[n("WangEditor",{staticClass:"goods",attrs:{content:t.loginForm.newcomer_agreement},on:{editorContent:t.getEditorContent}})],1):t._e()],1),n("Col",[n("FormItem",[n("div",{staticClass:"subBtn",staticStyle:{"margin-top":"0px"},on:{click:function(e){return t.handleSubmit("register")}}},[t._v("\n                  保存\n                ")])])],1)],1)],1)],1),n("TabPane",{attrs:{label:"会员等级",name:"level"}},[n("Form",{attrs:{model:t.vipForm,"label-width":120}},[n("Row",{attrs:{gutter:24,type:"flex"}},[n("Col",{attrs:{span:"24"}},[n("div",{staticClass:"basics"},[t._v("基础设置")])]),n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",{attrs:{label:"会员等级启用："}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.vipForm.member_func_status,callback:function(e){t.$set(t.vipForm,"member_func_status",e)},expression:"vipForm.member_func_status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),n("div",{staticClass:"upload-text"},[t._v("\n                  开启会员等级后，可以获得经验值\n                ")])],1)],1),1===t.vipForm.member_func_status?n("Col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:"下单获得经验："}},[n("Input",{staticClass:"inputw",attrs:{placeholder:"请输入获得经验值"},model:{value:t.vipForm.order_give_exp,callback:function(e){t.$set(t.vipForm,"order_give_exp",e)},expression:"vipForm.order_give_exp"}}),n("div",{staticClass:"upload-text"},[t._v("\n                  用户实际支付1元，可以获得多少经验值\n                ")])],1)],1):t._e(),1===t.vipForm.member_func_status?n("Col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:"签到获得经验："}},[n("Input",{staticClass:"inputw",attrs:{placeholder:"请输入签到获得经验值"},model:{value:t.vipForm.sign_give_exp,callback:function(e){t.$set(t.vipForm,"sign_give_exp",e)},expression:"vipForm.sign_give_exp"}}),n("div",{staticClass:"upload-text"},[t._v("用户签到一次，赠送多少经验值")])],1)],1):t._e(),1===t.vipForm.member_func_status?n("Col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:"邀请新用户获得经验："}},[n("Input",{staticClass:"inputw",attrs:{placeholder:"请输入获取新用户获得经验值"},model:{value:t.vipForm.invite_user_exp,callback:function(e){t.$set(t.vipForm,"invite_user_exp",e)},expression:"vipForm.invite_user_exp"}}),n("div",{staticClass:"upload-text"},[t._v("\n                  邀请一个新用户注册，赠送多少经验值\n                ")])],1)],1):t._e(),n("Col",{attrs:{span:"24"}},[n("div",{staticClass:"basics"},[t._v("激活有礼")])]),n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",{attrs:{label:"会员卡激活："}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.vipForm.level_activate_status,callback:function(e){t.$set(t.vipForm,"level_activate_status",e)},expression:"vipForm.level_activate_status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),n("div",{staticClass:"upload-text"},[t._v("\n                  开启后用户等级功能不能直接使用，需要用户填写信息，激活后才能使用用户等级\n                ")])],1)],1),1===t.vipForm.level_activate_status?n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",{attrs:{label:"会员卡信息："}},[t.listVip.length>0?n("Table",{ref:"table",staticClass:"mt10 mb10 goods",attrs:{columns:t.columns3,data:t.listVip,loading:t.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:t._u([{key:"required",fn:function(e){e.row;var r=e.index;return[n("Checkbox",{on:{"on-change":t.tapCheckbox},model:{value:t.listVip[r].required,callback:function(e){t.$set(t.listVip[r],"required",e)},expression:"listVip[index].required"}})]}},{key:"action",fn:function(e){var r=e.row,s=e.index;return[n("a",{on:{click:function(e){return t.delVip(r,s)}}},[t._v("删除")])]}}],null,!1,1344792718)}):t._e(),n("Button",{on:{click:t.informationTap}},[t._v("\n                  选择信息\n                ")])],1)],1):t._e(),1===t.vipForm.level_activate_status?n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",{attrs:{label:"赠送积分："}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.vipForm.level_integral_status,callback:function(e){t.$set(t.vipForm,"level_integral_status",e)},expression:"vipForm.level_integral_status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),n("div",{staticClass:"upload-text"},[t._v("\n                  用户激活会员卡后即赠送一定数额的积分\n                ")]),1===t.vipForm.level_integral_status?n("Input",{staticClass:"inputw mt10",attrs:{placeholder:"请输入赠送的积分"},model:{value:t.vipForm.level_give_integral,callback:function(e){t.$set(t.vipForm,"level_give_integral",e)},expression:"vipForm.level_give_integral"}}):t._e(),1===t.vipForm.level_integral_status?n("span",{staticClass:"span-text"},[t._v("\n                  积分\n                ")]):t._e()],1)],1):t._e(),1===t.vipForm.level_activate_status?n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",{attrs:{label:"赠送余额："}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.vipForm.level_money_status,callback:function(e){t.$set(t.vipForm,"level_money_status",e)},expression:"vipForm.level_money_status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),n("div",{staticClass:"upload-text"},[t._v("\n                  用户激活会员卡后即赠送一定数额的储值余额\n                ")]),1===t.vipForm.level_money_status?n("Input",{staticClass:"inputw mt10",attrs:{placeholder:"请输入赠送的余额"},model:{value:t.vipForm.level_give_money,callback:function(e){t.$set(t.vipForm,"level_give_money",e)},expression:"vipForm.level_give_money"}}):t._e(),1===t.vipForm.level_money_status?n("span",{staticClass:"span-text"},[t._v("\n                  元\n                ")]):t._e()],1)],1):t._e(),1===t.vipForm.level_activate_status?n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",{attrs:{label:"赠送优惠券："}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.vipForm.level_coupon_status,callback:function(e){t.$set(t.vipForm,"level_coupon_status",e)},expression:"vipForm.level_coupon_status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),n("div",{staticClass:"upload-text"},[t._v("\n                  用户激活会员卡后即赠送优惠券\n                ")]),t._l(t.promotionsData,(function(e,r){return n("div",{key:r,staticClass:"item"},[1===t.vipForm.level_coupon_status?n("div",{staticClass:"add-coupon",on:{click:function(e){return t.addCoupon(r)}}},[t._v("\n                    + 添加优惠券\n                  ")]):t._e(),t.vipCopon.length>0&&1===t.vipForm.level_coupon_status?n("Table",{ref:"table",refInFor:!0,staticClass:"table",attrs:{border:"",columns:t.columns1,data:t.vipCopon,width:"700"},scopedSlots:t._u([{key:"coupon_price",fn:function(e){var r=e.row;return[1==r.coupon_type?n("span",[t._v("\n                        "+t._s(r.coupon_price)+"元\n                      ")]):t._e(),2==r.coupon_type?n("span",[t._v("\n                        "+t._s(parseFloat(r.coupon_price)/10)+"折（"+t._s(r.coupon_price.toString().split(".")[0])+"%）\n                      ")]):t._e()]}},{key:"coupon_type",fn:function(e){return[1===e.row.coupon_type?n("span",[t._v("满减券")]):n("span",[t._v("折扣券")])]}},{key:"status",fn:function(e){e.row;var s=e.index;return[n("a",{on:{click:function(e){return t.delCoupon(s,r)}}},[t._v("删除")])]}}],null,!0)}):t._e()],1)}))],2)],1):t._e(),n("Col",[n("FormItem",[n("div",{staticClass:"subBtn mt10",on:{click:function(e){return t.handleSubmit("level")}}},[t._v("\n                  保存\n                ")])])],1)],1)],1)],1),n("TabPane",{attrs:{label:"付费会员",name:"svip"}},[n("Form",{attrs:{model:t.basicsForm,"label-width":120}},[n("Row",{attrs:{gutter:24,type:"flex"}},[n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",{attrs:{label:"付费会员启用："}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.member_card_status,callback:function(e){t.member_card_status=e},expression:"member_card_status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1),1==t.member_card_status?n("FormItem",{attrs:{label:"付费会员价展示："}},[n("i-switch",{attrs:{size:"large","true-value":1,"false-value":0},model:{value:t.svip_price_status,callback:function(e){t.svip_price_status=e},expression:"svip_price_status"}},[n("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),n("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1):t._e()],1),n("Col",{staticClass:"mt10",attrs:{span:"24"}},[n("FormItem",[n("div",{staticClass:"subBtn",staticStyle:{"margin-top":"0px"},on:{click:function(e){return t.handleSubmit("svip")}}},[t._v("\n                  保存\n                ")])])],1)],1)],1)],1)],1)],1),n("Modal",{attrs:{width:"960px",scrollable:"","footer-hide":"",closable:"",title:"上传用户图片","mask-closable":!1,"z-index":1},model:{value:t.modalPic,callback:function(e){t.modalPic=e},expression:"modalPic"}},[t.modalPic?n("uploadPictures",{attrs:{isChoice:t.isChoice,gridBtn:t.gridBtn,gridPic:t.gridPic},on:{getPic:t.getPic}}):t._e()],1),n("Modal",{attrs:{title:"新增信息","class-name":"vertical-center-modal",scrollable:""},on:{"on-cancel":t.cancelSubmit},model:{value:t.addModel,callback:function(e){t.addModel=e},expression:"addModel"}},[n("Form",{ref:"formValidate",attrs:{model:t.formItem,rules:t.ruleValidate,"label-width":90}},[n("Row",[n("Col",[n("FormItem",{attrs:{label:"信息名称：",prop:"info"}},[n("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入信息名称"},model:{value:t.formItem.info,callback:function(e){t.$set(t.formItem,"info",e)},expression:"formItem.info"}})],1)],1),n("Col",[n("FormItem",{attrs:{label:"信息格式 ：",prop:"format"}},[n("Select",{staticStyle:{width:"300px"},model:{value:t.formItem.format,callback:function(e){t.$set(t.formItem,"format",e)},expression:"formItem.format"}},t._l(t.formatList,(function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n                "+t._s(e.label)+"\n              ")])})),1)],1)],1),n("Col",["radio"===t.formItem.format?n("FormItem",{attrs:{label:"单选项 ：",prop:"singlearr"}},[n("div",{staticClass:"arrbox"},[t._l(t.formItem.singlearr,(function(e,r){return n("Tag",{key:r,attrs:{name:e,closable:!0},on:{"on-close":t.handleClose}},[t._v("\n                "+t._s(e)+"\n              ")])})),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formItem.single,expression:"formItem.single"}],staticClass:"arrbox_ip percentage9",attrs:{placeholder:"请输入选项，回车确认"},domProps:{value:t.formItem.single},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addlabel(e)},input:function(e){e.target.composing||t.$set(t.formItem,"single",e.target.value)}}})],2)]):t._e()],1),n("Col",[n("FormItem",{attrs:{label:"提示文案：",prop:"tip"}},[n("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入提示文案"},model:{value:t.formItem.tip,callback:function(e){t.$set(t.formItem,"tip",e)},expression:"formItem.tip"}})],1)],1)],1)],1),n("div",{staticClass:"acea-row row-right",attrs:{slot:"footer"},slot:"footer"},[n("Button",{on:{click:t.cancelSubmit}},[t._v("取消")]),n("Button",{attrs:{type:"primary"},on:{click:t.addSubmit}},[t._v("提交")])],1)],1),n("coupon-list",{ref:"couponTemplates",attrs:{discount:!0},on:{getCouponList:t.getCouponList}}),n("Modal",{staticClass:"paymentFooter",attrs:{title:"商品列表",footerHide:"",scrollable:"",width:"900"},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[t.modals?n("goods-list",{ref:"goodslist",attrs:{ischeckbox:!0,isdiy:!0},on:{getProductId:t.getProductId}}):t._e()],1),n("information",{ref:"information",attrs:{listOne:t.listOne},on:{getInfoList:t.getInfoList}}),n("Modal",{staticClass:"paymentFooter",attrs:{title:"设置",width:"600",closable:!1,"mask-closable":!1,"footer-hide":""},model:{value:t.activityShow,callback:function(e){t.activityShow=e},expression:"activityShow"}},[n("Form",{ref:"activityShow",attrs:{model:t.formActive,rules:t.ruleActive,"label-width":100}},[n("FormItem",{attrs:{label:"设置活动价：",prop:"activeInput"}},[n("InputNumber",{staticClass:"inputw",attrs:{placeholder:"请输入活动价格",min:0},model:{value:t.formActive.activeInput,callback:function(e){t.$set(t.formActive,"activeInput",e)},expression:"formActive.activeInput"}})],1),n("div",{staticClass:"acea-row row-right"},[n("Button",{on:{click:function(e){return t.cancel("activityShow")}}},[t._v("取消")]),n("Button",{staticClass:"ml15 mr5",attrs:{type:"primary"},on:{click:function(e){return t.ok("activityShow")}}},[t._v("提交")])],1)],1)],1)],1)}),[],!1,null,"b2a9479a",null));e.default=v.exports},c24f:function(t,e,n){"use strict";n.d(e,"ab",(function(){return s})),n.d(e,"N",(function(){return a})),n.d(e,"M",(function(){return i})),n.d(e,"k",(function(){return o})),n.d(e,"r",(function(){return l})),n.d(e,"d",(function(){return c})),n.d(e,"h",(function(){return u})),n.d(e,"g",(function(){return m})),n.d(e,"q",(function(){return d})),n.d(e,"s",(function(){return p})),n.d(e,"J",(function(){return f})),n.d(e,"P",(function(){return _})),n.d(e,"L",(function(){return v})),n.d(e,"K",(function(){return h})),n.d(e,"f",(function(){return g})),n.d(e,"e",(function(){return b})),n.d(e,"n",(function(){return w})),n.d(e,"S",(function(){return y})),n.d(e,"p",(function(){return C})),n.d(e,"Q",(function(){return x})),n.d(e,"fb",(function(){return F})),n.d(e,"X",(function(){return k})),n.d(e,"V",(function(){return O})),n.d(e,"W",(function(){return I})),n.d(e,"Z",(function(){return j})),n.d(e,"Y",(function(){return S})),n.d(e,"bb",(function(){return $})),n.d(e,"v",(function(){return P})),n.d(e,"w",(function(){return V})),n.d(e,"cb",(function(){return E})),n.d(e,"i",(function(){return T})),n.d(e,"eb",(function(){return D})),n.d(e,"C",(function(){return A})),n.d(e,"gb",(function(){return q})),n.d(e,"m",(function(){return M})),n.d(e,"db",(function(){return N})),n.d(e,"F",(function(){return z})),n.d(e,"B",(function(){return R})),n.d(e,"A",(function(){return W})),n.d(e,"z",(function(){return B})),n.d(e,"D",(function(){return L})),n.d(e,"y",(function(){return U})),n.d(e,"x",(function(){return G})),n.d(e,"u",(function(){return H})),n.d(e,"t",(function(){return J})),n.d(e,"o",(function(){return Y})),n.d(e,"l",(function(){return K})),n.d(e,"G",(function(){return Q})),n.d(e,"I",(function(){return X})),n.d(e,"hb",(function(){return Z})),n.d(e,"O",(function(){return tt})),n.d(e,"E",(function(){return et})),n.d(e,"b",(function(){return nt})),n.d(e,"a",(function(){return rt})),n.d(e,"ib",(function(){return st})),n.d(e,"j",(function(){return at})),n.d(e,"c",(function(){return it})),n.d(e,"H",(function(){return ot})),n.d(e,"T",(function(){return lt})),n.d(e,"U",(function(){return ct})),n.d(e,"R",(function(){return ut}));var r=n("b6bd");function s(t){return Object(r.a)({url:"user/user",method:"get",params:t})}function a(t){return Object(r.a)({url:"setting/config/user/".concat(t),method:"get"})}function i(t,e){return Object(r.a)({url:"setting/config/user/".concat(t),method:"post",data:e})}function o(t){return Object(r.a)({url:"user/user/".concat(t,"/edit"),method:"get"})}function l(t){return Object(r.a)({url:"user/set_status/".concat(t.status,"/").concat(t.id),method:"put"})}function c(t){return Object(r.a)({url:"marketing/coupon/grant",method:"get",params:t})}function u(t){return Object(r.a)({url:"user/edit_other/".concat(t),method:"get"})}function m(t){return Object(r.a)({url:"user/user/".concat(t),method:"get"})}function d(t){return Object(r.a)({url:"user/one_info/".concat(t.id),method:"get",params:t.datas})}function p(t){return Object(r.a)({url:"user/user_level/vip_list",method:"get",params:t})}function f(t){return Object(r.a)({url:"user/user_level/set_show/".concat(t.id,"/").concat(t.is_show),method:"PUT"})}function _(t,e){return Object(r.a)({url:"user/user_level/task/".concat(t),method:"get",params:e})}function v(t){return Object(r.a)({url:"user/user_level/set_task_show/".concat(t.id,"/").concat(t.is_show),method:"PUT"})}function h(t){return Object(r.a)({url:"user/user_level/set_task_must/".concat(t.id,"/").concat(t.is_must),method:"PUT"})}function g(t){return Object(r.a)({url:"/user/user_level/create_task",method:"get",params:t})}function b(t){return Object(r.a)({url:"user/user_level/create",method:"get",params:t})}function w(t){return Object(r.a)({url:"user/give_level/".concat(t),method:"get"})}function y(t){return Object(r.a)({url:"user/user_group/list",method:"get",params:t})}function C(t){return Object(r.a)({url:"user/user_group/add/".concat(t),method:"get"})}function x(t){return Object(r.a)({url:"setting/update_admin",method:"PUT",data:t})}function F(t){return Object(r.a)({url:"user/set_group",method:"post",data:t})}function k(t){return Object(r.a)({url:"user/user_label",method:"get",params:t})}function O(t,e){return Object(r.a)({url:"user/user_label/add/".concat(t),method:"get",params:e})}function I(t){return Object(r.a)({url:"user/user_label_cate/all",method:"get",params:t})}function j(t){return Object(r.a)({url:"user/user_label_cate/".concat(t,"/edit"),method:"get"})}function S(t){return Object(r.a)({url:"user/user_label_cate/create",method:"get"})}function $(t){return Object(r.a)({url:"/user/member_batch/index",method:"get",params:t})}function P(t,e){return Object(r.a)({url:"/user/member_batch/save/".concat(t),method:"post",data:e})}function V(t,e){return Object(r.a)({url:"/user/member_batch/set_value/".concat(t),method:"get",params:e})}function E(t,e){return Object(r.a)({url:"/user/member_card/index/".concat(t),method:"get",params:e})}function T(t,e){return Object(r.a)({url:"/export/memberCard/".concat(t),method:"get",params:e})}function D(){return Object(r.a)({url:"/user/member/ship",method:"get"})}function A(t,e){return Object(r.a)({url:"/user/member_ship/save/".concat(t),method:"post",data:e})}function q(){return Object(r.a)({url:"/user/user/syncUsers",method:"get"})}function M(){return Object(r.a)({url:"/user/user/create",method:"get"})}function N(){return Object(r.a)({url:"/user/member_scan",method:"get"})}function z(t,e){return Object(r.a)({url:"user/label/".concat(t),method:"post",data:e})}function R(t){return Object(r.a)({url:"user/member_right/save/".concat(t.id),method:"post",data:t})}function W(){return Object(r.a)({url:"user/member/right",method:"get"})}function B(t){return Object(r.a)({url:"/user/member/record",method:"get",params:t})}function L(){return Object(r.a)({url:"user/member/ship_select",method:"get"})}function U(t){return Object(r.a)({url:"user/member_card/set_status",method:"get",params:t})}function G(t){return Object(r.a)({url:"user/member_ship/set_ship_status",method:"get",params:t})}function H(t,e){return Object(r.a)({url:"user/member_agreement/save/".concat(t),method:"post",data:e})}function J(){return Object(r.a)({url:"user/member/agreement",method:"get"})}function Y(t){return Object(r.a)({url:"user/give_level_time/".concat(t),method:"get"})}function K(t){return Object(r.a)({url:"user/label/".concat(t),method:"get"})}function Q(t){return Object(r.a)({url:"user/save_set_label",method:"put",data:t})}function X(t){return Object(r.a)({url:"setting/info",method:"get"})}function Z(t){return Object(r.a)({url:"user/visit_list/".concat(t.id),method:"get",params:t.datas})}function tt(t){return Object(r.a)({url:"user/spread_list/".concat(t.id),method:"get",params:t.datas})}function et(t){return Object(r.a)({url:"user/user/".concat(t.uid),method:"put",data:t})}function nt(t,e){return Object(r.a)({url:"agent/set_agent_agreement/".concat(t),method:"post",data:e})}function rt(){return Object(r.a)({url:"agent/get_agent_agreement",method:"get"})}function st(){return Object(r.a)({url:"user/synchro/work/label",method:"get"})}function at(t){return Object(r.a)({url:"user/user/extend_info/".concat(t),method:"get"})}function it(t){return Object(r.a)({url:"user/batch_process",method:"post",data:t})}function ot(t,e){return Object(r.a)({url:"/user/member/save/content/".concat(t),method:"post",data:e})}function lt(t){return Object(r.a)({url:"/user/import_user",method:"post",data:t})}function ct(t){return Object(r.a)({url:"user/import_user/list",method:"get",params:t})}function ut(t){return Object(r.a)({url:"export/importUserExport",method:"get",params:t})}},df20:function(t,e,n){"use strict";var r=n("26b6");n.n(r).a},e449:function(t,e,n){"use strict";var r=n("b7be"),s=n("61f7");function a(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var o={name:"index",filters:{formatDate:function(t){if(0!==t){var e=new Date(1e3*t);return Object(s.a)(e,"yyyy-MM-dd hh:mm")}}},props:{couponids:{type:Array},updateIds:{type:Array},updateName:{type:Array},luckDraw:{type:Boolean,default:!1},discount:{type:Boolean,default:!1}},data:function(){return{currentid:0,productRow:{},isTemplate:!1,loading:!1,tableFrom:{type:"send",receive_type:3,page:1,limit:10},total:0,ids:[],texts:[],columns:[{title:"ID",key:"id",width:60},{title:"优惠券名称",key:"title",minWidth:150},{title:"适用类型",slot:"type",minWidth:80},{title:"面值",slot:"coupon_price",minWidth:100},{title:"最低消费额",key:"use_min_price",minWidth:100},{title:"发布数量",slot:"count",minWidth:120},{title:"有效期限",slot:"start_time",minWidth:120},{title:"状态",slot:"status",minWidth:80}],couponList:[],selectedIds:new Set,selectedNames:new Set,couponVal:[]}},mounted:function(){},watch:{updateIds:function(t){this.selectedIds=new Set(t)},updateName:function(t){this.selectedNames=new Set(t)}},created:function(){var t=this,e={width:60,align:"center",render:function(e,n){var r=n.row.id,s=!1;s=t.currentid===r;var a=t;return e("div",[e("Radio",{props:{value:s},on:{"on-change":function(){a.currentid=r,t.productRow=n.row}}})])}};this.luckDraw?this.columns.unshift(e):this.columns.unshift({type:"selection",width:60,align:"center"})},methods:{unique:function(t){var e=new Map;return t.filter((function(t){return!e.has(t.id)&&e.set(t.id,1)}))},changeCheckbox:function(t){this.couponVal=t},handleSelectAll:function(t){var e=this;if(!this.discount){if(0===t.length){var n=this;n.$refs.table.data.forEach((function(t){if(n.selectedIds.has(t.id)){n.selectedIds.delete(t.id);var e=n.unique(Array.from(n.selectedNames));n.unique(Array.from(n.selectedNames)).forEach((function(n,r){n.id===t.id&&e.splice(r,1)})),n.selectedNames=new Set(e)}}))}else t.forEach((function(t){e.selectedIds.add(t.id),e.selectedNames.add({id:t.id,title:t.title})}));this.$nextTick((function(){e.setChecked()}))}},handleSelectRow:function(t,e){var n=this;this.discount||(this.selectedIds.add(e.id),this.selectedNames.add({id:e.id,title:e.title}),this.$nextTick((function(){n.setChecked()})))},handleCancelRow:function(t,e){var n=this;if(!this.discount){this.selectedIds.delete(e.id);var r=Array.from(this.selectedNames);Array.from(this.selectedNames).forEach((function(t,n){t.id===e.id&&r.splice(n,1)})),this.selectedNames=new Set(r),this.$nextTick((function(){n.setChecked()}))}},setChecked:function(){this.ids=a(this.selectedIds),this.texts=a(this.selectedNames);var t=this.$refs.table.objData;for(var e in t)this.selectedIds.has(t[e].id)&&(t[e]._isChecked=!0)},cancel:function(){this.isTemplate=!1,this.luckDraw&&(this.currentid=0)},tableList:function(){var t=this;this.loading=!0,Object(r.db)(this.tableFrom).then((function(e){var n=e.data;t.couponList=n.list,t.discount||t.$nextTick((function(){t.setChecked()})),t.total=n.count,t.loading=!1}))},ok:function(){this.luckDraw?(this.$emit("getCouponId",this.productRow),this.currentid=0):this.discount?this.$emit("getCouponList",this.couponVal):this.$emit("nameId",this.ids,this.texts)},receivePageChange:function(t){this.tableFrom.page=t,this.tableList()}}},l=n("2877"),c=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Modal",{attrs:{title:"优惠券列表",width:"60%"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.isTemplate,callback:function(e){t.isTemplate=e},expression:"isTemplate"}},[n("Table",{ref:"table",staticClass:"mt25",attrs:{columns:t.columns,data:t.couponList,loading:t.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},on:{"on-select":t.handleSelectRow,"on-select-cancel":t.handleCancelRow,"on-select-all":t.handleSelectAll,"on-select-all-cancel":t.handleSelectAll,"on-selection-change":t.changeCheckbox},scopedSlots:t._u([{key:"coupon_price",fn:function(e){var r=e.row;return[1==r.coupon_type?n("span",[t._v(t._s(r.coupon_price)+"元")]):t._e(),2==r.coupon_type?n("span",[t._v(t._s(parseFloat(r.coupon_price)/10)+"折（"+t._s(r.coupon_price.toString().split(".")[0])+"%）")]):t._e()]}},{key:"count",fn:function(e){var r=e.row;return e.index,[r.is_permanent?n("span",[t._v("不限量")]):n("div",[n("span",{staticClass:"fa"},[t._v("发布："+t._s(r.total_count))]),n("span",{staticClass:"sheng"},[t._v("剩余："+t._s(r.remain_count))])])]}},{key:"start_time",fn:function(e){var r=e.row;return e.index,[r.start_time?n("div",[t._v("\n                        "+t._s(t._f("formatDate")(r.start_time))+" - "+t._s(t._f("formatDate")(r.end_time))+"\n                    ")]):n("span",[t._v("不限时")])]}},{key:"type",fn:function(e){var r=e.row;return[1===r.type?n("span",[t._v("品类券")]):2===r.type?n("span",[t._v("商品券")]):3===r.type?n("span",[t._v("会员券")]):n("span",[t._v("通用券")])]}},{key:"status",fn:function(e){var r=e.row;return e.index,[n("Tag",{directives:[{name:"show",rawName:"v-show",value:1===r.status,expression:"row.status===1"}],attrs:{color:"blue"}},[t._v("正常")]),n("Tag",{directives:[{name:"show",rawName:"v-show",value:0===r.status,expression:"row.status===0"}],attrs:{color:"gold"}},[t._v("未开启")]),n("Tag",{directives:[{name:"show",rawName:"v-show",value:-1===r.status,expression:"row.status=== -1"}],attrs:{color:"red"}},[t._v("已失效")])]}}])}),n("div",{staticClass:"acea-row row-right page"},[n("Page",{attrs:{total:t.total,"show-elevator":"","show-total":"","page-size":t.tableFrom.limit},on:{"on-change":t.receivePageChange}})],1)],1)],1)}),[],!1,null,"d0db60f2",null);e.a=c.exports},e951:function(t,e,n){"use strict";var r=n("4e4f");n.n(r).a}}]);