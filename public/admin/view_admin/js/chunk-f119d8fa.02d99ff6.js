(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f119d8fa","chunk-9aedef0a","chunk-9560c5a2","chunk-2d0bd5d4"],{"023d":function(t,e,r){},"0619":function(t,e,r){},"0622":function(t,e,r){"use strict";var n=r("095f");r.n(n).a},"069a":function(t,e,r){},"0900":function(t,e,r){"use strict";var n=r("1265");r.n(n).a},"095f":function(t,e,r){},"0a16":function(t,e,r){},"0a1e":function(t,e,r){},"0f0e":function(t,e,r){"use strict";var n=r("c4c8"),a={name:"userLabel",props:{},data:function(){return{labelList:[],dataLabel:[],isUser:!1}},mounted:function(){},methods:{inArray:function(t,e){for(var r in e)if(e[r].id==t)return!0;return!1},userLabel:function(t){var e=this;this.dataLabel=t,Object(n.rb)().then((function(t){t.data.map((function(t){t.children&&t.children.length&&(e.isUser=!0,t.children.map((function(t){e.inArray(t.id,e.dataLabel)?t.disabled=!0:t.disabled=!1})))})),e.labelList=t.data})).catch((function(t){e.$Message.error(t.msg)}))},selectLabel:function(t){if(t.disabled){var e=this.dataLabel.indexOf(this.dataLabel.filter((function(e){return e.id==t.id}))[0]);this.dataLabel.splice(e,1),t.disabled=!1}else this.dataLabel.push({label_name:t.label_name,id:t.id,tag_id:t.tag_id}),t.disabled=!0},subBtn:function(){this.$emit("activeData",JSON.parse(JSON.stringify(this.dataLabel)))},cancel:function(){this.$emit("close")}}},i=(r("b0ee"),r("2877")),o=Object(i.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"label-wrapper"},[r("div",{staticClass:"list-box"},[t._l(t.labelList,(function(e,n){return r("div",{directives:[{name:"show",rawName:"v-show",value:t.isUser,expression:"isUser"}],key:n,staticClass:"label-box"},[e.children&&e.children.length?r("div",{staticClass:"title"},[t._v("\n        "+t._s(e.label_name)+"\n      ")]):t._e(),e.children&&e.children.length?r("div",{staticClass:"list"},t._l(e.children,(function(e,n){return r("div",{key:n,staticClass:"label-item",class:{on:e.disabled},on:{click:function(r){return t.selectLabel(e)}}},[t._v("\n          "+t._s(e.label_name)+"\n        ")])})),0):t._e()])})),t.isUser?t._e():r("div",[t._v("暂无标签")])],2),r("div",{staticClass:"footer"},[r("Button",{on:{click:t.cancel}},[t._v("取消")]),r("Button",{staticClass:"ml14",attrs:{type:"primary"},on:{click:t.subBtn}},[t._v("确定")])],1)])}),[],!1,null,"3b9d7c98",null);e.a=o.exports},"0fc4":function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return i}));var n=r("b6bd");function a(){return Object(n.a)({url:"erp/config",method:"get"})}function i(t){return Object(n.a)({url:"product/import_erp_product",method:"post",data:t})}},1265:function(t,e,r){},2711:function(t,e,r){},"2c4a":function(t,e,r){"use strict";r.r(e);var n=r("f8b7"),a=r("2f62"),i=r("2e83");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(){s=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),s=new $(n||[]);return a(o,"_invoke",{value:j(t,r,s)}),o}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var m="suspendedStart",h="suspendedYield",v="executing",_="completed",y={};function g(){}function b(){}function w(){}var x={};d(x,c,(function(){return this}));var I=Object.getPrototypeOf,k=I&&I(I(T([])));k&&k!==r&&n.call(k,c)&&(x=k);var C=w.prototype=g.prototype=Object.create(x);function O(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function r(a,i,s,c){var l=p(t[a],t,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==o(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(d).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,c)}))}c(l.arg)}var i;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return i=i?i.then(a,a):a()}})}function j(e,r,n){var a=m;return function(i,o){if(a===v)throw Error("Generator is already running");if(a===_){if("throw"===i)throw o;return{value:t,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var c=L(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=v;var l=p(e,r,n);if("normal"===l.type){if(a=n.done?_:h,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=_,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=p(a,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(o(e)+" is not iterable")}return b.prototype=w,a(C,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,d(t,u,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},O(D.prototype),d(D.prototype,l,(function(){return this})),e.AsyncIterator=D,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new D(f(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(C),d(C,u,"Generator"),d(C,c,(function(){return this})),d(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function c(t,e,r,n,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f={data:function(){return{modal:!1,columns1:[{title:"ID",key:"id"},{title:"操作时间",key:"add_time"},{title:"发货单数",key:"total_num"},{title:"成功发货单数",key:"success_num"},{title:"发货类型",key:"title"},{title:"状态",key:"status_cn"},{title:"操作",slot:"action",width:150,align:"center"}],data1:[],page1:{total:0,pageNum:1,pageSize:10},formValidate:{type:"",status:"",data:""},options:{shortcuts:[{text:"今天",value:function(){var t=new Date,e=new Date;return e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate())),[e,t]}},{text:"昨天",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1))),[e,t]}},{text:"最近7天",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-6))),[e,t]}},{text:"最近30天",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-29))),[e,t]}},{text:"上月",value:function(){var t=new Date,e=new Date,r=new Date(e.getFullYear(),e.getMonth(),0).getDate();return e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth()-1,1))),t.setTime(t.setTime(new Date((new Date).getFullYear(),(new Date).getMonth()-1,r))),[e,t]}},{text:"本月",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),(new Date).getMonth(),1))),[e,t]}},{text:"本年",value:function(){var t=new Date,e=new Date;return e.setTime(e.setTime(new Date((new Date).getFullYear(),0,1))),[e,t]}}]},timeVal:[],typeList:[{label:"批量删除订单",value:"6"},{label:"批量手动发货",value:"7"},{label:"批量打印电子面单",value:"8"},{label:"批量配送",value:"9"},{label:"批量虚拟发货",value:"10"}],statusList:[{label:"未处理",value:"0"},{label:"处理中",value:"1"},{label:"已完成",value:"2"},{label:"处理失败",value:"3"}],columns2:[{title:"订单ID",key:"order_id"},{title:"物流公司",key:"delivery_name"},{title:"物流单号",key:"delivery_id"},{title:"处理状态",key:"status_cn"},{title:"异常原因",key:"error"}],columns3:[{title:"订单ID",key:"order_id"},{title:"备注",key:"fictitious_content"},{title:"处理状态",key:"status_cn"},{title:"异常原因",key:"error"}],columns5:[{title:"订单ID",key:"order_id"},{title:"配送员",key:"delivery_name"},{title:"配送员电话",key:"delivery_id"},{title:"处理状态",key:"status_cn"},{title:"异常原因",key:"error"}],columns4:[],data2:[],page2:{total:0,pageNum:1,pageSize:12},modal1:!1,deliveryLog:null,deliveryLogId:0,deliveryLogType:"",loading:!1,loading2:!1}},computed:u(u({},Object(a.e)("admin/layout",["isMobile"])),{},{labelWidth:function(){return this.isMobile?void 0:96},labelPosition:function(){return this.isMobile?"top":"right"}}),created:function(){this.getQueue()},methods:{getQueue:function(){var t=this,e={page:this.page1.pageNum,limit:this.page1.pageSize};this.formValidate.status&&(e.status=this.formValidate.status),this.formValidate.type&&(e.type=this.formValidate.type),this.formValidate.data&&(e.data=this.formValidate.data),this.loading=!0,Object(n.V)(e).then((function(e){t.loading=!1,t.data1=e.data.list,t.page1.total=e.data.count})).catch((function(e){t.loading=!1}))},pageChange:function(t){this.page1.pageNum=t,this.getQueue()},pageChange2:function(t){this.page2.pageNum=t,this.getDeliveryLog()},limitChange:function(t){this.page1.pageSize=t,this.getQueue()},limitChange2:function(t){this.page2.pageSize=t,this.getDeliveryLog()},onchangeTime:function(t){this.timeVal=t,this.formValidate.data=this.timeVal[0]?this.timeVal.join("-"):"",this.page1.pageNum=1,this.getQueue()},typeSearchs:function(){this.page1.pageNum=1,this.getQueue()},statusSearchs:function(){this.page1.pageNum=1,this.getQueue()},getDeliveryLog:function(){var t=this;this.loading2=!0,Object(n.c)(this.deliveryLogId,this.deliveryLogType,{page:this.page2.pageNum,limit:this.page2.pageSize}).then((function(e){t.loading2=!1,t.data2=e.data.list,t.page2.total=e.data.count})).catch((function(e){t.loading2=!1}))},deliveryLook:function(t){switch(this.modal1=!0,this.deliveryLogId=t.id,this.deliveryLogType=t.cache_type,this.deliveryLog=t,t.type){case 7:case 8:this.columns4=this.columns2;break;case 9:this.columns4=this.columns5;break;case 10:this.columns4=this.columns3}this.getDeliveryLog()},changeMenu:function(t,e){var r=this;switch(e){case"1":this.exports(t.id,t.type,t.cache_type);break;case"2":this.queueAgain(t.id,t.type);break;case"3":this.$Modal.confirm({title:"谨慎操作",content:"<p>确认停止该任务？</p>",onOk:function(){r.stopQueue(t.id)}});break;case"4":this.queueDel(t.id,t.type)}},exports:function(t,e,r){var n,a=this;return(n=s().mark((function n(){var o,c,l,u,d;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=[],c=[],l=[],u="",n.next=3,a.getExcelData(t,e,r);case 3:d=n.sent,u||(u=d.filename),c.length||(c=d.filekey),o.length||(o=d.header),l=d.export,Object(i.a)(o,c,u,l);case 9:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(r,a){var i=n.apply(t,e);function o(t){c(i,r,a,o,s,"next",t)}function s(t){c(i,r,a,o,s,"throw",t)}o(void 0)}))})()},getExcelData:function(t,e,r){return new Promise((function(a,i){Object(n.a)(t,e,r).then((function(t){return a(t.data)}))}))},queueAgain:function(t,e){var r=this;Object(n.T)(t,e).then((function(t){r.$Message.success(t.msg),r.getQueue()})).catch((function(t){r.$Message.error(t.msg)}))},queueDel:function(t,e){var r=this;Object(n.U)(t,e).then((function(t){r.$Message.success(t.msg),r.getQueue()})).catch((function(t){r.$Message.error(t.msg)}))},stopQueue:function(t){var e=this;Object(n.db)(t).then((function(t){e.$Message.success(t.msg),e.getQueue()})).catch((function(t){e.$Message.error(t.msg)}))}}},p=r("2877"),m=Object(p.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{attrs:{title:"任务列表",width:"1000","footer-hide":"","class-name":"vertical-center-modal"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[t.modal?r("Card",{attrs:{bordered:!1,"dis-hover":""}},[r("Form",{ref:"formValidate",staticClass:"tabform",attrs:{inline:"",model:t.formValidate,"label-width":t.labelWidth,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[r("FormItem",{attrs:{label:"操作时间："}},[r("DatePicker",{staticClass:"width20",attrs:{editable:!1,value:t.timeVal,format:"yyyy/MM/dd",type:"datetimerange",placement:"bottom-start",placeholder:"自定义时间",options:t.options},on:{"on-change":t.onchangeTime}})],1),r("FormItem",{attrs:{label:"类型："}},[r("Select",{staticClass:"width20",attrs:{clearable:""},on:{"on-change":t.typeSearchs},model:{value:t.formValidate.type,callback:function(e){t.$set(t.formValidate,"type",e)},expression:"formValidate.type"}},t._l(t.typeList,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),r("FormItem",{attrs:{label:"状态："}},[r("Select",{staticClass:"width20",attrs:{clearable:""},on:{"on-change":t.statusSearchs},model:{value:t.formValidate.status,callback:function(e){t.$set(t.formValidate,"status",e)},expression:"formValidate.status"}},t._l(t.statusList,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),r("Table",{staticClass:"mt25",attrs:{height:"500",columns:t.columns1,data:t.data1,loading:t.loading},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.row;return e.index,[n.is_show_log?[r("a",{on:{click:function(e){return t.deliveryLook(n)}}},[t._v("查看")]),r("Divider",{attrs:{type:"vertical"}})]:t._e(),[r("Dropdown",{on:{"on-click":function(e){return t.changeMenu(n,e)}}},[r("a",[t._v("更多"),r("Icon",{attrs:{type:"ios-arrow-down"}})],1),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[[7,8,9,10].includes(n.type)?r("DropdownItem",{attrs:{name:"1"}},[t._v("下载")]):t._e(),1==n.status?r("DropdownItem",{attrs:{name:"2"}},[t._v("重新执行")]):t._e(),n.is_stop_button?r("DropdownItem",{attrs:{name:"3"}},[t._v("停止任务")]):t._e(),r("DropdownItem",{attrs:{name:"4"}},[t._v("清除任务")])],1)],1)]]}}],null,!1,2501981875)}),r("div",{staticClass:"acea-row row-right page"},[r("Page",{attrs:{total:t.page1.total,current:t.page1.pageNum,"show-elevator":"","show-total":"","page-size":t.page1.pageSize,"show-sizer":""},on:{"on-change":t.pageChange,"on-page-size-change":t.limitChange}})],1)],1):t._e(),r("Modal",{attrs:{width:"900","footer-hide":""},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[r("Table",{staticClass:"mt25",attrs:{height:"500",columns:t.columns4,data:t.data2,loading:t.loading2}}),r("div",{staticClass:"acea-row row-right page"},[r("Page",{attrs:{total:t.page2.total,current:t.page2.pageNum,"show-elevator":"","show-total":""},on:{"on-change":t.pageChange2}})],1)],1)],1)}),[],!1,null,null,null);e.default=m.exports},3093:function(t,e,r){"use strict";var n=r("aed0");r.n(n).a},"30a5":function(t,e,r){t.exports=r.p+"view_admin/img/svip-user.b89bb400.png"},"31b4":function(t,e,r){"use strict";var n=r("9860"),a=r.n(n),i=r("b6bd"),o=r("2f62");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u={name:"edit",components:{formCreate:a.a.$form()},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(o.e)("admin/userLevel",["taskId","levelId"])),props:{FromData:{type:Object,default:null},userEdit:{type:Number,default:0}},data:function(){return{modals:!1,type:0,config:{global:{upload:{props:{onSuccess:function(t,e){200===t.status?e.url=t.data.src:this.Message.error(t.msg)}}}}},isDisable:!1}},methods:{couponsType:function(){this.$parent.addType(this.type)},onSubmit:function(t){var e,r=this;(setTimeout((function(){r.isDisable=!1}),1e3),this.isDisable)||(this.isDisable=!0,e=t,Object(i.a)({url:this.FromData.action,method:this.FromData.method,data:e}).then((function(t){r.$parent.getList(),r.$Message.success(t.msg),r.modals=!1,setTimeout((function(){r.$emit("submitFail")}),1e3)})).catch((function(t){r.$Message.error(t.msg)})))},cancel:function(){this.type=0}}},d=(r("bddf"),r("2877")),f=Object(d.a)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.FromData?r("div",[r("Modal",{class:t.userEdit?"userEdit":"",attrs:{scrollable:"","footer-hide":"",closable:"",title:t.FromData.title,width:"700"},on:{"on-cancel":t.cancel},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[["/marketing/coupon/save.html"===t.FromData.action?r("div",{staticClass:"radio acea-row row-middle"},[r("div",{staticClass:"name ivu-form-item-content"},[t._v("优惠券类型")]),r("Radio-group",{on:{"on-change":t.couponsType},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[r("Radio",{attrs:{label:0}},[t._v("通用券")]),r("Radio",{attrs:{label:1}},[t._v("品类券")]),r("Radio",{attrs:{label:2}},[t._v("商品券")])],1)],1):t._e()],r("form-create",{ref:"fc",staticClass:"formBox",attrs:{option:t.config,rule:Array.from(t.FromData.rules),handleIcon:"false"},on:{"on-submit":t.onSubmit}})],2)],1):t._e()}),[],!1,null,"2850396f",null);e.a=f.exports},"388a":function(t,e,r){},"3cb6":function(t,e,r){},"545a":function(t,e,r){"use strict";var n=r("069a");r.n(n).a},5972:function(t,e,r){"use strict";var n=r("7b89");r.n(n).a},"5c3ac":function(t,e,r){"use strict";r.r(e);var n=r("a584"),a=r("2f62"),i=r("f8b7"),o=r("73f5"),s=r("a6b9");function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(){l=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),s=new $(n||[]);return a(o,"_invoke",{value:j(t,r,s)}),o}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var m="suspendedStart",h="suspendedYield",v="executing",_="completed",y={};function g(){}function b(){}function w(){}var x={};d(x,o,(function(){return this}));var I=Object.getPrototypeOf,k=I&&I(I(T([])));k&&k!==r&&n.call(k,o)&&(x=k);var C=w.prototype=g.prototype=Object.create(x);function O(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function r(a,i,o,s){var l=p(t[a],t,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==c(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(d).then((function(t){u.value=t,o(u)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}var i;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return i=i?i.then(a,a):a()}})}function j(e,r,n){var a=m;return function(i,o){if(a===v)throw Error("Generator is already running");if(a===_){if("throw"===i)throw o;return{value:t,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var c=L(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=v;var l=p(e,r,n);if("normal"===l.type){if(a=n.done?_:h,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=_,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=p(a,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(c(e)+" is not iterable")}return b.prototype=w,a(C,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,d(t,u,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},O(D.prototype),d(D.prototype,s,(function(){return this})),e.AsyncIterator=D,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new D(f(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(C),d(C,u,"Generator"),d(C,o,(function(){return this})),d(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function u(t,e,r,n,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function d(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){u(i,n,a,o,s,"next",t)}function s(t){u(i,n,a,o,s,"throw",t)}o(void 0)}))}}var f={name:"orderSend",props:{isAll:{type:Number|String,default:0},ids:{type:Array,default:function(){return[]}},where:{type:Object,default:function(){return{}}},selectArr:{type:Array,default:function(){return[]}}},data:function(){return{formItem:{type:"1",express_record_type:"2",delivery_name:"",delivery_id:"",express_temp_id:"",to_name:"",to_tel:"",to_addr:"",sh_delivery:"",fictitious_content:""},modals:!1,express:[],expressTemp:[],deliveryList:[],temp:{},export_open:!0}},watch:{"formItem.express_temp_id":function(t){}},methods:{changeRadio:function(t){switch(this.$refs.formItem.resetFields(),t){case"1":this.formItem.delivery_name="",this.formItem.delivery_id="",this.formItem.express_temp_id="",this.formItem.express_record_type="2",this.expressTemp=[];break;case"2":this.formItem.sh_delivery="",this.formItem.express_record_type="1";break;case"3":this.formItem.fictitious_content="",this.formItem.express_record_type="1"}},changeExpress:function(t){switch(t){case"2":this.formItem.delivery_name="",this.formItem.express_temp_id="",this.expressTemp=[];break;case"1":this.formItem.delivery_name="",this.formItem.delivery_id=""}},reset:function(){this.formItem={type:"1",express_record_type:"2",delivery_name:"",delivery_id:"",express_temp_id:"",to_name:"",to_tel:"",to_addr:"",sh_delivery:"",fictitious_content:""}},getList:function(){var t=this;Object(i.k)(1).then(function(){var e=d(l().mark((function e(r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.express=r.data,t.getSheetInfo();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))},putSend:function(t){var e=this,r=Object.assign(this.formItem);if(r.ids=this.selectArr,1==this.isAll?(r.all=1,r.where=this.where):0==this.isAll&&(r.all=0),"1"===this.formItem.type){if(""===this.formItem.delivery_name)return this.$Message.error("快递公司不能为空");if(""===this.formItem.express_temp_id)return this.$Message.error("电子面单不能为空");if(""===this.formItem.to_name)return this.$Message.error("寄件人姓名不能为空");if(""===this.formItem.to_tel)return this.$Message.error("寄件人电话不能为空");if(!/^1(3|4|5|7|8|9|6)\d{9}$/i.test(this.formItem.to_tel))return this.$Message.error("请输入正确的手机号码");if(""===this.formItem.to_addr)return this.$Message.error("寄件人地址不能为空")}if("2"===this.formItem.type&&(this.formItem.express_temp_id&&(this.formItem.express_temp_id=""),""===this.formItem.sh_delivery))return this.$Message.error("送货人不能为空");Object(i.L)(r).then(function(){var t=d(l().mark((function t(r){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.modals=!1,e.$Message.success(r.msg),e.reset();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg),e.modals=!1}))},cancel:function(t){this.modals=!1,this.reset()},expressChange:function(t){var e=this,r=this.express.find((function(e){return e.value===t}));r&&(this.formItem.delivery_code=r.code,"1"===this.formItem.type&&(this.expressTemp=[],this.formItem.express_temp_id="",Object(i.z)({com:this.formItem.delivery_code}).then((function(t){e.expressTemp=t.data,t.data.length||e.$Message.error("请配置你所选快递公司的电子面单")})).catch((function(t){e.$Message.error(t.msg)}))))},getDeliveryList:function(){var t=this;Object(i.x)().then((function(e){t.deliveryList=e.data.list})).catch((function(e){t.$Message.error(e.msg)}))},getSheetInfo:function(){var t=this;Object(i.J)().then((function(e){var r=e.data;for(var n in r)r.hasOwnProperty(n)&&"express_temp_id"!==n&&(t.formItem[n]=r[n]);t.export_open=void 0===r.export_open||r.export_open,t.export_open||(t.formItem.express_record_type="1"),t.formItem.to_addr=r.to_add})).catch((function(e){t.$Message.error(e.msg)}))},shDeliveryChange:function(t){var e=this.deliveryList.find((function(e){return e.id===t}));this.formItem.sh_delivery_name=e.wx_name,this.formItem.sh_delivery_id=e.phone,this.formItem.sh_delivery_uid=e.uid},expressTempChange:function(){var t=this;this.expressTemp.forEach((function(e){t.formItem.express_temp_id===e.temp_id&&(t.temp=e)}))},preview:function(){this.$refs.viewer.$viewer.show()}}},p=(r("896e"),r("2877")),m=Object(p.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"订单发送货",closable:!1,"class-name":"vertical-center-modal"},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[r("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":100},nativeOn:{submit:function(t){t.preventDefault()}}},[r("FormItem",{attrs:{label:"选择类型："}},[r("RadioGroup",{on:{"on-change":t.changeRadio},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},[r("Radio",{attrs:{label:"1"}},[t._v("打印电子面单")]),r("Radio",{attrs:{label:"2"}},[t._v("送货")]),r("Radio",{attrs:{label:"3"}},[t._v("虚拟")])],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"1"===t.formItem.type,expression:"formItem.type === '1'"}]},[r("FormItem",{attrs:{label:"快递公司：",required:""}},[r("Select",{staticClass:"input-add",attrs:{filterable:"",placeholder:"请选择快递公司"},on:{"on-change":t.expressChange},model:{value:t.formItem.delivery_name,callback:function(e){t.$set(t.formItem,"delivery_name",e)},expression:"formItem.delivery_name"}},t._l(t.express,(function(e,n){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.value))])})),1)],1),"1"===t.formItem.type?[r("FormItem",{staticClass:"express_temp_id",attrs:{label:"电子面单：",required:""}},[r("Select",{staticClass:"input-add",attrs:{placeholder:"请选择电子面单"},on:{"on-change":t.expressTempChange},model:{value:t.formItem.express_temp_id,callback:function(e){t.$set(t.formItem,"express_temp_id",e)},expression:"formItem.express_temp_id"}},t._l(t.expressTemp,(function(e,n){return r("Option",{key:n,attrs:{value:e.temp_id}},[t._v(t._s(e.title))])})),1),t.formItem.express_temp_id?r("Button",{attrs:{type:"text"},on:{click:t.preview}},[t._v("预览")]):t._e()],1),r("FormItem",{attrs:{label:"寄件人姓名：",required:""}},[r("Input",{staticClass:"input-add",attrs:{placeholder:"请输入寄件人姓名"},model:{value:t.formItem.to_name,callback:function(e){t.$set(t.formItem,"to_name",e)},expression:"formItem.to_name"}})],1),r("FormItem",{attrs:{label:"寄件人电话：",required:""}},[r("Input",{staticClass:"input-add",attrs:{placeholder:"请输入寄件人电话"},model:{value:t.formItem.to_tel,callback:function(e){t.$set(t.formItem,"to_tel",e)},expression:"formItem.to_tel"}})],1),r("FormItem",{attrs:{label:"寄件人地址：",required:""}},[r("Input",{staticClass:"input-add",attrs:{placeholder:"请输入寄件人地址"},model:{value:t.formItem.to_addr,callback:function(e){t.$set(t.formItem,"to_addr",e)},expression:"formItem.to_addr"}})],1)]:t._e()],2),r("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.formItem.type,expression:"formItem.type === '2'"}]},[r("FormItem",{attrs:{label:"送货人：",required:""}},[r("Select",{staticClass:"input-add",attrs:{placeholder:"请选择送货人"},on:{"on-change":t.shDeliveryChange},model:{value:t.formItem.sh_delivery,callback:function(e){t.$set(t.formItem,"sh_delivery",e)},expression:"formItem.sh_delivery"}},t._l(t.deliveryList,(function(e,n){return r("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.wx_name)+"（"+t._s(e.phone)+"）")])})),1)],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"3"===t.formItem.type,expression:"formItem.type === '3'"}]},[r("FormItem",{attrs:{label:"备注："}},[r("Input",{staticClass:"input-add",attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"备注"},model:{value:t.formItem.fictitious_content,callback:function(e){t.$set(t.formItem,"fictitious_content",e)},expression:"formItem.fictitious_content"}})],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:t.cancel}},[t._v("取消")]),r("Button",{attrs:{type:"primary"},on:{click:t.putSend}},[t._v("提交")])],1),r("div",{directives:[{name:"viewer",rawName:"v-viewer"},{name:"show",rawName:"v-show",value:t.temp,expression:"temp"}],ref:"viewer"},[r("img",{staticClass:"display-add ",attrs:{src:t.temp.pic}})])],1)}),[],!1,null,"2aa20784",null).exports,h=r("2c4a"),v=r("d708"),_=r("c276"),y=r("0b65");function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(){b=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),s=new $(n||[]);return a(o,"_invoke",{value:j(t,r,s)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function w(){}var x={};l(x,o,(function(){return this}));var I=Object.getPrototypeOf,k=I&&I(I(T([])));k&&k!==r&&n.call(k,o)&&(x=k);var C=w.prototype=_.prototype=Object.create(x);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function r(a,i,o,s){var c=d(t[a],t,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==g(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(u).then((function(t){l.value=t,o(l)}),(function(t){return r("throw",t,o,s)}))}s(c.arg)}var i;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return i=i?i.then(a,a):a()}})}function j(e,r,n){var a=f;return function(i,o){if(a===m)throw Error("Generator is already running");if(a===h){if("throw"===i)throw o;return{value:t,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var c=L(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=d(e,r,n);if("normal"===l.type){if(a=n.done?h:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=h,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=d(a,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(g(e)+" is not iterable")}return y.prototype=w,a(C,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:y,configurable:!0}),y.displayName=l(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l(t,c,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},O(D.prototype),l(D.prototype,s,(function(){return this})),e.AsyncIterator=D,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new D(u(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(C),l(C,c,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function w(t,e,r,n,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){k(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function k(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==g(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var C={name:"table_from",components:{autoSend:m,queueList:h.default},props:["formSelection","isAll","orderDataStatus"],data:function(){return{currentTab:"-1",grid:{xl:7,lg:12,md:24,sm:24,xs:24},orderData:{status:"",data:"",real_name:"",field_key:"all",pay_type:"",type:"",store_id:"",supplier_id:""},modalTitleSs:"",statusType:"",time:"",value2:[],isDelIdList:[],writeOffRules:{code:[{validator:function(t,e,r){if(!e)return r(new Error("请填写核销码"));Number.isInteger(e)&&/\b\d{12}\b/.test(e)?r():r(new Error("请填写12位数字"))},trigger:"blur",required:!0}]},writeOffFrom:{code:"",confirm:0},staffData:[],supplierName:[],modals2:!1,timeVal:[],options:y.a,payList:[{label:"微信支付",val:"1"},{label:"支付宝支付",val:"4"},{label:"余额支付",val:"2"},{label:"线下支付",val:"3"}],manualModal:!1,uploadAction:"".concat(v.a.apiBaseURL,"/file/upload/1"),uploadHeaders:{},file:"",autoModal:!1,isShow:!1,recordModal:!1,sendOutValue:"",exportListOn:0,fileList:[]}},computed:I(I(I({},Object(a.e)("admin/layout",["isMobile"])),Object(a.e)("admin/order",["orderChartType","isDels","delIdList","orderType"])),{},{labelWidth:function(){return this.isMobile?void 0:96},labelPosition:function(){return this.isMobile?"top":"right"},today:function(){var t=new Date,e=new Date;return[e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate(),t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()]}}),watch:{$route:function(){"/admin/order/list?status=1"===this.$route.fullPath&&this.getPath()},orderDataStatus:function(t){this.selectChange2(t)}},created:function(){this.staffList(),this.getSupplierList(),"/admin/order/list?status=1"===this.$route.fullPath&&this.getPath(),this.$parent.$emit("add")},methods:I(I({},Object(a.d)("admin/order",["getOrderStatus","getOrderType","getOrderTime","getOrderNum","getfieldKey","getSupplier_id","getStore_id","getType_id"])),{},{getPath:function(){this.orderData.status=this.$route.query.status.toString(),this.getOrderStatus(this.orderData.status),this.$emit("getList",1),this.$emit("order-data",this.orderData)},clearTap:function(t){this.getOrderNum(t.target.value),this.$emit("order-data",this.orderData)},onchangeTime:function(t){"00:00:00"===t[1].slice(-8)?(t[1]=t[1].slice(0,-8)+"23:59:59",this.timeVal=t):this.timeVal=t,this.orderData.data=this.timeVal[0]?this.timeVal.join("-"):"",this.getOrderTime(this.orderData.data),this.$emit("getList",1),this.$emit("order-data",this.orderData)},selectChange:function(t){this.$store.dispatch("admin/order/getOrderTabs",{data:t}),this.orderData.data=t,this.getOrderTime(this.orderData.data),this.timeVal=[],this.$emit("getList"),this.$emit("order-data",this.orderData)},selectChange2:function(t){this.orderData.status=t,this.getOrderStatus(t),this.$emit("getList",1),this.$emit("order-data",this.orderData)},typeChange:function(t){this.getType_id(t),this.$emit("getList",1),this.$emit("order-data",this.orderData)},storeChange:function(t){this.getStore_id(t),this.$emit("getList",1),this.$emit("order-data",this.orderData)},supplierChange:function(t){this.getSupplier_id(t),this.$emit("getList",1)},userSearchs:function(t){this.getOrderType(t),this.$emit("getList",1)},timeChange:function(t){this.getOrderTime(t),this.$emit("getList")},staffList:function(){var t=this;Object(o.c)().then((function(e){t.staffData=e.data})).catch((function(e){t.$Message.error(e.msg)}))},getSupplierList:function(){var t=this;Object(s.o)().then(function(){var e,r=(e=b().mark((function e(r){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.supplierName=r.data;case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(t){w(i,n,a,o,s,"next",t)}function s(t){w(i,n,a,o,s,"throw",t)}o(void 0)}))});return function(t){return r.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},orderSearch:function(t){this.getOrderNum(t),this.getfieldKey(this.orderData.field_key),this.$emit("getList",1)},onClickTab:function(){this.$emit("onChangeType",this.currentTab)},delAll:function(){var t=this;if(0===this.delIdList.length)this.$Message.error("请先选择删除的订单！");else if(this.isDels){this.delIdList.filter((function(e){t.isDelIdList.push(e.id)}));var e={title:"删除订单",url:"/order/dels",method:"post",ids:{ids:this.isDelIdList,all:this.isAll,where:this.orderData}};this.$modalSure(e).then((function(e){t.$Message.success(e.msg),t.tabList()})).catch((function(e){t.$Message.error(e.msg)}))}else this.$Modal.error({title:"错误！",content:"<p>您选择的的订单存在用户未删除的订单，无法删除用户未删除的订单！</p>"})},handleSubmit:function(){this.$emit("on-submit",this.data)},Refresh:function(){this.$emit("getList")},handleReset:function(){this.$refs.form.resetFields(),this.$emit("on-reset")},queuemModal:function(){this.$refs.queue.modal=!0},resetForm:function(){this.orderData={status:"",data:"",real_name:"",field_key:"all",pay_type:"",type:"",store_id:"",supplier_id:""},this.timeVal=[],this.$emit("getList",1),this.$emit("order-data",this.orderData)}})},O=(r("5972"),Object(p.a)(C,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Form",{ref:"orderData",staticClass:"tabform",attrs:{inline:"",model:t.orderData,"label-width":t.labelWidth,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[r("FormItem",{attrs:{label:"订单来源："}},[r("RadioGroup",{attrs:{type:"button"},on:{"on-change":t.onClickTab},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[r("Radio",{attrs:{label:"-1"}},[t._v("所有订单")]),r("Radio",{attrs:{label:"0"}},[t._v("平台订单")]),r("Radio",{attrs:{label:"2"}},[t._v("供应商订单")])],1)],1),r("FormItem",{attrs:{label:"支付方式："}},[r("Select",{staticClass:"input-add",attrs:{clearable:"",placeholder:"全部"},on:{"on-change":t.userSearchs},model:{value:t.orderData.pay_type,callback:function(e){t.$set(t.orderData,"pay_type",e)},expression:"orderData.pay_type"}},t._l(t.payList,(function(e){return r("Option",{key:e.id,attrs:{value:e.val}},[t._v(t._s(e.label))])})),1)],1),r("FormItem",{attrs:{label:"创建时间："}},[r("DatePicker",{staticClass:"input-add mr20",attrs:{editable:!1,clearable:!0,value:t.timeVal,format:"yyyy/MM/dd HH:mm:ss",type:"datetimerange",placement:"bottom-start",placeholder:"自定义时间",options:t.options},on:{"on-change":t.onchangeTime}})],1),r("FormItem",{attrs:{label:"活动类型："}},[r("Select",{staticClass:"input-add",attrs:{clearable:"",placeholder:"全部"},on:{"on-change":t.typeChange},model:{value:t.orderData.type,callback:function(e){t.$set(t.orderData,"type",e)},expression:"orderData.type"}},[r("Option",{attrs:{value:"0"}},[t._v("普通订单")]),r("Option",{attrs:{value:"1"}},[t._v("秒杀订单")]),r("Option",{attrs:{value:"2"}},[t._v("砍价订单")]),r("Option",{attrs:{value:"3"}},[t._v("拼团订单")]),r("Option",{attrs:{value:"4"}},[t._v("积分订单")]),r("Option",{attrs:{value:"5"}},[t._v("套餐订单")]),r("Option",{attrs:{value:"6"}},[t._v("预售订单")]),r("Option",{attrs:{value:"7"}},[t._v("新人订单")]),r("Option",{attrs:{value:"8"}},[t._v("抽奖订单")])],1)],1),r("FormItem",{attrs:{label:"选择门店："}},[r("Select",{staticClass:"input-add",attrs:{clearable:"",filterable:""},on:{"on-change":t.storeChange},model:{value:t.orderData.store_id,callback:function(e){t.$set(t.orderData,"store_id",e)},expression:"orderData.store_id"}},t._l(t.staffData,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name)+"\n        ")])})),1)],1),r("FormItem",{attrs:{label:"供应商："}},[r("Select",{staticClass:"input-add",attrs:{clearable:"",filterable:""},on:{"on-change":t.supplierChange},model:{value:t.orderData.supplier_id,callback:function(e){t.$set(t.orderData,"supplier_id",e)},expression:"orderData.supplier_id"}},t._l(t.supplierName,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.supplier_name))])})),1)],1),r("FormItem",{attrs:{label:"订单搜索：",prop:"real_name","label-for":"real_name"}},[r("Input",{staticClass:"input-add",attrs:{placeholder:"请输入","element-id":"name",clearable:"",maxlength:"20"},on:{"on-change":t.clearTap},model:{value:t.orderData.real_name,callback:function(e){t.$set(t.orderData,"real_name",e)},expression:"orderData.real_name"}},[r("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend","default-label":"全部"},slot:"prepend",model:{value:t.orderData.field_key,callback:function(e){t.$set(t.orderData,"field_key",e)},expression:"orderData.field_key"}},[r("Option",{attrs:{value:"all"}},[t._v("全部")]),r("Option",{attrs:{value:"order_id"}},[t._v("订单号")]),r("Option",{attrs:{value:"uid"}},[t._v("用户UID")]),r("Option",{attrs:{value:"real_name"}},[t._v("用户姓名")]),r("Option",{attrs:{value:"user_phone"}},[t._v("用户电话")]),r("Option",{attrs:{value:"title"}},[t._v("商品名称")]),r("Option",{attrs:{value:"total_num"}},[t._v("商品件数")])],1)],1)],1),r("FormItem",[r("Button",{staticStyle:{"margin-left":"-90px"},attrs:{type:"primary"},on:{click:function(e){return t.orderSearch(t.orderData.real_name)}}},[t._v("查询")]),r("Button",{staticClass:"ml14",on:{click:function(e){return t.resetForm()}}},[t._v("重置")])],1)],1)],1)}),[],!1,null,"305538e6",null).exports),D=r("6683"),j=r("a464"),L=r("0fc4"),S=r("31b4"),E=r("fc48"),$=r("61f8"),T=r("417c"),P=r("d616"),M=r("a716"),F={name:"orderRecord",props:{orderNumId:String},data:function(){var t=this;return{modals:!1,loading:!1,writeOffData:[],writeOffItem:[],columns:[{type:"selection",width:50,align:"center"},{title:"商品信息",slot:"image",align:"center",minWidth:150},{title:"规格",slot:"value",align:"center",minWidth:90},{title:"商品售价",slot:"sellPrice",align:"center",minWidth:60},{title:"商品优惠价",slot:"price",align:"center",minWidth:60},{title:"状态",slot:"writeOff",align:"center",minWidth:30},{title:"总数",slot:"cartNum",align:"center",minWidth:30},{title:"待核销数量",key:"surplus_num",align:"center",minWidth:130,render:function(e,r){return e("div",[e("InputNumber",{props:{min:1,max:r.row.numShow,value:r.row.surplus_num||1,disabled:!!r.row.is_writeoff},on:{"on-change":function(e){r.row.surplus_num=e||1,t.writeOffItem.length?t.writeOffItem.forEach((function(e){e.id==r.row.id?e.surplus_num=r.row.surplus_num:t.writeOffItem.push(r.row)})):t.writeOffItem.push(r.row),t.selectData.forEach((function(e,n){e.cart_id===r.row.cart_id&&t.selectData.splice(n,1,r.row)}))}}})])}}],selectData:[]}},methods:{cancel:function(){this.$refs.selection.selectAll(!1)},selectOne:function(t){var e=this;t.forEach((function(t){e.writeOffItem.forEach((function(e){t.id==e.id&&(t.surplus_num=e.surplus_num)}))})),this.selectData=t},getWriteOff:function(t){var e=this;Object(i.fb)(t).then((function(t){var r=t.data.cart_info;r.forEach((function(t){t.numShow=t.surplus_num,t.is_writeoff&&(t._disabled=!0)})),e.writeOffData=r})).catch((function(t){e.$Message.error(res.msg)}))},submitWriteOff:function(){var t=this;if(!this.selectData.length)return this.$Message.error("请选择要核销的商品");var e=[];this.selectData.forEach((function(t){e.push({cart_id:t.cart_id,cart_num:t.surplus_num})})),Object(i.S)(this.orderNumId,{cart_ids:e}).then((function(e){t.$Message.success(e.msg),t.modals=!1,t.$refs.selection.selectAll(!1),t.$emit("submitSuccess")})).catch((function(e){t.$Message.error(e.msg)}))}}},N=(r("d29f"),Object(p.a)(F,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"订单核销",width:"1000","footer-hide":""},on:{"on-cancel":t.cancel},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[r("Card",{attrs:{bordered:!1,"dis-hover":""}},[r("Table",{ref:"selection",attrs:{columns:t.columns,border:"",data:t.writeOffData,loading:t.loading,"no-data-text":"暂无数据","highlight-row":"","no-filtered-data-text":"暂无筛选结果"},on:{"on-selection-change":t.selectOne},scopedSlots:t._u([{key:"image",fn:function(e){var n=e.row;return e.index,[r("div",{staticClass:"product-data"},[r("img",{staticClass:"image",attrs:{src:n.cart_info.productInfo.image}}),r("div",{staticClass:"name line2"},[t._v("\n                        "+t._s(n.cart_info.productInfo.store_name)+"\n                    ")])])]}},{key:"value",fn:function(e){var n=e.row;return e.index,[r("div",[t._v(t._s(n.cart_info.productInfo.attrInfo.suk))])]}},{key:"sellPrice",fn:function(e){var n=e.row;return e.index,[r("div",[t._v(t._s(n.cart_info.productInfo.attrInfo?n.cart_info.productInfo.attrInfo.price:n.cart_info.productInfo.price))])]}},{key:"price",fn:function(e){var n=e.row;return e.index,[r("div",[t._v(t._s(n.cart_info.truePrice))])]}},{key:"writeOff",fn:function(e){var n=e.row;return e.index,[n.is_writeoff?r("div",[t._v("已核销")]):r("div",{staticStyle:{color:"#F5222D"}},[t._v("待核销")])]}},{key:"cartNum",fn:function(e){var n=e.row;return e.index,[r("div",[t._v(t._s(n.cart_info.cart_num))])]}}])}),r("Button",{attrs:{type:"primary"},on:{click:t.submitWriteOff}},[t._v("确认核销")])],1)],1)}),[],!1,null,"8d4d8686",null).exports);function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(){W=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),s=new S(n||[]);return a(o,"_invoke",{value:O(t,r,s)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function g(){}var b={};l(b,o,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(E([])));x&&x!==r&&n.call(x,o)&&(b=x);var I=g.prototype=_.prototype=Object.create(b);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function r(a,i,o,s){var c=d(t[a],t,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==A(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(u).then((function(t){l.value=t,o(l)}),(function(t){return r("throw",t,o,s)}))}s(c.arg)}var i;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return i=i?i.then(a,a):a()}})}function O(e,r,n){var a=f;return function(i,o){if(a===m)throw Error("Generator is already running");if(a===h){if("throw"===i)throw o;return{value:t,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var c=D(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=d(e,r,n);if("normal"===l.type){if(a=n.done?h:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=h,n.method="throw",n.arg=l.arg)}}}function D(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,D(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=d(a,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function E(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(A(e)+" is not iterable")}return y.prototype=g,a(I,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:y,configurable:!0}),y.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(I),t},e.awrap=function(t){return{__await:t}},k(C.prototype),l(C.prototype,s,(function(){return this})),e.AsyncIterator=C,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new C(u(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(I),l(I,c,"Generator"),l(I,o,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=E,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:E(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function R(t,e,r,n,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function G(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,i,o,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,a=t}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return B(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var z={name:"changePrice",data:function(){return{id:0,priceModals:!1,columns:[{title:"商品",slot:"name",minWidth:150},{title:"单价",slot:"price",minWidth:80},{title:"数量",key:"cart_num",minWidth:70},{title:"应收金额",slot:"true_price",minWidth:80},{title:"改价",slot:"change_price",minWidth:200},{title:"改价后金额",slot:"result_price",minWidth:80}],cartInfo:[],payPostage:0,payPrice:0,resultPayPrice:0,formValidate:{is_postage:0,gain_integral:0,cart_info:[]},orderInfo:{pay_price:""}}},computed:{resultPayPostage:function(){return this.formValidate.is_postage?0:this.payPostage}},mounted:function(){},methods:{ordeUpdateInfo:function(t){var e=this;Object(i.m)(t).then((function(t){var r=t.data.orderInfo;e.orderInfo=r,e.formValidate.gain_integral=parseFloat(r.gain_integral),e.payPostage=parseFloat(r.pay_postage),e.payPrice=e.$computes.Sub(parseFloat(r.pay_price),e.payPostage);var n=0,a=t.data.cartInfo;a.forEach((function(t){t.priceType=1,t.truePrice=parseFloat(t.truePrice),t.changePrice=t.truePrice,t.resultPrice=t.changePrice,n=e.$computes.Add(n,e.$computes.Mul(t.resultPrice,t.cart_num))})),e.cartInfo=a.filter((function(t){return 0==t.is_gift})),e.resultPayPrice=n})).catch((function(t){e.$Message.error(t.msg)}))},cleanPrice:function(t){var e=t.replace(/[^\d.]/g,""),r=e.split(".");if(r.length>2&&(e=r[0]+"."+r.slice(1).join("")),e.includes(".")){var n=G(e.split("."),2);e=n[0]+"."+n[1].slice(0,2)}return e},changeTap:function(t,e){var r=this;if(t.changePrice=this.cleanPrice(t.changePrice),1==t.priceType)t.resultPrice=this.$computes.Mul(t.changePrice,1);else if(2==t.priceType){var n=this.$computes.Sub(t.truePrice,t.changePrice);t.resultPrice=n>0?n:0}else{if(t.changePrice>100)return this.$Message.error("折扣不可超过100");t.resultPrice=this.$computes.Mul(t.truePrice,this.$computes.Div(t.changePrice,100))}this.cartInfo[e]=t;var a=0;this.cartInfo.forEach((function(t){a=r.$computes.Add(a,r.$computes.Mul(t.resultPrice,t.cart_num))})),this.resultPayPrice=a},cancel:function(){this.priceModals=!1},submit:function(){var t=this,e=[],r=null;if(this.cartInfo.forEach((function(t){3==t.priceType&&t.changePrice>100&&(r=!0),e.push({id:t.id,true_price:t.resultPrice})})),r)return this.$Message.error("折扣不可超过100");this.formValidate.cart_info=e,Object(i.O)(this.id,this.formValidate).then(function(){var e,r=(e=W().mark((function e(r){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$Message.success(r.msg),t.priceModals=!1,t.$emit("submitSuccess",r);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(t){R(i,n,a,o,s,"next",t)}function s(t){R(i,n,a,o,s,"throw",t)}o(void 0)}))});return function(t){return r.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))}}},V=(r("3093"),Object(p.a)(z,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{attrs:{scrollable:"",title:"订单改价",width:"800"},model:{value:t.priceModals,callback:function(e){t.priceModals=e},expression:"priceModals"}},[r("Form",{ref:"formValidate",attrs:{model:t.formValidate,"label-width":80},nativeOn:{submit:function(t){t.preventDefault()}}},[r("FormItem",{attrs:{"label-width":0}},[r("Table",{attrs:{columns:t.columns,data:t.cartInfo,border:"","no-data-text":"暂无数据","highlight-row":"","no-filtered-data-text":"暂无筛选结果","max-height":"350"},scopedSlots:t._u([{key:"name",fn:function(e){var n=e.row;return e.index,[r("div",{staticClass:"line1"},[t._v(t._s(n.productInfo.store_name))])]}},{key:"price",fn:function(e){var n=e.row;return e.index,[r("div",[t._v("¥"+t._s(n.sum_price))])]}},{key:"true_price",fn:function(e){var n=e.row;return e.index,[r("div",[t._v("¥"+t._s(n.truePrice))])]}},{key:"change_price",fn:function(e){var n=e.row,a=e.index;return[r("div",[r("Input",{attrs:{type:"text"},on:{"on-change":function(e){return t.changeTap(n,a)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[r("Select",{staticClass:"w-90",attrs:{transfer:""},on:{"on-change":function(e){return t.changeTap(n,a)}},model:{value:n.priceType,callback:function(e){t.$set(n,"priceType",e)},expression:"row.priceType"}},[r("Option",{attrs:{value:1}},[t._v("一口价")]),r("Option",{attrs:{value:2}},[t._v("减价")]),r("Option",{attrs:{value:3}},[t._v("折扣")])],1)]},proxy:!0},{key:"append",fn:function(){return[r("div",{staticClass:"fs-12 text-wlll-909399"},[t._v("\n                  "+t._s(3==n.priceType?"%":"元")+"\n                ")])]},proxy:!0}],null,!0),model:{value:n.changePrice,callback:function(e){t.$set(n,"changePrice",e)},expression:"row.changePrice"}})],1)]}},{key:"result_price",fn:function(e){var n=e.row;return e.index,[r("div",[t._v("¥"+t._s(n.resultPrice||0))])]}}])})],1),r("FormItem",{attrs:{label:"赠送积分："}},[r("div",{staticClass:"acea-row row-between"},[r("div",[r("InputNumber",{attrs:{precision:0,min:0,max:9999999999},model:{value:t.formValidate.gain_integral,callback:function(e){t.$set(t.formValidate,"gain_integral",e)},expression:"formValidate.gain_integral"}}),r("span",{staticClass:"ml-20"},[t._v("免邮：")]),r("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.formValidate.is_postage,callback:function(e){t.$set(t.formValidate,"is_postage",e)},expression:"formValidate.is_postage"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1),r("div",[r("div",{staticClass:"text-right"},[r("span",[t._v("应付邮费：¥"+t._s(t.payPostage))]),r("span",{staticClass:"pl-8"},[t._v("实际支付邮费："),r("span",{staticClass:"text-wlll-f5222d"},[t._v("¥"+t._s(t.resultPayPostage))])])]),r("div",{staticClass:"text-right"},[r("span",[t._v("总价：¥"+t._s(t.orderInfo.pay_price))]),r("span",{staticClass:"pl-8"},[t._v("修改后总价："),r("span",{staticClass:"text-wlll-f5222d"},[t._v("¥"+t._s((Number(t.resultPayPrice?t.resultPayPrice:"0")+Number(t.resultPayPostage)).toFixed(2)))])])])])])])],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:t.cancel}},[t._v("取消")]),r("Button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确认")])],1)],1)}),[],!1,null,"f6a47a5e",null).exports),U=r("2e83"),q=r("add5"),Y=r.n(q);function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(){J=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof _?e:_,o=Object.create(i.prototype),s=new S(n||[]);return a(o,"_invoke",{value:O(t,r,s)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",v={};function _(){}function y(){}function g(){}var b={};l(b,o,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(E([])));x&&x!==r&&n.call(x,o)&&(b=x);var I=g.prototype=_.prototype=Object.create(b);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function r(a,i,o,s){var c=d(t[a],t,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==H(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(u).then((function(t){l.value=t,o(l)}),(function(t){return r("throw",t,o,s)}))}s(c.arg)}var i;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return i=i?i.then(a,a):a()}})}function O(e,r,n){var a=f;return function(i,o){if(a===m)throw Error("Generator is already running");if(a===h){if("throw"===i)throw o;return{value:t,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var c=D(s,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=d(e,r,n);if("normal"===l.type){if(a=n.done?h:p,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=h,n.method="throw",n.arg=l.arg)}}}function D(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,D(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=d(a,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function E(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(H(e)+" is not iterable")}return y.prototype=g,a(I,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:y,configurable:!0}),y.displayName=l(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,c,"GeneratorFunction")),t.prototype=Object.create(I),t},e.awrap=function(t){return{__await:t}},k(C.prototype),l(C.prototype,s,(function(){return this})),e.AsyncIterator=C,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new C(u(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(I),l(I,c,"Generator"),l(I,o,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=E,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;L(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:E(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Q(t,e,r,n,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function K(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){Q(i,n,a,o,s,"next",t)}function s(t){Q(i,n,a,o,s,"throw",t)}o(void 0)}))}}function Z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function X(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(r),!0).forEach((function(e){tt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function tt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=H(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==H(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var et={name:"table_list",components:{expandRow:j.a,editFrom:S.a,detailsFrom:E.a,orderRemark:$.a,orderRecord:T.a,orderSend:P.a,userDetails:M.a,Distribution:D.a,autoSend:m,queueList:h.default,orderWriteOff:N,changePrice:V},props:["where","currentTab"],data:function(){return{openErp:!1,distshow:!1,delfromData:{},modal:!1,orderList:[],pay_type:"",orderCards:[],loading:!1,orderId:0,orderNumId:"",page:{total:0,pageNum:1,pageSize:10},data:[],FromData:null,orderDatalist:null,modalTitleSs:"",isDelIdList:[],display:"none",autoDisabled:!1,status:0,rowActive:{},tablists:{},selectArr:[],exportList:[{name:"1",label:"导出发货单"},{name:"0",label:"导出订单"}],exportListOn:0,manualModal:!1,uploadAction:"".concat(v.a.apiBaseURL,"/file/upload/1"),uploadHeaders:{},autoModal:!1,isShow:!1,recordModal:!1,sendOutValue:"",fileList:[],file:"",modals2:!1,writeOffRules:{code:[{validator:function(t,e,r){if(!e)return r(new Error("请填写核销码"));Number.isInteger(e)&&/\b\d{12}\b/.test(e)?r():r(new Error("请填写12位数字"))},trigger:"blur",required:!0}]},writeOffFrom:{code:"",confirm:0},orderConNum:0,orderConId:0,formSelection:[],checkBox:!1,ids:[],isAll:0,checkUidList:[],refundModal:!1,refundColumns:[{type:"selection",width:60,align:"center"},{title:"商品信息",width:210,slot:"product"},{title:"售价",render:function(t,e){return t("div",e.row.productInfo.attrInfo.price)}},{title:"优惠价",key:"refundPrice"},{title:"总数",key:"cart_num"},{title:"退款数量",slot:"action",width:160}],refundProduct:[],refundSelection:[],refundMoney:0,is_split_order:0,orderDataStatus:"",refund_explain:""}},computed:X(X(X({},Object(a.e)("admin/layout",["isMobile"])),Object(a.e)("admin/order",["orderPayType","orderStatus","orderTime","orderNum","fieldKey","orderType","orderChartType","supplier_id","store_id","type_id"])),{},{labelWidth:function(){return this.isMobile?void 0:96},labelPosition:function(){return this.isMobile?"top":"right"},refundProductNum:function(){return this.refundProduct.reduce((function(t,e){return t+e.refundNum}),0)}}),mounted:function(){},created:function(){this.getList(),this.getToken(),this.getErpConfig()},watch:{currentTab:function(){this.onClickTab()},orderType:function(){this.page.pageNum=1,this.getList()},orderList:{deep:!0,handler:function(t){var e=this;t.forEach((function(t){e.formSelection.forEach((function(e){e.id===t.id&&(t.checkBox=!0)}))}));var r=this.orderList.filter((function(t){return t.checkBox}));this.orderList.length?this.checkBox=this.orderList.length===r.length:this.checkBox=!1}},refundSelection:{handler:function(t){var e=this;this.refundMoney=t.reduce((function(t,r){var n=r.refundPrice,a=r.refundNum;return e.$computes.Add(t,e.$computes.Mul(n,a))}),0)},deep:!0},is_split_order:function(t){var e=this;this.$nextTick((function(){e.$refs.refundTable.selectAll(!!t)}))},refundMoney:function(t){var e=this;this.$nextTick((function(){"number"==typeof t&&parseFloat(t)!=parseInt(t)&&t.toString().length-(t.toString().indexOf(".")+1)>2&&(e.refundMoney=Number(t.toFixed(2)))}))}},methods:X(X({},Object(a.d)("admin/order",["getIsDel","getisDelIdListl","onChangeTabs","getStore_id","getSupplier_id"])),{},tt(tt(tt({visibleChange:function(t){this.is_split_order=0,t||(this.refund_explain="",this.refundSelection=[])},cancelRefundModal:function(){this.refundModal=!1,this.refund_explain=""},putOpenRefund:function(){var t=this,e={id:this.orderId,refund_price:this.refundMoney,type:1,is_split_order:this.is_split_order,refund_explain:this.refund_explain};if(this.is_split_order){if(!this.refundSelection.length)return this.$Message.error("请选择需要退款的商品");e.cart_ids=this.refundSelection.map((function(t){return{cart_id:t.id,cart_num:t.refundNum}}))}Object(i.N)(e).then((function(e){t.$Message.success(e.msg),t.refundModal=!1,t.getData(t.orderDatalist.orderInfo.id),t.getList()})).catch((function(e){t.$Message.error(e.msg)}))},refundSelectionChange:function(t){this.refundSelection=t},refundNumChange:function(t){var e=t.id,r=t.refundNum,n=this.refundSelection.find((function(t){return t.id===e}));n&&(n.refundNum=r)},checkboxItem:function(t){var e=parseInt(t.rowid);-1!==this.checkUidList.indexOf(e)?this.checkUidList=this.checkUidList.filter((function(t){return t!==e})):this.checkUidList.push(e)},checkboxAll:function(){var t=this.$refs.xTable.getCheckboxRecords(!0),e=this.$refs.xTable.getCheckboxReserveRecords(!0);0==this.isAll&&this.checkUidList.length<=e.length&&!this.isCheckBox&&(e=[]);var r=[];(e=e.concat(t)).forEach((function(t){r.push(parseInt(t.id))})),this.checkUidList=r,t.length||(this.isCheckBox=!1)},allPages:function(t){this.isAll=t,0==t?this.$refs.xTable.toggleAllCheckboxRow():(this.isCheckBox?(this.$refs.xTable.setAllCheckboxRow(!1),this.isCheckBox=!1,this.isAll=0):(this.$refs.xTable.setAllCheckboxRow(!0),this.isCheckBox=!0,this.isAll=1),this.checkUidList=[])},getErpConfig:function(){var t=this;Object(L.a)().then((function(e){t.openErp=e.data.open_erp})).catch((function(e){t.$Message.error(e.msg)}))},printOreder:function(){if(this.checkUidList.length>10||1==this.isAll&&this.page.total>10)return this.$Message.error("最多批量打印10个订单");var t=[];1==this.isAll&&this.page.total<=10&&this.orderList.forEach((function(e){t.push(parseInt(e.id))}));var e=this.$router.resolve({path:"/admin/supplier/order/distribution",query:{id:1==this.isAll?t.join(","):this.checkUidList.join(","),status:2}});window.open(e.href,"_blank")},delAll:function(){var t=this;if(0===this.checkUidList.length&&0==this.isAll)return this.$Message.error("请先选择删除的订单！");var e={title:"删除订单",url:"/order/dels",method:"post",ids:{all:this.isAll,ids:this.checkUidList}};this.$modalSure(e).then((function(e){t.$Message.success(e.msg),t.checkUidList=[],t.getList()})).catch((function(e){t.$Message.error(e.msg)}))},onAuto:function(){this.$refs.sends.modals=!0,this.$refs.sends.getList(),this.$refs.sends.getDeliveryList()},btnClick:function(t){var e=this,r={supplier_id:t.supplier_id,id:t.id};Object(i.Y)(r).then(function(){var t=K(J().mark((function t(r){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$Message.success(r.msg);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},queuemModal:function(){this.$refs.queue.modal=!0},getExpressList:function(){var t=this;return K(J().mark((function e(){var r,n,a,i,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],n=[],a=[],i="",e.next=3,t.getExcelData();case 3:o=e.sent,i||(i=o.filename),n.length||(n=o.filekey),r.length||(r=o.header),a=o.export,Object(U.a)(r,n,i,a);case 9:case"end":return e.stop()}}),e)})))()},getExcelData:function(){return new Promise((function(t,e){Object(i.e)().then((function(e){return t(e.data)}))}))},writeOff:function(){this.modals2=!0},search:function(t){var e=this;this.$refs[t].validate((function(t){t?(e.writeOffFrom.confirm=0,Object(i.R)(e.writeOffFrom).then(function(){var t=K(J().mark((function t(r){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200===r.status?e.$Message.success(r.msg):e.$Message.error(r.msg);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))):e.$Message.error("请填写正确的核销码")}))},ok:function(){var t=this;this.writeOffFrom.code?(this.writeOffFrom.confirm=1,Object(i.R)(this.writeOffFrom).then(function(){var e=K(J().mark((function e(r){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===r.status?(t.$Message.success(r.msg),t.modals2=!1,t.getList(),t.$refs[name].resetFields()):t.$Message.error(r.msg);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))):this.$Message.warning("请先验证订单！")},del:function(t){this.modals2=!1,this.writeOffFrom.confirm=0,this.$refs[t].resetFields()},getToken:function(){this.uploadHeaders["Authori-zation"]="Bearer "+_.a.cookies.get("token")},uploadSuccess:function(t,e,r){200===t.status?(this.$Message.success(t.msg),this.file=t.data.src,this.fileList=r):this.$Message.error(t.msg)},removeFile:function(t,e){this.file="",this.fileList=e},manualModalOk:function(){var t=this;this.$refs.upload.clearFiles(),Object(i.t)({file:this.file}).then((function(e){t.$Message.success(e.msg),t.fileList=[]})).catch((function(e){t.$Message.error(e.msg),t.fileList=[]}))},manualModalCancel:function(){this.fileList=[],this.$refs.upload.clearFiles()},getTabs:function(){var t=this;this.spinShow=!0,this.$store.dispatch("admin/order/getOrderTabs",{status:this.orderStatus,pay_type:this.orderPayType,data:this.orderTime,real_name:this.orderNum,field_key:this.fieldKey,type:this.type_id,plat_type:this.currentTab,store_id:this.store_id,supplier_id:this.supplier_id}).then((function(e){t.tablists=e.data,t.spinShow=!1})).catch((function(e){t.spinShow=!1,t.$Message.error(e.msg)}))},onClickTab:function(){this.onChangeTabs(this.currentTab),this.isAll=0,this.isCheckBox=!1,this.$refs.xTable.setAllCheckboxRow(!1),this.checkUidList=[],1==this.currentTab&&this.getSupplier_id(""),2==this.currentTab&&this.getStore_id(""),this.$store.dispatch("admin/order/getOrderTabs",{type:this.currentTab})},selectChange2:function(){this.$emit("selectChange2",this.orderDataStatus)},closeDetail:function(){this.$refs.detailss.modals=!1},distribution:function(t){this.$refs.distshow.modals=!0,this.$refs.distshow.formValidate.keywords="",this.$refs.distshow.getList(t.id)},showUserInfo:function(t){this.$refs.userDetails.modals=!0,this.$refs.userDetails.activeName="info",this.$refs.userDetails.getDetails(t.uid)},printImg:function(t){Y()({printable:t,type:"image",documentTitle:"快递信息",style:"img{\n\t      width: 100%;\n\t      height: 476px;\n\t    }"})},changeMenu:function(t,e,r){var n=this;switch(this.orderId=t.id,this.orderConId=t.pid>0?t.pid:t.id,this.orderConNum=r,e){case"1":this.delfromData={title:"确认收款",url:"/order/pay_offline/".concat(t.id),method:"post",ids:""},this.$modalSure(this.delfromData).then((function(e){n.$Message.success(e.msg),n.$emit("changeGetTabs"),n.getData(t.id,1),n.getList()})).catch((function(t){n.$Message.error(t.msg)}));break;case"2":this.rowActive=t,this.getData(t.id);break;case"3":this.$refs.record.modals=!0,this.$refs.record.getList(t.id);break;case"4":this.$refs.remarks.formValidate.remark=t.remark,this.$refs.remarks.modals=!0;break;case"5":this.getOnlyRefundData(t.id,t.refund_type,t);break;case"55":this.getRefundData(t.id,t.refund_type);break;case"6":this.getRefundIntegral(t.id);break;case"7":this.getNoRefundData(t.id);break;case"8":if(t.refund.length)return this.$Message.error("该订单有售后处理中，请先处理售后申请");this.delfromData={title:"修改确认收货",url:"/order/take/".concat(t.id),method:"put",ids:""},this.$modalSure(this.delfromData).then((function(e){n.$Message.success(e.msg),n.$emit("changeGetTabs"),n.getList(),r?n.$refs.detailss.getSplitOrder(t.pid):n.getData(t.id,1)})).catch((function(t){n.$Message.error(t.msg)}));break;case"10":this.delfromData={title:"立即打印订单",info:"您确认打印此订单吗?",url:"/order/print/".concat(t.id),method:"get",ids:""},this.$modalSure(this.delfromData).then((function(t){n.$Message.success(t.msg),n.$emit("changeGetTabs"),n.getList()})).catch((function(t){n.$Message.error(t.msg)}));break;case"11":this.delfromData={title:"立即打印电子面单",info:"您确认打印此电子面单吗?",url:"/order/order_dump/".concat(t.id),method:"get",ids:""},this.$modalSure(this.delfromData).then((function(t){n.$Message.success(t.msg),n.getList()})).catch((function(t){n.$Message.error(t.msg)}));break;case"12":var a=this.$router.resolve({path:"/admin/supplier/order/distribution",query:{id:t.id,status:2}});window.open(a.href,"_blank");break;case"13":this.printImg(t.kuaidi_label);break;default:this.delfromData={title:"删除订单",url:"/order/del/".concat(t.id),method:"DELETE",ids:""},this.delOrder(t,this.delfromData)}},submitModel:function(){this.getList()},pageChange:function(t){this.page.pageNum=t,this.getList()},limitChange:function(t){this.page.pageSize=t,this.getList()},getList:function(t){var e=this;1==t&&(this.isAll=0,this.$refs.xTable.setAllCheckboxRow(!1),this.checkUidList=[]),this.page.pageNum=1===t?1:this.page.pageNum,this.loading=!0,Object(i.E)({page:this.page.pageNum,limit:this.page.pageSize,status:this.orderStatus,pay_type:this.orderPayType,data:this.orderTime,real_name:this.orderNum,field_key:this.fieldKey,type:this.type_id,plat_type:this.currentTab,store_id:this.store_id,supplier_id:this.supplier_id}).then(function(){var t=K(J().mark((function t(r){var n,a,i,o;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.data,a=n.count,i=n.data,o=n.stat,i.forEach((function(t){t.checkBox=1==e.isAll,t.id==e.orderId&&(e.rowActive=t)})),e.orderList=i,e.orderCards=o,e.page.total=a,e.$emit("on-changeCards",o),e.loading=!1,e.getTabs(),e.$nextTick((function(){if(1==this.isAll)this.isCheckBox?this.$refs.xTable.setAllCheckboxRow(!0):this.$refs.xTable.setAllCheckboxRow(!1);else{var t=this.$refs.xTable.getCheckboxReserveRecords(!0);(!this.checkUidList.length||this.checkUidList.length<=t.length)&&this.$refs.xTable.setAllCheckboxRow(!1)}}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},edit:function(t){this.$refs.changePrice.id=t.id,this.$refs.changePrice.ordeUpdateInfo(t.id),this.$refs.changePrice.priceModals=!0},submitSuccess:function(t){if(!1===t.data.status)return this.$authLapse(t.data);this.$authLapse(t.data),this.FromData=t.data,this.$refs.edits.modals=!0},splitOrderDetail:function(t){this.$router.push({path:"split_list",query:{id:t.id,orderChartType:this.orderStatus}})},delOrder:function(t,e){var r=this;1===t.is_del?this.$modalSure(e).then((function(t){r.$Message.success(t.msg),r.getList(),r.$refs.detailss.modals=!1,r.$emit("changeGetTabs")})).catch((function(t){r.$Message.error(t.msg)})):this.$Modal.error({title:"错误！",content:"<p>您选择的的订单存在用户未删除的订单，无法删除用户未删除的订单！</p>"})},getOrderData:function(t){var e=this;Object(i.l)(t).then(function(){var t=K(J().mark((function t(r){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==r.data.status){t.next=2;break}return t.abrupt("return",e.$authLapse(r.data));case 2:e.$authLapse(r.data),e.FromData=r.data,e.$refs.edits.modals=!0;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},getData:function(t,e){var r=this;Object(i.g)(t).then(function(){var t=K(J().mark((function t(n){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e||(r.$refs.detailss.modals=!0),r.$refs.detailss.activeName="detail",r.orderDatalist=n.data,r.orderDatalist.orderInfo.refund_reason_wap_img)try{r.orderDatalist.orderInfo.refund_reason_wap_img=JSON.parse(r.orderDatalist.orderInfo.refund_reason_wap_img)}catch(t){r.orderDatalist.orderInfo.refund_reason_wap_img=[]}case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){r.$Message.error(t.msg)}))},submitFail:function(t){this.status=0,this.getList(),1!=this.orderConNum?this.getData(this.orderId,1):this.$refs.detailss.getSplitOrder(this.orderConId),t&&this.$emit("changeGetTabs")},getOnlyRefundData:function(t,e,r){var n=this,a=this.rowActive._info,i=Object.keys(a).map((function(t){return a[t].cart_info})).filter((function(t){return!t.is_gift}));i.forEach((function(t){t.refundPrice=n.$computes.Div(t.refund_price,t.cart_num),t.refundNum=t.cart_num-t.refund_num,t._disabled=!t.refundNum})),this.refundProduct=i,1===this.refundProductNum&&(this.refundSelection=i),this.refundModal=!0},getRefundData:function(t,e){var r=this;this.delfromData={title:"是否立即退货退款",url:"/refund/agree/".concat(t),method:"get"},this.$modalSure(this.delfromData).then((function(t){r.$Message.success(t.msg),r.getList(),r.$emit("changeGetTabs")})).catch((function(t){r.$Message.error(t.msg)}))},getRefundIntegral:function(t){var e=this;Object(i.W)(t).then(function(){var t=K(J().mark((function t(r){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.FromData=r.data,e.$refs.edits.modals=!0;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},getNoRefundData:function(t){var e=this;this.$modalForm(Object(i.s)(t)).then((function(){e.getList(),e.$emit("changeGetTabs")}))},sendOrder:function(t,e){var r=this;if(1==t.is_stock_up&&0==t.status)return this.$Message.warning("商家寄件，等待平台返回快递单号");this.orderConId=t.pid,this.orderConNum=e,this.$store.commit("admin/order/setSplitOrder",t.total_num),this.$refs.send.modals=!0,this.orderId=t.id,this.status=t._status,this.pay_type=t.pay_type,this.$refs.send.getList(),this.$refs.send.getDeliveryList(),this.$refs.send.getBusineseList(),this.$nextTick((function(e){r.$refs.send.getCartInfo(t._status,t.id)}))},delivery:function(t,e){var r=this;Object(i.h)(t.id).then(function(){var n=K(J().mark((function n(a){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.orderConNum=e,r.orderConId=t.pid,r.FromData=a.data,r.$refs.edits.modals=!0,1!=e&&r.getData(r.orderId,1);case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()).catch((function(t){r.$Message.error(t.msg)}))},change:function(t){},exports:function(t){var e=this;return K(J().mark((function r(){var n,a,i,o,s,c,l,u,d,f,p,m;return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.exportListOn=e.exportList.findIndex((function(e){return e.name===t})),n=[],a=[],i=[],o="",(s=JSON.parse(JSON.stringify(e.where))).page=1,s.export_type=t,s.ids=e.checkUidList.join(","),c=0;case 7:if(!(c<s.page+1)){r.next=48;break}return r.next=10,e.downOrderData(s);case 10:if(l=r.sent,o||(o=l.filename),a.length||(a=l.filekey),n.length||(n=l.header),!l.export.length){r.next=19;break}i=i.concat(l.export),s.page++,r.next=45;break;case 19:u=[],d=0;case 21:if(!(d<i.length)){r.next=43;break}f=i[d].goods_name.split("\n"),p=0;case 24:if(!(p<f.length)){r.next=40;break}if(u.push(X({},i[d])),u[u.length-1].goods_name=f[p],p){r.next=29;break}return r.abrupt("continue",37);case 29:r.t0=J().keys(u[u.length-1]);case 30:if((r.t1=r.t0()).done){r.next=37;break}if("goods_name"!==(m=r.t1.value)){r.next=34;break}return r.abrupt("continue",30);case 34:u[u.length-1][m]=null,r.next=30;break;case 37:p++,r.next=24;break;case 40:d++,r.next=21;break;case 43:return Object(U.a)(n,a,o,u),r.abrupt("return");case 45:c++,r.next=7;break;case 48:case"end":return r.stop()}}),r)})))()},downOrderData:function(t){return new Promise((function(e,r){Object(i.eb)(t).then((function(t){return e(t.data)}))}))}},"submitSuccess",(function(){this.getList(),this.$refs.detailss.modals&&this.getData(this.orderId,1)})),"singleWrite",(function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确定要核销该订单吗？",cancelText:"取消",closable:!0,maskClosable:!0,onOk:function(){Object(i.gb)(t.order_id).then((function(t){e.$Message.success(t.msg),e.getList()}))},onCancel:function(){}})})),"bindWrite",(function(t){var e=this;t.total_num>1?(this.orderNumId=t.order_id,this.$refs.writeOff.modals=!0,this.$refs.writeOff.getWriteOff({oid:t.id})):4==t.product_type?this.$modalForm(Object(i.K)(t.id)).then((function(t){e.$Message.success(t.msg),e.getList(),e.getChart(),e.$refs.detailss.modals&&e.getData(e.orderId,1)})):this.singleWrite(t)})))},rt=(r("545a"),{name:"orderlistDetails",components:{tableForm:O,tableList:Object(p.a)(et,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"new_tab"},[r("Tabs",{on:{"on-click":t.selectChange2},model:{value:t.orderDataStatus,callback:function(e){t.orderDataStatus=e},expression:"orderDataStatus"}},[r("TabPane",{attrs:{label:"全部",name:" "}}),r("TabPane",{attrs:{label:"待支付("+(t.tablists.unpaid||0)+")",name:"0"}}),r("TabPane",{attrs:{label:"待发货("+(t.tablists.unshipped||0)+")",name:"1"}}),r("TabPane",{attrs:{label:"待核销("+(t.tablists.write_off||0)+")",name:"5"}}),r("TabPane",{attrs:{label:"待收货",name:"2"}}),r("TabPane",{attrs:{label:"待评价",name:"3"}}),r("TabPane",{attrs:{label:"已核销",name:"6"}}),r("TabPane",{attrs:{label:"已完成",name:"4"}}),r("TabPane",{attrs:{label:"已退款",name:"-2"}})],1)],1),r("div",{staticClass:"acea-row row-between"},[r("div",[r("Tooltip",{directives:[{name:"auth",rawName:"v-auth",value:["order-batch-del_orders"],expression:"['order-batch-del_orders']"}],attrs:{content:"本页至少选中一项",disabled:!!t.checkUidList.length&&0==t.isAll}},[r("Button",{staticClass:"mr10",attrs:{type:"primary",disabled:!t.checkUidList.length&&0==t.isAll},on:{click:t.delAll}},[t._v("批量删除订单")])],1),r("Button",{directives:[{name:"auth",rawName:"v-auth",value:["order-hand-batch_delivery"],expression:"['order-hand-batch_delivery']"}],staticClass:"mr10",attrs:{type:"primary"},on:{click:function(e){t.manualModal=!0}}},[t._v("手动批量发货")]),r("Tooltip",{directives:[{name:"auth",rawName:"v-auth",value:["order-other-batch_delivery"],expression:"['order-other-batch_delivery']"}],attrs:{content:"本页至少选中一项",disabled:!!t.checkUidList.length&&0==t.isAll}},[r("Button",{staticClass:"mr10",attrs:{type:"primary",disabled:!t.checkUidList.length&&0==t.isAll},on:{click:t.onAuto}},[t._v("自动批量发货")])],1),r("Tooltip",{attrs:{content:"本页至少选中一项",disabled:!!t.checkUidList.length&&0==t.isAll}},[r("Button",{staticClass:"mr10",attrs:{type:"primary",disabled:!t.checkUidList.length&&0==t.isAll},on:{click:t.printOreder}},[t._v("打印配货单")])],1),r("Dropdown",{directives:[{name:"auth",rawName:"v-auth",value:["export-storeOrder"],expression:"['export-storeOrder']"}],staticClass:"mr10",on:{"on-click":t.exports}},[r("Button",{staticStyle:{width:"110px"}},[t._v("\n          "+t._s(t.exportList[t.exportListOn].label)+"\n          "),r("Icon",{attrs:{type:"ios-arrow-down"}})],1),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},t._l(t.exportList,(function(e,n){return r("DropdownItem",{key:n,staticStyle:{"font-size":"12px !important"},attrs:{name:e.name}},[t._v(t._s(e.label))])})),1)],1),r("Button",{directives:[{name:"auth",rawName:"v-auth",value:["order-write"],expression:"['order-write']"}],staticClass:"mr10 greens",attrs:{size:"default"},on:{click:t.writeOff}},[t._v("订单核销")])],1),r("div",{staticClass:"caozuo"},[r("Button",{directives:[{name:"auth",rawName:"v-auth",value:["queue-index"],expression:"['queue-index']"}],staticClass:"mr10",on:{click:t.queuemModal}},[t._v("批量发货记录")]),r("Button",{directives:[{name:"auth",rawName:"v-auth",value:["export-expressList"],expression:"['export-expressList']"}],staticClass:"mr10",on:{click:t.getExpressList}},[t._v("下载物流公司对照表")])],1)]),r("vxe-table",{ref:"xTable",staticClass:"mt25",attrs:{loading:t.loading,"row-id":"id","expand-config":{accordion:!0},"checkbox-config":{reserve:!0},data:t.orderList},on:{"checkbox-all":t.checkboxAll,"checkbox-change":t.checkboxItem}},[r("vxe-column",{attrs:{type:"",width:"0"}}),r("vxe-column",{attrs:{type:"expand",width:"35"},scopedSlots:t._u([{key:"content",fn:function(e){var n=e.row;return[r("div",{staticClass:"tdinfo"},[r("Row",{staticClass:"expand-row"},[r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("商品总价：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(n.total_price)}})]),r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("下单时间：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(n.add_time)}})]),r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("推广人：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(n.spread_nickname?n.spread_nickname:"无")}})])],1),r("Row",{staticClass:"expand-row"},[r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("用户备注：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(n.mark?n.mark:"无")}})]),r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("商家备注：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(n.remark?n.remark:"无")}})]),r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("供应商名称：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(n.supplier_name||"--")}})])],1)],1)]}}])}),r("vxe-column",{attrs:{type:"checkbox",width:"100"},scopedSlots:t._u([{key:"header",fn:function(){return[r("div",[r("Dropdown",{attrs:{transfer:""},on:{"on-click":t.allPages},scopedSlots:t._u([{key:"list",fn:function(){return[r("DropdownMenu",[r("DropdownItem",{attrs:{name:"0"}},[t._v("当前页")]),r("DropdownItem",{attrs:{name:"1"}},[t._v("所有页")])],1)]},proxy:!0}])},[r("a",{staticClass:"acea-row row-middle",attrs:{href:"javascript:void(0)"}},[r("span",[t._v("全选("+t._s(1==t.isAll?t.page.total-t.checkUidList.length:t.checkUidList.length)+")")]),r("Icon",{attrs:{type:"ios-arrow-down"}})],1)])],1)]},proxy:!0}])}),r("vxe-column",{attrs:{field:"order_id",title:"订单号","min-width":"175"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[1===n.is_del&&null==n.delete_time?r("Tooltip",{attrs:{transfer:!0,theme:"dark","max-width":"300",delay:600,content:"用户已删除"}},[r("span",{staticStyle:{color:"#ed4014",display:"block"}},[t._v(t._s(n.order_id))])]):r("span",{staticStyle:{color:"#2d8cf0",display:"block",cursor:"pointer"},on:{click:function(e){return t.changeMenu(n,"2")}}},[t._v(t._s(n.order_id))])]}}])}),r("vxe-column",{attrs:{field:"pink_name",title:"活动类型","min-width":"120"}}),r("vxe-column",{attrs:{field:"nickname",title:"用户信息","min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("a",{on:{click:function(e){return t.showUserInfo(n)}}},[t._v(t._s(n.nickname))]),null!=n.delete_time?r("span",{staticStyle:{color:"#ed4014"}},[t._v("\n          (已注销)")]):t._e()]}}])}),r("vxe-column",{attrs:{field:"info",title:"商品信息","min-width":"330"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("Tooltip",{attrs:{transfer:!0,theme:"dark","max-width":"300",delay:600}},[t._l(n._info,(function(e,n){return r("div",{key:n,staticClass:"tabBox"},[r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"tabBox_img"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.cart_info.productInfo.image,expression:"val.cart_info.productInfo.image"}]})]),r("span",{staticClass:"tabBox_tit line1"},[e.cart_info.is_gift?r("span",{staticClass:"font-color-red"},[t._v("赠品")]):t._e(),t._v("\n              "+t._s(e.cart_info.productInfo.store_name+" | ")+"\n              "+t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.suk:"")+"\n            ")]),r("span",[t._v(t._s(" x "+e.cart_info.cart_num))])])})),r("div",{attrs:{slot:"content"},slot:"content"},t._l(n._info,(function(e,n){return r("div",{key:n,staticClass:"mb-10"},[r("div",[e.cart_info.is_gift?r("span",{staticClass:"font-color-red"},[t._v("赠品")]):t._e(),r("span",[t._v(t._s(e.cart_info.productInfo.store_name))])]),r("div",{staticClass:"flex-y-center"},[t._v("规格："+t._s(e.cart_info.productInfo.attrInfo.suk||""))]),r("div",{staticClass:"flex-y-center"},[t._v(t._s("￥"+e.cart_info.sum_price+" x "+e.cart_info.cart_num))])])})),0)],2)]}}])}),r("vxe-column",{attrs:{field:"pay_price",title:"实际支付",align:"center","min-width":"70"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("span",[t._v(t._s(n.paid>0?n.pay_price:0))])]}}])}),r("vxe-column",{attrs:{field:"_pay_time",title:"支付时间","min-width":"150"}}),r("vxe-column",{attrs:{field:"pay_type_name",title:"支付方式","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("span",[t._v(t._s(n.pay_type_name))])]}}])}),r("vxe-column",{attrs:{field:"mark",title:"备注","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("span",[t._v(t._s(n.mark||"--"))])]}}])}),r("vxe-column",{attrs:{field:"remark",title:"商家备注","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("span",[t._v(t._s(n.remark||"--"))])]}}])}),r("vxe-column",{attrs:{field:"statusName",title:"订单状态","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("Tag",{directives:[{name:"show",rawName:"v-show",value:3==n.status,expression:"row.status == 3"}],attrs:{color:"default",size:"medium"}},[t._v(t._s(n.status_name.status_name))]),r("Tag",{directives:[{name:"show",rawName:"v-show",value:4==n.status,expression:"row.status == 4"}],attrs:{color:"orange",size:"medium"}},[t._v(t._s(n.status_name.status_name))]),r("Tag",{directives:[{name:"show",rawName:"v-show",value:[1,2,5].includes(n.status),expression:"[1, 2, 5].includes(row.status)"}],attrs:{color:"orange",size:"medium"}},[t._v(t._s(n.status_name.status_name))]),r("Tag",{directives:[{name:"show",rawName:"v-show",value:0==n.status,expression:"row.status == 0"}],attrs:{color:"red",size:"medium"}},[t._v(t._s(n.status_name.status_name))]),!n.is_all_refund&&n.refund.length?r("Tag",{attrs:{color:"orange",size:"medium"}},[t._v("部分退款中")]):t._e(),n.is_all_refund&&n.refund.length&&6!=n.refund_type?r("Tag",{attrs:{color:"orange",size:"medium"}},[t._v("退款中")]):t._e(),n.status_name.pics?r("div",{staticClass:"pictrue-box",attrs:{size:"medium"}},t._l(n.status_name.pics||[],(function(t,e){return r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"item"}],staticClass:"pictrue mr10",attrs:{src:t}})])})),0):t._e()]}}])}),r("vxe-column",{attrs:{field:"action",title:"操作",align:"center",width:"140",fixed:"right","show-overflow":""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[2!==n._status&&8!==n._status&&4!==n.status||1!==n.shipping_type||null!==n.pinkStatus&&2!==n.pinkStatus||null!=n.delete_time||0!==n.store_id||0!==n.supplier_id||n.refund.length?t._e():r("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.sendOrder(n)}}},[t._v("发送货")]),2!=n.shipping_type||0!=n.status&&5!=n.status||1!=n.paid||0!==n.refund_status?t._e():r("a",{on:{click:function(e){return t.bindWrite(n)}}},[t._v("立即核销")]),0!==n.supplier_id&&"未发货"==n.status_name.status_name?r("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.btnClick(n)}}},[t._v("提醒发货")]):t._e(),0!==n.supplier_id&&"未发货"==n.status_name.status_name||2==n.shipping_type&&(0==n.status||5==n.status)&&1==n.paid&&0===n.refund_status?r("Divider",{attrs:{type:"vertical"}}):t._e(),2!==n._status&&8!==n._status&&4!==n.status||1!==n.shipping_type||null!==n.pinkStatus&&2!==n.pinkStatus||null!=n.delete_time||0!==n.store_id||0!==n.supplier_id?t._e():r("Divider",{attrs:{type:"vertical"}}),r("a",{on:{click:function(e){return t.changeMenu(n,"2")}}},[t._v("详情")])]}}])})],1),r("div",{staticClass:"acea-row row-right page"},[r("Page",{attrs:{total:t.page.total,current:t.page.pageNum,"show-elevator":"","show-total":"","page-size":t.page.pageSize,"show-sizer":""},on:{"on-change":t.pageChange,"on-page-size-change":t.limitChange}})],1),r("Distribution",{ref:"distshow"}),r("edit-from",{ref:"edits",attrs:{FromData:t.FromData},on:{submitFail:t.submitFail}}),r("user-details",{ref:"userDetails",attrs:{fromType:"order"}}),r("orderWriteOff",{ref:"writeOff",attrs:{orderNumId:t.orderNumId},on:{submitSuccess:t.submitSuccess}}),r("details-from",{ref:"detailss",attrs:{orderDatalist:t.orderDatalist,orderId:t.orderId,"row-active":t.rowActive,openErp:t.openErp,formType:1}}),r("order-remark",{ref:"remarks",attrs:{orderId:t.orderId},on:{submitFail:t.submitFail}}),r("order-record",{ref:"record"}),r("order-send",{ref:"send",attrs:{orderId:t.orderId,status:t.status,pay_type:t.pay_type},on:{submitFail:function(e){return t.submitFail(1)}}}),r("Modal",{attrs:{title:"手动批量发货","class-name":"vertical-center-modal"},on:{"on-ok":t.manualModalOk,"on-cancel":t.manualModalCancel},model:{value:t.manualModal,callback:function(e){t.manualModal=e},expression:"manualModal"}},[r("Row",{attrs:{type:"flex"}},[r("Col",{attrs:{span:"4"}},[r("div",{staticStyle:{"line-height":"32px","text-align":"right"}},[t._v("文件：")])]),r("Col",{attrs:{span:"20"}},[r("Upload",{ref:"upload",attrs:{action:t.uploadAction,headers:t.uploadHeaders,accept:".xlsx,.xls",format:["xlsx","xls"],disabled:!!t.fileList.length,"on-success":t.uploadSuccess,"on-remove":t.removeFile}},[r("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传文件")])],1)],1)],1)],1),r("Modal",{staticClass:"paymentFooter",attrs:{title:"订单核销",scrollable:"",width:"400","class-name":"vertical-center-modal"},model:{value:t.modals2,callback:function(e){t.modals2=e},expression:"modals2"}},[r("Form",{ref:"writeOffFrom",staticClass:"tabform",attrs:{model:t.writeOffFrom,rules:t.writeOffRules,"label-position":t.labelPosition},nativeOn:{submit:function(t){t.preventDefault()}}},[r("FormItem",{attrs:{prop:"code","label-for":"code"}},[r("Input",{staticStyle:{width:"100%"},attrs:{search:"","enter-button":"验证",type:"text",placeholder:"请输入12位核销码",number:""},on:{"on-search":function(e){return t.search("writeOffFrom")}},model:{value:t.writeOffFrom.code,callback:function(e){t.$set(t.writeOffFrom,"code",t._n(e))},expression:"writeOffFrom.code"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("立即核销")]),r("Button",{on:{click:function(e){return t.del("writeOffFrom")}}},[t._v("取消")])],1)],1),r("auto-send",{ref:"sends",attrs:{selectArr:t.checkUidList,isAll:t.isAll}}),r("queue-list",{ref:"queue"}),r("Modal",{attrs:{title:"手动退款",width:"960","class-name":"refund-modal"},on:{"on-visible-change":t.visibleChange},model:{value:t.refundModal,callback:function(e){t.refundModal=e},expression:"refundModal"}},[r("Form",{attrs:{"label-width":100}},[r("FormItem",{attrs:{label:"退款金额：",required:""}},[r("Input",{staticStyle:{width:"408px"},attrs:{type:"number"},model:{value:t.refundMoney,callback:function(e){t.refundMoney=e},expression:"refundMoney"}})],1),t.refundProductNum>1?r("FormItem",{attrs:{label:"分单退款："}},[r("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.is_split_order,callback:function(e){t.is_split_order=e},expression:"is_split_order"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),r("div",{staticClass:"tips"},[t._v("\n          可选择表格中的商品单独退款，退款后且不能撤回，请谨慎操作！\n        ")]),r("Table",{directives:[{name:"show",rawName:"v-show",value:t.is_split_order,expression:"is_split_order"}],ref:"refundTable",attrs:{"max-height":"500",columns:t.refundColumns,data:t.refundProduct},on:{"on-selection-change":t.refundSelectionChange},scopedSlots:t._u([{key:"product",fn:function(e){var n=e.row;return[r("Tooltip",{attrs:{theme:"dark","max-width":"300",delay:600,transfer:!0},scopedSlots:t._u([{key:"content",fn:function(){return[r("div",{staticClass:"title"},[t._v("商品名称:"+t._s(n.productInfo.store_name))]),r("div",{staticClass:"title"},[t._v("商品规格："+t._s(n.productInfo.attrInfo.suk))])]},proxy:!0}],null,!0)},[r("div",[r("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"image-wrap"},[r("img",{staticClass:"image",attrs:{src:n.productInfo.attrInfo.image}})]),r("div",{staticClass:"title line2"},[t._v(t._s(n.productInfo.store_name))])])])]}},{key:"action",fn:function(e){var n=e.row;return[r("InputNumber",{attrs:{max:n.cart_num-n.refund_num,min:1,precision:0,"controls-outside":""},on:{"on-change":function(e){return t.refundNumChange(n)}},model:{value:n.refundNum,callback:function(e){t.$set(n,"refundNum",e)},expression:"row.refundNum"}})]}}],null,!1,1611676696)})],1):t._e(),r("formItem",{attrs:{label:"退款说明："}},[r("Input",{staticStyle:{width:"408px"},attrs:{placeholder:"请输入退款说明"},model:{value:t.refund_explain,callback:function(e){t.refund_explain=e},expression:"refund_explain"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:t.cancelRefundModal}},[t._v("取消")]),r("Button",{attrs:{type:"primary"},on:{click:t.putOpenRefund}},[t._v("提交")])],1)],1),r("changePrice",{ref:"changePrice",on:{submitSuccess:t.submitSuccess}})],1)}),[],!1,null,"98c8eb04",null).exports,cardsData:n.a},data:function(){return{currentTab:"-1",cardLists:[],selection:[],orderData:{status:"",data:"",real_name:"",field_key:"all",pay_type:""},autoDisabled:!0,orderDataStatus:"",isAll:0}},methods:{onChangeType:function(t){this.currentTab=t},changeGetTabs:function(){this.$refs.table.getTabs()},getData:function(t){this.$refs.table&&(this.$refs.table.checkBox=!1,this.$refs.table.getList(t))},getCards:function(t){this.cardLists=t},handleResize:function(){this.$refs.ellipsis.forEach((function(t){return t.init()}))},orderSelect:function(t){this.selection=t},onOrderData:function(t){this.orderData=t},orderDatas:function(t){this.orderData=t},onAutoDisabled:function(t){this.autoDisabled=!!t},onAll:function(t){this.isAll=t},selectChange2:function(t){this.orderDataStatus=t}},mounted:function(){}});function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function it(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=nt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r("0900");var ot={name:"list",components:{productlistDetails:Object(p.a)(rt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":"",padding:0}},[r("div",{staticClass:"new_card_pd"},[r("table-form",{attrs:{"is-all":t.isAll,"auto-disabled":t.autoDisabled,"form-selection":t.selection,orderDataStatus:t.orderDataStatus},on:{getList:t.getData,"order-data":t.orderDatas,onChangeType:t.onChangeType}})],1)]),t.cardLists.length>=0?r("cards-data",{attrs:{cardLists:t.cardLists}}):t._e(),r("Card",{attrs:{bordered:!1,"dis-hover":""}},[r("table-list",{ref:"table",attrs:{where:t.orderData,"is-all":t.isAll,currentTab:t.currentTab},on:{"on-all":t.onAll,"auto-disabled":t.onAutoDisabled,"order-data":t.onOrderData,"on-changeCards":t.getCards,changeGetTabs:t.changeGetTabs,"order-select":t.orderSelect,selectChange2:t.selectChange2}})],1)],1)}),[],!1,null,"f0418ed4",null).exports},data:function(){return{spinShow:!1,currentTab:"",data:[],tablists:null}},created:function(){this.getOrderType(""),this.getOrderStatus(""),this.getOrderTime(""),this.getOrderNum(""),this.getfieldKey(""),this.onChangeTabs(""),this.getSupplier_id(""),this.getStore_id(""),this.getType_id("")},beforeDestroy:function(){this.getOrderType(""),this.getOrderStatus(""),this.getOrderTime(""),this.getOrderNum(""),this.getfieldKey(""),this.onChangeTabs(""),this.getSupplier_id(""),this.getStore_id(""),this.getType_id("")},mounted:function(){},methods:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?at(Object(r),!0).forEach((function(e){it(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(a.d)("admin/order",["getOrderStatus","getOrderTime","getOrderNum","getfieldKey","onChangeTabs","getOrderType","getSupplier_id","getStore_id","getType_id"]))},st=(r("753a"),Object(p.a)(ot,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[(this.currentTab,e("productlist-details",{ref:"productlist"})),this.spinShow?e("Spin",{attrs:{size:"large",fix:""}}):this._e()],1)}),[],!1,null,"fe8076ec",null));e.default=st.exports},6621:function(t,e,r){"use strict";var n=r("0a16");r.n(n).a},6683:function(t,e,r){"use strict";var n=r("73f5"),a={name:"distshow",data:function(){var t=this;return{id:0,currentid:0,modals:!1,loading:!1,orderList:[],total:0,formValidate:{page:1,limit:15,keywords:"",id:0},columns:[{title:"选择",width:60,align:"center",render:function(e,r){var a=r.row.id,i=!1;i=t.currentid===a;var o=t;return e("div",[e("Radio",{props:{value:i},on:{"on-change":function(){o.currentid=a,Object(n.e)({oid:t.id,store_id:r.row.id}).then((function(e){t.$Message.success(e.msg),t.modals=!1,o.currentid=0,t.$parent.getList(),t.$parent.closeDetail()})).catch((function(e){t.modals=!1,t.$Message.error(e.msg),o.currentid=0}))}}})])}},{title:"ID",key:"id",minWidth:50},{title:"门店图片",slot:"image",minWidth:80},{title:"门店名称",key:"name",minWidth:80},{title:"联系电话",key:"phone",minWidth:80},{title:"门店地址",key:"address",ellipsis:!0,minWidth:150},{title:"营业时间",key:"day_time",minWidth:120},{title:"营业状态",key:"status_name",minWidth:80}]}},props:{},mounted:function(){},methods:{userSearchs:function(){this.formValidate.page=1,this.getList(this.id)},getList:function(t){var e=this;this.id=t,this.formValidate.id=t,this.loading=!0,Object(n.d)(this.formValidate).then((function(t){e.orderList=t.data.list,e.total=t.data.count,e.loading=!1}))},cancel:function(t){this.modals=!1},putRemark:function(){},pageChange:function(t){this.formValidate.page=t,this.getList(this.id)}}},i=(r("6621"),r("2877")),o=Object(i.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"请选择门店",width:"850"},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[r("div",{staticClass:"table"},[r("Form",{ref:"formValidate",attrs:{model:t.formValidate,"label-width":100},nativeOn:{submit:function(t){t.preventDefault()}}},[r("FormItem",{attrs:{label:"用户名称："}},[r("Input",{staticStyle:{width:"300px"},attrs:{search:"","enter-button":"",placeholder:"请输入用户名称/电话/地址"},on:{"on-search":t.userSearchs},model:{value:t.formValidate.keywords,callback:function(e){t.$set(t.formValidate,"keywords",e)},expression:"formValidate.keywords"}})],1)],1),r("Table",{ref:"table",staticClass:"mt25",attrs:{columns:t.columns,data:t.orderList,loading:t.loading,"highlight-row":"","no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:t._u([{key:"image",fn:function(t){var e=t.row;return t.index,[r("img",{attrs:{src:e.image}})]}}])}),r("div",{staticClass:"acea-row row-right page"},[r("Page",{attrs:{total:t.total,current:t.formValidate.page,"show-elevator":"","show-total":"","page-size":t.formValidate.limit},on:{"on-change":t.pageChange}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"})])}),[],!1,null,"5a6a1979",null);e.a=o.exports},7169:function(t,e,r){"use strict";var n=r("b696");r.n(n).a},"73f5":function(t,e,r){"use strict";r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return i})),r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return s})),r.d(e,"e",(function(){return c}));var n=r("b6bd");function a(t){return Object(n.a)({url:"merchant/store_list",method:"get",params:t})}function i(t){return Object(n.a)({url:"store/store",method:"get",params:t})}function o(t){return Object(n.a)({url:"city",method:"get",params:t})}function s(){return Object(n.a)({url:"store/store/address",method:"get"})}function c(t){return Object(n.a)({url:"store/share/order",method:"post",params:t})}},"753a":function(t,e,r){"use strict";var n=r("fc83");r.n(n).a},"79ad":function(t,e,r){"use strict";var n=r("cc70");r.n(n).a},"7b89":function(t,e,r){},"896e":function(t,e,r){"use strict";var n=r("f7b4");r.n(n).a},"9cc7":function(t,e,r){"use strict";var n=r("0a1e");r.n(n).a},"9cc8":function(t,e,r){"use strict";var n=r("388a");r.n(n).a},"9ea3":function(t,e,r){"use strict";var n=r("b5dc");r.n(n).a},a464:function(t,e,r){"use strict";var n={name:"table-expand",props:{row:Object}},a=(r("9cc7"),r("2877")),i=Object(a.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tdinfo"},[r("Row",{staticClass:"expand-row"},[r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("商品总价：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.total_price)}})]),r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("下单时间：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.add_time)}})]),r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("推广人：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.spread_nickname?t.row.spread_nickname:"无")}})])],1),r("Row",[r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("用户备注：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.mark?t.row.mark:"无")}})]),r("Col",{attrs:{span:"8"}},[r("span",{staticClass:"expand-key"},[t._v("商家备注：")]),r("span",{staticClass:"expand-value",domProps:{textContent:t._s(t.row.remark?t.row.remark:"无")}})])],1)],1)}),[],!1,null,"b662070e",null);e.a=i.exports},a496:function(t,e,r){},a584:function(t,e,r){"use strict";var n={name:"cards",data:function(){return{}},props:{cardLists:Array},methods:{},created:function(){}},a=(r("79ad"),r("2877")),i=Object(a.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Row",{staticClass:"ivu-mt",attrs:{type:"flex",align:"middle",gutter:16}},t._l(t.cardLists,(function(e,n){return r("Col",{key:n,staticClass:"ivu-mb",attrs:{xl:e.col,lg:8,md:12,sm:24,xs:24}},[r("Card",{staticClass:"card_cent",attrs:{shadow:"",padding:0}},[r("div",{staticClass:"card_box"},[r("div",{staticClass:"card_box_cir",class:{one:n%5==0,two:n%5==1,three:n%5==2,four:n%5==3,five:n%5==4}},[r("div",{staticClass:"card_box_cir1",class:{one1:n%5==0,two1:n%5==1,three1:n%5==2,four1:n%5==3,five1:n%5==4}},[e.type?r("span",{staticClass:"iconfont",class:e.className}):r("Icon",{attrs:{type:e.className}})],1)]),r("div",{staticClass:"card_box_txt"},[r("span",{staticClass:"sp1",domProps:{textContent:t._s(e.count||0)}}),r("span",{staticClass:"sp2",domProps:{textContent:t._s(e.name)}})])])])],1)})),1)],1)}),[],!1,null,"4a856645",null);e.a=i.exports},a6b9:function(t,e,r){"use strict";r.d(e,"J",(function(){return a})),r.d(e,"n",(function(){return i})),r.d(e,"a",(function(){return o})),r.d(e,"y",(function(){return s})),r.d(e,"z",(function(){return c})),r.d(e,"o",(function(){return l})),r.d(e,"h",(function(){return u})),r.d(e,"b",(function(){return d})),r.d(e,"v",(function(){return f})),r.d(e,"c",(function(){return p})),r.d(e,"B",(function(){return m})),r.d(e,"j",(function(){return h})),r.d(e,"l",(function(){return v})),r.d(e,"w",(function(){return _})),r.d(e,"r",(function(){return y})),r.d(e,"s",(function(){return g})),r.d(e,"u",(function(){return b})),r.d(e,"x",(function(){return w})),r.d(e,"K",(function(){return x})),r.d(e,"t",(function(){return I})),r.d(e,"k",(function(){return k})),r.d(e,"m",(function(){return C})),r.d(e,"q",(function(){return O})),r.d(e,"A",(function(){return D})),r.d(e,"g",(function(){return j})),r.d(e,"f",(function(){return L})),r.d(e,"p",(function(){return S})),r.d(e,"i",(function(){return E})),r.d(e,"G",(function(){return $})),r.d(e,"I",(function(){return T})),r.d(e,"d",(function(){return P})),r.d(e,"H",(function(){return M})),r.d(e,"e",(function(){return F})),r.d(e,"C",(function(){return N})),r.d(e,"D",(function(){return A})),r.d(e,"E",(function(){return W})),r.d(e,"L",(function(){return R})),r.d(e,"F",(function(){return G}));var n=r("b6bd");function a(t){return Object(n.a)({url:"supplier/supplier",method:"get",params:t})}function i(t){return Object(n.a)({url:"/supplier/supplier/".concat(t),method:"get"})}function o(t){return Object(n.a)({url:"supplier/supplier",method:"post",data:t})}function s(t,e){return Object(n.a)({url:"supplier/supplier/".concat(t),method:"put",data:e})}function c(t,e){return Object(n.a)({url:"/supplier/supplier/set_status/".concat(t,"/").concat(e),method:"put"})}function l(t){return Object(n.a)({url:"/supplier/list",method:"get",params:t})}function u(t){return Object(n.a)({url:"/supplier/order/list",method:"get",params:t})}function d(t){return Object(n.a)({url:"/supplier/order/deliver_remind/".concat(t.supplier_id,"/").concat(t.id),method:"put"})}function f(t){return Object(n.a)({url:"/supplier/order/info/".concat(t),method:"get"})}function p(t){return Object(n.a)({url:"/supplier/order/distribution_info",method:"get",params:{ids:t}})}function m(t,e){return Object(n.a)({url:"/supplier/order/split_order/"+t,method:"get",params:e})}function h(t){return Object(n.a)({url:"/supplier/order/status/".concat(t.id),method:"get",params:t.datas})}function v(t){return Object(n.a)({url:"/supplier/order/refund/".concat(t),method:"get"})}function _(t){return Object(n.a)({url:"/supplier/refund/list",method:"get",params:t})}function y(t){return Object(n.a)({url:"/supplier/home/header",method:"get",params:t})}function g(t){return Object(n.a)({url:"/supplier/home/order",method:"get",params:t})}function b(t){return Object(n.a)({url:"/supplier/home/order_channel",method:"get",params:t})}function w(t){return Object(n.a)({url:"/supplier/home/order_type",method:"get",params:t})}function x(t){return Object(n.a)({url:"/supplier/supplier/login/".concat(t),method:"get"})}function I(t){return Object(n.a)({url:"/supplier/home/supplier",method:"get",params:t})}function k(t){return Object(n.a)({url:"/supplier/refund/detail/".concat(t),method:"get"})}function C(t){return Object(n.a)({url:"/supplier/refund/refund/".concat(t),method:"get"})}function O(t){return Object(n.a)({url:"/supplier/order/no_refund/".concat(t),method:"get"})}function D(t){return Object(n.a)({url:"/supplier/order/refund_integral/".concat(t),method:"get"})}function j(t){return Object(n.a)({url:"/supplier/order/distribution/".concat(t),method:"get"})}function L(t){return Object(n.a)({url:"/supplier/apply/list",method:"get",params:t})}function S(t){return Object(n.a)({url:"/supplier/apply/verify/form/".concat(t),method:"get"})}function E(t){return Object(n.a)({url:"/supplier/apply/mark/form/".concat(t),method:"get"})}function $(t){return Object(n.a)({url:"/supplier/flowing_water/list",method:"get",params:t})}function T(t,e){return Object(n.a)({url:"/supplier/flowing_water/mark/".concat(t),method:"put",params:e})}function P(t){return Object(n.a)({url:"/export/supplierWaterExport",method:"get",params:t})}function M(t){return Object(n.a)({url:"/supplier/flowing_water/fund_record",method:"get",params:t})}function F(t){return Object(n.a)({url:"/export/supplierWaterRecord",method:"get",params:t})}function N(t){return Object(n.a)({url:"/supplier/extract/list",method:"get",params:t})}function A(t,e){return Object(n.a)({url:"/supplier/extract/mark/".concat(t),method:"post",data:e})}function W(t,e){return Object(n.a)({url:"/supplier/extract/verify/".concat(t),method:"post",data:e})}function R(t){return Object(n.a)({url:"/supplier/extract/transfer/".concat(t),method:"get"})}function G(t){return Object(n.a)({url:"/supplier/flowing_water/fund_record_info",method:"get",params:t})}},a716:function(t,e,r){"use strict";var n=r("c24f"),a=r("73f5"),i=r("8c03"),o=r("0f0e");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(){c=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),s=new $(n||[]);return a(o,"_invoke",{value:j(t,r,s)}),o}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var m="suspendedStart",h="suspendedYield",v="executing",_="completed",y={};function g(){}function b(){}function w(){}var x={};d(x,o,(function(){return this}));var I=Object.getPrototypeOf,k=I&&I(I(T([])));k&&k!==r&&n.call(k,o)&&(x=k);var C=w.prototype=g.prototype=Object.create(x);function O(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function r(a,i,o,c){var l=p(t[a],t,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==s(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,o,c)}),(function(t){r("throw",t,o,c)})):e.resolve(d).then((function(t){u.value=t,o(u)}),(function(t){return r("throw",t,o,c)}))}c(l.arg)}var i;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return i=i?i.then(a,a):a()}})}function j(e,r,n){var a=m;return function(i,o){if(a===v)throw Error("Generator is already running");if(a===_){if("throw"===i)throw o;return{value:t,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var c=L(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=v;var l=p(e,r,n);if("normal"===l.type){if(a=n.done?_:h,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=_,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=p(a,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(s(e)+" is not iterable")}return b.prototype=w,a(C,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,d(t,u,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},O(D.prototype),d(D.prototype,l,(function(){return this})),e.AsyncIterator=D,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new D(f(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(C),d(C,u,"Generator"),d(C,o,(function(){return this})),d(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function l(t,e,r,n,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}var u={name:"userForm",components:{customerInfo:i.default,userLabel:o.a},props:{psInfo:Object},data:function(){return{labelShow:!1,customerShow:!1,formData:{uid:this.psInfo.uid,real_name:this.psInfo.real_name,phone:this.psInfo.phone,birthday:this.psInfo.birthday,sex:this.psInfo.sex,card_id:this.psInfo.card_id,addres:this.psInfo.addres,pwd:"",true_pwd:"",spread_open:this.psInfo.spread_open,is_promoter:this.psInfo.is_promoter,status:this.psInfo.status,group_id:0,label_id:[],level:this.psInfo.level,provincials:"",province:0,city:0,area:0,street:0,spread_uid:0,spread_uid_nickname:""},dataLabel:[],addressSelect:[],levelOptions:[],labelOptions:[],addresData:[],groupList:[]}},watch:{psInfo:{handler:function(t){this.formData.uid=t.uid,this.formData.real_name=t.real_name,this.formData.phone=t.phone,this.formData.birthday=t.birthday,this.formData.sex=t.sex,this.formData.card_id=t.card_id,this.formData.addres=t.addres,this.formData.spread_open=t.spread_open,this.formData.status=t.status,this.dataLabel=t.label_id,this.formData.level=t.level,this.formData.provincials=t.provincials,this.formData.province=t.province,this.formData.city=t.city,this.formData.area=t.area,this.formData.street=t.street,this.formData.spread_uid_nickname=t.spread_uid_nickname,this.formData.spread_uid=t.spread_uid,this.formData.group_id=t.group_id},immediate:!0}},created:function(){this.levelList(),this.groupLists(),this.labelList(),this.cityInfo({pid:0}),this.psInfo.province&&this.addressSelect.push(this.psInfo.province),this.psInfo.city&&this.addressSelect.push(this.psInfo.city),this.psInfo.area&&this.addressSelect.push(this.psInfo.area),this.psInfo.street&&this.addressSelect.push(this.psInfo.street)},methods:{clearSpread:function(){this.formData.spread_uid=0,this.formData.spread_uid_nickname=""},closeLabel:function(t){var e=this.dataLabel.indexOf(this.dataLabel.filter((function(e){return e.id==t.id}))[0]);this.dataLabel.splice(e,1)},activeData:function(t){this.labelShow=!1,this.dataLabel=t},openLabel:function(){this.labelShow=!0,this.$refs.userLabel.userLabel(JSON.parse(JSON.stringify(this.dataLabel)))},labelClose:function(){this.labelShow=!1},editSpread:function(){this.customerShow=!0},imageObject:function(t){this.customerShow=!1,this.formData.spread_uid=t.uid,this.formData.spread_uid_nickname=t.name},changeMenu:function(t){this.$emit("change-menu",t)},add:function(t){var e=this;switch(t){case 1:this.$modalForm(Object(n.V)(0)).then((function(){}));break;case 2:this.$modalForm(Object(n.p)(0)).then((function(){e.groupLists()}))}},levelList:function(){var t=this;Object(n.s)({page:1,limit:"",title:"",is_show:1}).then((function(e){t.levelOptions=e.data.list}))},groupLists:function(){var t=this;Object(n.S)({page:1,limit:""}).then((function(e){t.groupList=e.data.list}))},labelList:function(){var t=this;Object(n.X)({page:1,limit:""}).then(function(){var e,r=(e=c().mark((function e(r){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.data,t.labelOptions=n.list;case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(t){l(i,n,a,o,s,"next",t)}function s(t){l(i,n,a,o,s,"throw",t)}o(void 0)}))});return function(t){return r.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))},cityInfo:function(t){var e=this;Object(a.a)(t).then((function(t){e.addresData=t.data}))},loadData:function(t,e){t.loading=!0,Object(a.a)({pid:t.value}).then((function(r){t.children=r.data,t.loading=!1,e()}))},addchack:function(t,e){var r=this;t.forEach((function(t,e){0==e?r.formData.province=t:1==e?r.formData.city=t:2==e?r.formData.area=t:r.formData.street=t})),this.formData.provincials=e.map((function(t){return t.label})).join("/")},dateChange:function(t){this.formData.birthday=t},detailsPut:function(){var t=this,e=[];if(this.dataLabel.forEach((function(t){e.push(t.id)})),this.formData.label_id=e,this.formData.phone&&!/^1(3|4|5|7|8|9|6)\d{9}$/.test(this.formData.phone))return this.$Message.error("请填写正确的手机号");Object(n.E)(this.formData).then((function(e){t.$Message.success("修改成功"),t.$emit("change-menu","99")})).catch((function(e){t.$Message.error(e.msg)}))}}},d=(r("9ea3"),r("2877")),f=Object(d.a)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Form",{attrs:{model:t.formData,"label-width":76}},[r("div",{staticClass:"section"},[r("div",{staticClass:"section-hd"},[t._v("基本信息")]),r("div",{staticClass:"section-bd"},[r("FormItem",{attrs:{label:"用户编号："}},[r("Input",{attrs:{disabled:""},model:{value:t.formData.uid,callback:function(e){t.$set(t.formData,"uid",e)},expression:"formData.uid"}})],1),r("FormItem",{attrs:{label:"真实姓名："}},[r("Input",{attrs:{placeholder:"请输入"},model:{value:t.formData.real_name,callback:function(e){t.$set(t.formData,"real_name",e)},expression:"formData.real_name"}})],1),r("FormItem",{attrs:{label:"手机号码："}},[r("Input",{attrs:{placeholder:"请输入"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1),r("FormItem",{attrs:{label:"生日："}},[r("DatePicker",{attrs:{value:t.formData.birthday},on:{"on-change":t.dateChange}})],1),r("FormItem",{attrs:{label:"性别："}},[r("Select",{model:{value:t.formData.sex,callback:function(e){t.$set(t.formData,"sex",e)},expression:"formData.sex"}},[r("Option",{attrs:{value:0}},[t._v("保密")]),r("Option",{attrs:{value:1}},[t._v("男")]),r("Option",{attrs:{value:2}},[t._v("女")])],1)],1),r("FormItem",{attrs:{label:"省市区："}},[r("Cascader",{attrs:{data:t.addresData,"load-data":t.loadData},on:{"on-change":t.addchack},model:{value:t.addressSelect,callback:function(e){t.addressSelect=e},expression:"addressSelect"}})],1),r("FormItem",{attrs:{label:"身份证号："}},[r("Input",{attrs:{placeholder:"请输入"},model:{value:t.formData.card_id,callback:function(e){t.$set(t.formData,"card_id",e)},expression:"formData.card_id"}})],1),r("FormItem",{attrs:{label:"详细地址："}},[r("Input",{attrs:{placeholder:"请输入"},model:{value:t.formData.addres,callback:function(e){t.$set(t.formData,"addres",e)},expression:"formData.addres"}})],1)],1)]),r("div",{staticClass:"section"},[r("div",{staticClass:"section-hd"},[t._v("密码设置")]),r("div",{staticClass:"section-bd"},[r("FormItem",{attrs:{label:"登录密码："}},[r("Input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入"},model:{value:t.formData.pwd,callback:function(e){t.$set(t.formData,"pwd",e)},expression:"formData.pwd"}})],1),r("FormItem",{attrs:{label:"确认密码："}},[r("Input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入"},model:{value:t.formData.true_pwd,callback:function(e){t.$set(t.formData,"true_pwd",e)},expression:"formData.true_pwd"}})],1)],1)]),r("div",{staticClass:"section"},[r("div",{staticClass:"section-hd"},[t._v("用户设置")]),r("div",{staticClass:"section-bd"},[r("FormItem",{attrs:{label:"推广资格："}},[r("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.formData.spread_open,callback:function(e){t.$set(t.formData,"spread_open",e)},expression:"formData.spread_open"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])],1),r("FormItem",{attrs:{label:"推广员权限：","label-width":90}},[r("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.formData.is_promoter,callback:function(e){t.$set(t.formData,"is_promoter",e)},expression:"formData.is_promoter"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])],1),r("FormItem",{attrs:{label:"用户状态："}},[r("i-switch",{attrs:{"true-value":1,"false-value":0,size:"large"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("锁定")])])],1),r("FormItem",{attrs:{label:"用户标签："}},[r("div",{staticClass:"flex-add"},[r("div",{staticClass:"labelInput acea-row row-between-wrapper",on:{click:t.openLabel}},[r("div",{staticClass:"width-add"},[t.dataLabel.length?r("div",t._l(t.dataLabel,(function(e,n){return r("Tag",{key:n,attrs:{closable:""},on:{"on-close":function(r){return t.closeLabel(e)}}},[t._v(t._s(e.label_name))])})),1):r("span",{staticClass:"span"},[t._v("选择用户关联标签")])]),r("div",{staticClass:"iconfont iconxiayi"})]),r("Button",{attrs:{type:"text"},on:{click:function(e){return t.add(1)}}},[t._v("添加标签")])],1)]),r("FormItem",{attrs:{label:"用户分组："}},[r("div",{staticClass:"flex-add"},[r("Select",{attrs:{placeholder:"请选择",transfer:!0},model:{value:t.formData.group_id,callback:function(e){t.$set(t.formData,"group_id",e)},expression:"formData.group_id"}},t._l(t.groupList,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.group_name))])})),1),r("Button",{attrs:{type:"text"},on:{click:function(e){return t.add(2)}}},[t._v("添加分组")])],1)]),r("FormItem",{attrs:{label:"用户等级："}},[r("Select",{model:{value:t.formData.level,callback:function(e){t.$set(t.formData,"level",e)},expression:"formData.level"}},t._l(t.levelOptions,(function(e){return r("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),r("FormItem",{attrs:{label:"推广人："}},[r("Input",{attrs:{clearable:"",placeholder:"请选择",icon:"ios-arrow-down"},on:{"on-clear":t.clearSpread,"on-focus":t.editSpread},model:{value:t.formData.spread_uid_nickname,callback:function(e){t.$set(t.formData,"spread_uid_nickname",e)},expression:"formData.spread_uid_nickname"}})],1)],1)])]),r("Modal",{attrs:{scrollable:"",title:"请选择商城用户",closable:!1,width:"900"},model:{value:t.customerShow,callback:function(e){t.customerShow=e},expression:"customerShow"}},[t.customerShow?r("customerInfo",{on:{imageObject:t.imageObject}}):t._e()],1),r("Modal",{attrs:{scrollable:"",title:"选择用户标签",closable:!0,width:"540","footer-hide":!0,"mask-closable":!1},model:{value:t.labelShow,callback:function(e){t.labelShow=e},expression:"labelShow"}},[r("userLabel",{ref:"userLabel",on:{activeData:t.activeData,close:t.labelClose}})],1)],1)}),[],!1,null,"4d2960fa",null).exports,p=r("5a0c"),m=r.n(p),h={name:"userInfo",props:{psInfo:Object,workMemberInfo:Object,workClientInfo:Object},filters:{timeFormat:function(t){return t?m()(1e3*t).format("YYYY-MM-DD HH:mm:ss"):"-"},gender:function(t){return 1==t?"男":2==t?"女":"未知"}},computed:{hasExtendInfo:function(){return this.psInfo.extend_info.some((function(t){return t.value}))}}};function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(){_=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),s=new $(n||[]);return a(o,"_invoke",{value:j(t,r,s)}),o}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function g(){}function b(){}function w(){}var x={};l(x,o,(function(){return this}));var I=Object.getPrototypeOf,k=I&&I(I(T([])));k&&k!==r&&n.call(k,o)&&(x=k);var C=w.prototype=g.prototype=Object.create(x);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function r(a,i,o,s){var c=d(t[a],t,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==v(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(u).then((function(t){l.value=t,o(l)}),(function(t){return r("throw",t,o,s)}))}s(c.arg)}var i;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return i=i?i.then(a,a):a()}})}function j(e,r,n){var a=f;return function(i,o){if(a===m)throw Error("Generator is already running");if(a===h){if("throw"===i)throw o;return{value:t,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var c=L(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=d(e,r,n);if("normal"===l.type){if(a=n.done?h:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=h,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=d(a,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(v(e)+" is not iterable")}return b.prototype=w,a(C,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=l(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,l(t,c,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},O(D.prototype),l(D.prototype,s,(function(){return this})),e.AsyncIterator=D,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new D(u(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(C),l(C,c,"Generator"),l(C,o,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function y(t,e,r,n,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function g(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){y(i,n,a,o,s,"next",t)}function s(t){y(i,n,a,o,s,"throw",t)}o(void 0)}))}}r("7169");var b={name:"userDetails",components:{userForm:f,userInfo:Object(d.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-info"},[r("div",{staticClass:"section"},[r("div",{staticClass:"section-hd"},[t._v("基本信息")]),r("div",{staticClass:"section-bd"},[r("div",{staticClass:"item"},[r("div",[t._v("用户编号：")]),r("div",{staticClass:"value"},[t._v(t._s(t.psInfo.uid))])]),r("div",{staticClass:"item"},[r("div",[t._v("真实姓名：")]),r("div",{staticClass:"value"},[t._v(t._s(t.psInfo.real_name||"-"))])]),r("div",{staticClass:"item"},[r("div",[t._v("手机号码：")]),r("div",{staticClass:"value"},[t._v(t._s(t.psInfo.phone||"-"))])]),r("div",{staticClass:"item"},[r("div",[t._v("生日：")]),r("div",{staticClass:"value"},[t._v(t._s(t.psInfo.birthday||"-"))])]),r("div",{staticClass:"item"},[r("div",[t._v("性别：")]),t.psInfo.sex?r("div",{staticClass:"value"},[t._v(t._s(1==t.psInfo.sex?"男":"女"))]):r("div",{staticClass:"value"},[t._v("保密")])]),r("div",{staticClass:"item"},[r("div",[t._v("身份证号：")]),r("div",{staticClass:"value"},[t._v(t._s(t.psInfo.card_id||"-"))])]),r("div",{staticClass:"item"},[r("div",[t._v("用户地址：")]),r("div",{staticClass:"value"},[t._v(t._s(""+t.psInfo.provincials+t.psInfo.addres||"-"))])])])]),t._m(0),r("div",{staticClass:"section"},[r("div",{staticClass:"section-hd"},[t._v("用户概况")]),r("div",{staticClass:"section-bd"},[r("div",{staticClass:"item"},[r("div",[t._v("推广资格：")]),r("div",{staticClass:"value"},[t._v(t._s(t.psInfo.spread_open?"启用":"禁用"))])]),r("div",{staticClass:"item"},[r("div",[t._v("用户状态：")]),r("div",{staticClass:"value"},[t._v(t._s(t.psInfo.status?"开启":"锁定"))])]),r("div",{staticClass:"item"},[r("div",[t._v("用户等级：")]),r("div",{staticClass:"value"},[t._v(t._s(t.psInfo.vip_name))])]),r("div",{staticClass:"item"},[r("div",[t._v("用户标签：")]),r("div",{staticClass:"value"},[t._v(t._s(t.psInfo.label_list))])]),r("div",{staticClass:"item"},[r("div",[t._v("用户分组：")]),r("div",{staticClass:"value"},[t._v(t._s(t.psInfo.group_name||"无"))])]),r("div",{staticClass:"item"},[r("div",[t._v("推广人：")]),r("div",{staticClass:"value"},[t._v(t._s(t.psInfo.spread_uid_nickname||"无"))])]),r("div",{staticClass:"item"},[r("div",[t._v("注册时间：")]),r("div",{staticClass:"value"},[t._v(t._s(t._f("timeFormat")(t.psInfo.add_time)))])]),r("div",{staticClass:"item"},[r("div",[t._v("登录时间：")]),r("div",{staticClass:"value"},[t._v(t._s(t._f("timeFormat")(t.psInfo.last_time)))])]),r("div",{staticClass:"item"},[r("div",[t._v("上次登录 IP：")]),r("div",{staticClass:"value"},[t._v(t._s(t.psInfo.last_ip))])]),t.psInfo.is_money_level?r("div",{staticClass:"item"},[r("div",[t._v("付费会员：")]),r("div",{staticClass:"value"},[t._v(t._s(1==t.psInfo.is_ever_level?"永久会员":t.psInfo.overdue_time?t.psInfo.overdue_time+" 到期":"已过期"))])]):t._e()])]),r("div",{staticClass:"section"},[r("div",{staticClass:"section-hd"},[t._v("用户备注")]),r("div",{staticClass:"section-bd"},[r("div",{staticClass:"item"},[r("div",[t._v("备注：")]),r("div",{staticClass:"value"},[t._v(t._s(t.psInfo.mark||"-"))])])])]),t.hasExtendInfo?r("div",{staticClass:"section"},[r("div",{staticClass:"section-hd"},[t._v("补充信息")]),r("div",{staticClass:"section-bd"},[t._l(t.psInfo.extend_info,(function(e){return[e.value?r("div",{key:e.sort,staticClass:"item"},[r("div",[t._v(t._s(e.info)+"：")]),"sex"==e.param?r("div",{staticClass:"value"},[t._v(t._s(e.singlearr[e.value]))]):r("div",{staticClass:"value"},[t._v(t._s(e.value))])]):t._e()]}))],2)]):t._e(),t.workMemberInfo?r("div",{staticClass:"section"},[r("div",{staticClass:"section-hd"},[t._v("企业成员信息")]),r("div",{staticClass:"section-bd"},[r("div",{staticClass:"item"},[r("div",{staticClass:"avatar"},[r("img",{attrs:{src:t.workMemberInfo.qr_code,alt:""}})])])]),r("div",{staticClass:"section-bd"},[r("div",{staticClass:"item"},[r("div",[t._v("姓名：")]),r("div",{staticClass:"value"},[t._v(t._s(t.workMemberInfo.name||"-"))])]),r("div",{staticClass:"item"},[r("div",[t._v("职务信息：")]),r("div",{staticClass:"value"},[t._v(t._s(t.workMemberInfo.position||"-"))])]),r("div",{staticClass:"item"},[r("div",[t._v("手机号码：")]),r("div",{staticClass:"value"},[t._v(t._s(t.workMemberInfo.mobile||"-"))])]),r("div",{staticClass:"item"},[r("div",[t._v("性别：")]),r("div",{staticClass:"value"},[t._v(t._s(t._f("gender")(t.workMemberInfo.gender)))])]),r("div",{staticClass:"item"},[r("div",{staticClass:"width-add "},[t._v("邮箱：")]),r("div",{staticClass:"value"},[t._v(t._s(t.workMemberInfo.biz_mail||"-"))])]),r("div",{staticClass:"item mr30"},[r("div",[t._v("地址：")]),r("div",{staticClass:"value"},[t._v(t._s(t.workMemberInfo.address||"-"))])]),r("div",{staticClass:"item"},[r("div",[t._v("备注：")]),r("div",{staticClass:"value"},[t._v(t._s(t.workMemberInfo.remark||"-"))])])])]):t._e(),t.workClientInfo?r("div",{staticClass:"section"},[r("div",{staticClass:"section-hd"},[t._v("企业客户信息")]),r("div",{staticClass:"section-bd"},[r("div",{staticClass:"item"},[r("div",[t._v("姓名：")]),r("div",{staticClass:"value"},[t._v(t._s(t.workClientInfo.name||"-"))])]),r("div",{staticClass:"item"},[r("div",[t._v("职务信息：")]),r("div",{staticClass:"value"},[t._v(t._s(t.workClientInfo.position||"-"))])]),r("div",{staticClass:"item"},[r("div",[t._v("备注：")]),r("div",{staticClass:"value"},[t._v(t._s(t.workClientInfo.remark||"-"))])]),r("div",{staticClass:"item"},[r("div",[t._v("性别：")]),r("div",{staticClass:"value"},[t._v(t._s(t._f("gender")(t.workClientInfo.gender)))])]),r("div",{staticClass:"item"},[r("div",[t._v("企业主体名称：")]),r("div",{staticClass:"value"},[t._v(t._s(t.workClientInfo.corp_full_name||"-"))])]),r("div",{staticClass:"item"},[r("div",[t._v("企业主体简称：")]),r("div",{staticClass:"value"},[t._v(t._s(t.workClientInfo.corp_name||"-"))])])])]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"section"},[e("div",{staticClass:"section-hd"},[this._v("密码")]),e("div",{staticClass:"section-bd"},[e("div",{staticClass:"item"},[e("div",[this._v("登录密码：")]),e("div",{staticClass:"value"},[this._v("********")])])])])}],!1,null,"478f3d3e",null).exports},props:["levelList","labelList","groupList","fromType"],data:function(){return{theme2:"light",list:[{val:"info",label:"用户信息"},{val:"order",label:"消费记录"},{val:"integral",label:"积分明细"},{val:"sign",label:"签到记录"},{val:"coupon",label:"持有优惠券"},{val:"balance_change",label:"余额变动"},{val:"spread",label:"好友关系"},{val:"visit",label:"浏览足迹"},{val:"spread_change",label:"推荐人变更记录"}],modals:!1,spinShow:!1,detailsData:[],userId:0,loading:!1,userFrom:{type:"info",page:1,limit:12},total:0,columns:[],userLists:[],psInfo:{},workMemberInfo:{},workClientInfo:{},activeName:"info",isEdit:!1,groupOptions:[],labelOptions:[]}},watch:{activeName:function(t){this.userFrom.page=1,"info"!=t&&(this.isEdit=!1,this.changeType(t))},modals:function(t){t&&(this.isEdit=!1)}},created:function(){},methods:{changeMenu:function(t){if("99"===t)return this.getDetails(this.userId),this.$parent.getList(),void(this.isEdit=!1);this.$parent.changeMenu(this.psInfo,t)},finish:function(){this.$refs.userForm[0].detailsPut()},getSpreadList:function(){var t=this;this.loading=!0,Object(n.O)({id:this.userId,datas:{page:this.userFrom.page,limit:this.userFrom.limit}}).then(function(){var e=g(_().mark((function e(r){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===r.status?(n=r.data,t.userLists=n.list,t.total=n.count,t.columns=[{title:"推荐人ID",key:"spread_uid",minWidth:120},{title:"推荐人",key:"nickname",minWidth:120,render:function(t,e){return t("div",[t("img",{style:{borderRadius:"50%",marginRight:"10px",verticalAlign:"middle"},attrs:{with:38,height:38},directives:[{name:"lazy",value:e.row.avatar},{name:"viewer"}]}),t("span",{style:{verticalAlign:"middle"}},e.row.nickname)])}},{title:"变更方式",key:"type",minWidth:120},{title:"变更时间",key:"spread_time",minWidth:120}],t.loading=!1):(t.loading=!1,t.$Message.error(r.msg));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))},getVisitList:function(){var t=this;this.loading=!0,Object(n.hb)({id:this.userId,datas:{page:this.userFrom.page,limit:this.userFrom.limit}}).then(function(){var e=g(_().mark((function e(r){var n;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:200===r.status?(n=r.data,t.userLists=n.list,t.total=n.count,t.columns=[{title:"商品信息",slot:"product",minWidth:400},{title:"价格",key:"product_price",minWidth:120,render:function(t,e){return t("div","¥".concat(e.row.product_price))}},{title:"浏览时间",key:"add_time",minWidth:120}],t.loading=!1):(t.loading=!1,t.$Message.error(r.msg));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.loading=!1,t.$Message.error(e.msg)}))},getDetails:function(t){var e=this;this.userId=t,this.spinShow=!0,Object(n.g)(t).then(function(){var t=g(_().mark((function t(r){var n,a;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:200===r.status?(n=r.data,e.detailsData=n.headerList,"order"!==e.fromType&&(a=e.groupList.find((function(t){return t.id==n.ps_info.group_id})))&&(n.ps_info.group_name=a.group_name),e.psInfo=n.ps_info,e.workMemberInfo=n.workMemberInfo,e.workClientInfo=n.workClientInfo,e.spinShow=!1):(e.spinShow=!1,e.$Message.error(r.msg));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.spinShow=!1,e.$Message.error(t.msg)}))},pageChange:function(t){this.userFrom.page=t,this.changeType(this.userFrom.type)},changeType:function(t){var e=this;this.loading=!0,this.userFrom.type=t,this.activeName=t;var r={id:this.userId,datas:this.userFrom};Object(n.q)(r).then(function(){var t=g(_().mark((function t(r){var n;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200!==r.status){t.next=25;break}n=r.data,e.userLists=n.list,e.total=n.count,t.t0=e.userFrom.type,t.next="order"===t.t0?7:"integral"===t.t0?9:"sign"===t.t0?11:"coupon"===t.t0?13:"balance_change"===t.t0?15:"visit"===t.t0?17:"spread_change"===t.t0?19:21;break;case 7:return e.columns=[{title:"订单ID",key:"order_id",minWidth:160},{title:"收货人",key:"real_name",minWidth:100},{title:"商品数量",key:"total_num",minWidth:90},{title:"商品总价",key:"total_price",minWidth:110},{title:"实付金额",key:"pay_price",minWidth:120},{title:"交易完成时间",key:"pay_time",minWidth:120}],t.abrupt("break",22);case 9:return e.columns=[{title:"来源/用途",key:"title",minWidth:120},{title:"积分变化",key:"number",minWidth:120},{title:"变化后积分",key:"balance",minWidth:120},{title:"日期",key:"add_time",minWidth:120},{title:"备注",key:"mark",minWidth:120}],t.abrupt("break",22);case 11:return e.columns=[{title:"获得积分",key:"number",minWidth:120},{title:"签到时间",key:"add_time",minWidth:120},{title:"备注",key:"mark",minWidth:120}],t.abrupt("break",22);case 13:return e.columns=[{title:"优惠券名称",key:"coupon_title",minWidth:120},{title:"面值",slot:"coupon_price",minWidth:120},{title:"有效期(天)",key:"coupon_time",minWidth:120},{title:"兑换时间",key:"_add_time",minWidth:120}],t.abrupt("break",22);case 15:return e.columns=[{title:"动作",key:"title",minWidth:120},{title:"变动金额",key:"number",minWidth:120},{title:"变动后",key:"balance",minWidth:120},{title:"创建时间",key:"add_time",minWidth:120},{title:"备注",key:"mark",minWidth:120}],t.abrupt("break",22);case 17:return e.columns=[{title:"商品信息",slot:"product",minWidth:400},{title:"价格",key:"product_price",minWidth:120,render:function(t,e){return t("div","¥".concat(e.row.product_price))}},{title:"浏览时间",key:"add_time",minWidth:120}],t.abrupt("break",22);case 19:return e.columns=[{title:"推荐人ID",key:"spread_uid",minWidth:120},{title:"推荐人",key:"nickname",minWidth:120,render:function(t,e){return t("div",[t("img",{style:{borderRadius:"50%",marginRight:"10px",verticalAlign:"middle"},attrs:{with:38,height:38},directives:[{name:"lazy",value:e.row.avatar},{name:"viewer"}]}),t("span",{style:{verticalAlign:"middle"}},e.row.nickname)])}},{title:"变更方式",key:"type",minWidth:120},{title:"变更时间",key:"spread_time",minWidth:120}],t.abrupt("break",22);case 21:e.columns=[{title:"ID",key:"uid",minWidth:120},{title:"昵称",key:"nickname",minWidth:120},{title:"等级",key:"type",minWidth:120},{title:"加入时间",key:"add_time",minWidth:120}];case 22:e.loading=!1,t.next=27;break;case 25:e.loading=!1,e.$Message.error(r.msg);case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))}}},w=(r("0622"),r("b62a"),Object(d.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Drawer",{attrs:{closable:!1,width:"1000","class-name":"order_box",styles:{padding:0}},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[n("div",{staticClass:"acea-row user-row"},[n("div",{staticClass:"avatar mr15"},[n("img",{attrs:{src:t.psInfo.avatar}})]),n("div",{staticClass:"user-row-text"},[n("div",[n("span",{staticClass:"nickname"},[t._v(t._s(t.psInfo.nickname||"-")+t._s(null!=t.psInfo.delete_time?" (已注销)":""))]),n("i",{staticClass:"iconfont",class:{iconxiaochengxu:"routine"===t.psInfo.user_type,icongongzhonghao:"wechat"===t.psInfo.user_type,iconPC:"pc"===t.psInfo.user_type,iconh5:"h5"===t.psInfo.user_type,iconapp:"app"===t.psInfo.user_type}})]),n("div",{staticClass:"level"},[t.psInfo.is_money_level?n("img",{attrs:{src:r("30a5")}}):t._e(),t.psInfo.level?n("span",{staticClass:"vip"},[t._v("V"+t._s(t.psInfo.level))]):t._e()])]),"order"!==t.fromType&&null==t.psInfo.delete_time?n("div",{staticClass:"user-row-action"},[n("Button",{directives:[{name:"show",rawName:"v-show",value:t.isEdit,expression:"isEdit"}],on:{click:function(e){t.isEdit=!1}}},[t._v("取消")]),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.isEdit,expression:"isEdit"}],attrs:{type:"primary"},on:{click:t.finish}},[t._v("完成")]),n("Button",{directives:[{name:"show",rawName:"v-show",value:!t.isEdit&&"info"===t.activeName,expression:"!isEdit && activeName === 'info'"}],attrs:{type:"primary"},on:{click:function(e){t.isEdit=!0}}},[t._v("编辑")]),n("Button",{attrs:{type:"success"},on:{click:function(e){return t.changeMenu("2")}}},[t._v("积分余额")]),n("Button",{on:{click:function(e){return t.changeMenu("3")}}},[t._v("赠送会员")])],1):t._e()]),n("div",{staticClass:"acea-row info-row"},t._l(t.detailsData,(function(e,r){return n("div",{key:r,staticClass:"info-row-item"},[n("div",{staticClass:"info-row-item-title"},[t._v(t._s(e.title))]),n("div",[t._v(t._s(e.value)+t._s(e.key))])])})),0),n("Tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.list,(function(e,r){return n("TabPane",{key:r,attrs:{label:e.label,name:e.val}},["info"===e.val?[t.isEdit?n("user-form",{ref:"userForm",refInFor:!0,attrs:{"ps-info":t.psInfo},on:{"change-menu":t.changeMenu}}):n("user-info",{attrs:{"ps-info":t.psInfo,workMemberInfo:t.workMemberInfo,workClientInfo:t.workClientInfo}})]:[n("Table",{ref:"table",refInFor:!0,attrs:{columns:t.columns,data:t.userLists,loading:t.loading,"no-userFrom-text":"暂无数据","no-filtered-userFrom-text":"暂无筛选结果"},scopedSlots:t._u([{key:"coupon_price",fn:function(e){var r=e.row;return[1==r.coupon_type?n("span",[t._v(t._s(r.coupon_price)+"元")]):t._e(),2==r.coupon_type?n("span",[t._v(t._s(parseFloat(r.coupon_price)/10)+"折（"+t._s(r.coupon_price.toString().split(".")[0])+"%）")]):t._e()]}},{key:"product",fn:function(e){var r=e.row;return[n("div",{staticClass:"product"},[n("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:r.image,expression:"row.image"}]})]),n("div",{staticClass:"title"},[t._v(t._s(r.store_name))])])]}}],null,!0)}),n("div",{staticClass:"acea-row row-right page"},[n("Page",{attrs:{total:t.total,current:t.userFrom.page,"show-elevator":"","show-total":"","page-size":t.userFrom.limit},on:{"update:current":function(e){return t.$set(t.userFrom,"page",e)},"on-change":t.pageChange}})],1)]],2)})),1)],1)}),[],!1,null,"15a80065",null));e.a=w.exports},add5:function(t,e,r){var n;window,n=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}({"./src/index.js":function(t,e,r){"use strict";r.r(e),r("./src/sass/index.scss");var n=r("./src/js/init.js").default.init;"undefined"!=typeof window&&(window.printJS=n),e.default=n},"./src/js/browser.js":function(t,e,r){"use strict";r.r(e);var n={isFirefox:function(){return"undefined"!=typeof InstallTrigger},isIE:function(){return-1!==navigator.userAgent.indexOf("MSIE")||!!document.documentMode},isEdge:function(){return!n.isIE()&&!!window.StyleMedia},isChrome:function(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||-1!==navigator.userAgent.toLowerCase().indexOf("safari")},isIOSChrome:function(){return-1!==navigator.userAgent.toLowerCase().indexOf("crios")}};e.default=n},"./src/js/functions.js":function(t,e,r){"use strict";r.r(e),r.d(e,"addWrapper",(function(){return o})),r.d(e,"capitalizePrint",(function(){return s})),r.d(e,"collectStyles",(function(){return c})),r.d(e,"addHeader",(function(){return u})),r.d(e,"cleanUp",(function(){return d})),r.d(e,"isRawHTML",(function(){return f}));var n=r("./src/js/modal.js"),a=r("./src/js/browser.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return'<div style="font-family:'+e.font+" !important; font-size: "+e.font_size+' !important; width:100%;">'+t+"</div>"}function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}function c(t,e){for(var r="",n=(document.defaultView||window).getComputedStyle(t,""),a=0;a<n.length;a++)(-1!==e.targetStyles.indexOf("*")||-1!==e.targetStyle.indexOf(n[a])||l(e.targetStyles,n[a]))&&n.getPropertyValue(n[a])&&(r+=n[a]+":"+n.getPropertyValue(n[a])+";");return r+"max-width: "+e.maxWidth+"px !important; font-size: "+e.font_size+" !important;"}function l(t,e){for(var r=0;r<t.length;r++)if("object"===i(e)&&-1!==e.indexOf(t[r]))return!0;return!1}function u(t,e){var r=document.createElement("div");if(f(e.header))r.innerHTML=e.header;else{var n=document.createElement("h1"),a=document.createTextNode(e.header);n.appendChild(a),n.setAttribute("style",e.headerStyle),r.appendChild(n)}t.insertBefore(r,t.childNodes[0])}function d(t){t.showModal&&n.default.close(),t.onLoadingEnd&&t.onLoadingEnd(),(t.showModal||t.onLoadingStart)&&window.URL.revokeObjectURL(t.printable);var e="mouseover";(a.default.isChrome()||a.default.isFirefox())&&(e="focus"),window.addEventListener(e,(function r(){window.removeEventListener(e,r),t.onPrintDialogClose();var n=document.getElementById(t.frameId);n&&n.remove()}))}function f(t){return new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>").test(t)}},"./src/js/html.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/js/functions.js"),a=r("./src/js/print.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.default={print:function(t,e){var r,o="object"===i(r=t.printable)&&r&&(r instanceof HTMLElement||1===r.nodeType)?t.printable:document.getElementById(t.printable);o?(t.printableElement=function t(e,r){for(var a=e.cloneNode(),i=Array.prototype.slice.call(e.childNodes),o=0;o<i.length;o++)if(-1===r.ignoreElements.indexOf(i[o].id)){var s=t(i[o],r);a.appendChild(s)}switch(r.scanStyles&&1===e.nodeType&&a.setAttribute("style",Object(n.collectStyles)(e,r)),e.tagName){case"SELECT":a.value=e.value;break;case"CANVAS":a.getContext("2d").drawImage(e,0,0)}return a}(o,t),t.header&&Object(n.addHeader)(t.printableElement,t),a.default.send(t,e)):window.console.error("Invalid HTML element id: "+t.printable)}}},"./src/js/image.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/js/functions.js"),a=r("./src/js/print.js"),i=r("./src/js/browser.js");e.default={print:function(t,e){t.printable.constructor!==Array&&(t.printable=[t.printable]),t.printableElement=document.createElement("div"),t.printable.forEach((function(e){var r=document.createElement("img");if(r.setAttribute("style",t.imageStyle),r.src=e,i.default.isFirefox()){var n=r.src;r.src=n}var a=document.createElement("div");a.appendChild(r),t.printableElement.appendChild(a)})),t.header&&Object(n.addHeader)(t.printableElement,t),a.default.send(t,e)}}},"./src/js/init.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/js/browser.js"),a=r("./src/js/modal.js"),i=r("./src/js/pdf.js"),o=r("./src/js/html.js"),s=r("./src/js/raw-html.js"),c=r("./src/js/image.js"),l=r("./src/js/json.js");function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var d=["pdf","html","image","json","raw-html"];e.default={init:function(){var t={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(t){throw t},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},e=arguments[0];if(void 0===e)throw new Error("printJS expects at least 1 attribute.");switch(u(e)){case"string":t.printable=encodeURI(e),t.fallbackPrintable=t.printable,t.type=arguments[1]||t.type;break;case"object":for(var r in t.printable=e.printable,t.fallbackPrintable=void 0!==e.fallbackPrintable?e.fallbackPrintable:t.printable,t.fallbackPrintable=t.base64?"data:application/pdf;base64,".concat(t.fallbackPrintable):t.fallbackPrintable,t)"printable"!==r&&"fallbackPrintable"!==r&&(t[r]=void 0!==e[r]?e[r]:t[r]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+u(e))}if(!t.printable)throw new Error("Missing printable information.");if(!t.type||"string"!=typeof t.type||-1===d.indexOf(t.type.toLowerCase()))throw new Error("Invalid print type. Available types are: pdf, html, image and json.");t.showModal&&a.default.show(t),t.onLoadingStart&&t.onLoadingStart();var f=document.getElementById(t.frameId);f&&f.parentNode.removeChild(f);var p=document.createElement("iframe");switch(n.default.isFirefox()?p.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):p.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),p.setAttribute("id",t.frameId),"pdf"!==t.type&&(p.srcdoc="<html><head><title>"+t.documentTitle+"</title>",t.css&&(Array.isArray(t.css)||(t.css=[t.css]),t.css.forEach((function(t){p.srcdoc+='<link rel="stylesheet" href="'+t+'">'}))),p.srcdoc+="</head><body></body></html>"),t.type){case"pdf":if(n.default.isIE())try{window.open(t.fallbackPrintable,"_blank").focus(),t.onIncompatibleBrowser()}catch(e){t.onError(e)}finally{t.showModal&&a.default.close(),t.onLoadingEnd&&t.onLoadingEnd()}else i.default.print(t,p);break;case"image":c.default.print(t,p);break;case"html":o.default.print(t,p);break;case"raw-html":s.default.print(t,p);break;case"json":l.default.print(t,p)}}}},"./src/js/json.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/js/functions.js"),a=r("./src/js/print.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.default={print:function(t,e){if("object"!==i(t.printable))throw new Error("Invalid javascript data object (JSON).");if("boolean"!=typeof t.repeatTableHeader)throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!t.properties||!Array.isArray(t.properties))throw new Error("Invalid properties array for your JSON data.");t.properties=t.properties.map((function(e){return{field:"object"===i(e)?e.field:e,displayName:"object"===i(e)?e.displayName:e,columnSize:"object"===i(e)&&e.columnSize?e.columnSize+";":100/t.properties.length+"%;"}})),t.printableElement=document.createElement("div"),t.header&&Object(n.addHeader)(t.printableElement,t),t.printableElement.innerHTML+=function(t){var e=t.printable,r=t.properties,a='<table style="border-collapse: collapse; width: 100%;">';t.repeatTableHeader&&(a+="<thead>"),a+="<tr>";for(var i=0;i<r.length;i++)a+='<th style="width:'+r[i].columnSize+";"+t.gridHeaderStyle+'">'+Object(n.capitalizePrint)(r[i].displayName)+"</th>";a+="</tr>",t.repeatTableHeader&&(a+="</thead>"),a+="<tbody>";for(var o=0;o<e.length;o++){a+="<tr>";for(var s=0;s<r.length;s++){var c=e[o],l=r[s].field.split(".");if(l.length>1)for(var u=0;u<l.length;u++)c=c[l[u]];else c=c[r[s].field];a+='<td style="width:'+r[s].columnSize+t.gridStyle+'">'+c+"</td>"}a+="</tr>"}return a+"</tbody></table>"}(t),a.default.send(t,e)}}},"./src/js/modal.js":function(t,e,r){"use strict";r.r(e);var n={show:function(t){var e=document.createElement("div");e.setAttribute("style","font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;"),e.setAttribute("id","printJS-Modal");var r=document.createElement("div");r.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var a=document.createElement("div");a.setAttribute("class","printClose"),a.setAttribute("id","printClose"),r.appendChild(a);var i=document.createElement("span");i.setAttribute("class","printSpinner"),r.appendChild(i);var o=document.createTextNode(t.modalMessage);r.appendChild(o),e.appendChild(r),document.getElementsByTagName("body")[0].appendChild(e),document.getElementById("printClose").addEventListener("click",(function(){n.close()}))},close:function(){var t=document.getElementById("printJS-Modal");t&&t.parentNode.removeChild(t)}};e.default=n},"./src/js/pdf.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/js/print.js"),a=r("./src/js/functions.js");function i(t,e,r){var a=new window.Blob([r],{type:"application/pdf"});a=window.URL.createObjectURL(a),e.setAttribute("src",a),n.default.send(t,e)}e.default={print:function(t,e){if(t.base64){var r=Uint8Array.from(atob(t.printable),(function(t){return t.charCodeAt(0)}));i(t,e,r)}else{t.printable=/^(blob|http|\/\/)/i.test(t.printable)?t.printable:window.location.origin+("/"!==t.printable.charAt(0)?"/"+t.printable:t.printable);var n=new window.XMLHttpRequest;n.responseType="arraybuffer",n.addEventListener("error",(function(){Object(a.cleanUp)(t),t.onError(n.statusText,n)})),n.addEventListener("load",(function(){if(-1===[200,201].indexOf(n.status))return Object(a.cleanUp)(t),void t.onError(n.statusText,n);i(t,e,n.response)})),n.open("GET",t.printable,!0),n.send()}}}},"./src/js/print.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/js/browser.js"),a=r("./src/js/functions.js"),i={send:function(t,e){document.getElementsByTagName("body")[0].appendChild(e);var r=document.getElementById(t.frameId);r.onload=function(){if("pdf"!==t.type){var e=r.contentWindow||r.contentDocument;if(e.document&&(e=e.document),e.body.appendChild(t.printableElement),"pdf"!==t.type&&t.style){var a=document.createElement("style");a.innerHTML=t.style,e.head.appendChild(a)}var i=e.getElementsByTagName("img");i.length>0?function(t){var e=t.map((function(t){if(t.src&&t.src!==window.location.href)return function(t){return new Promise((function(e){!function r(){t&&void 0!==t.naturalWidth&&0!==t.naturalWidth&&t.complete?e():setTimeout(r,500)}()}))}(t)}));return Promise.all(e)}(Array.from(i)).then((function(){return o(r,t)})):o(r,t)}else n.default.isFirefox()?setTimeout((function(){return o(r,t)}),1e3):o(r,t)}}};function o(t,e){try{if(t.focus(),n.default.isEdge()||n.default.isIE())try{t.contentWindow.document.execCommand("print",!1,null)}catch(e){t.contentWindow.print()}else t.contentWindow.print()}catch(t){e.onError(t)}finally{n.default.isFirefox()&&(t.style.visibility="hidden",t.style.left="-1px"),Object(a.cleanUp)(e)}}e.default=i},"./src/js/raw-html.js":function(t,e,r){"use strict";r.r(e);var n=r("./src/js/print.js");e.default={print:function(t,e){t.printableElement=document.createElement("div"),t.printableElement.setAttribute("style","width:100%"),t.printableElement.innerHTML=t.printable,n.default.send(t,e)}}},"./src/sass/index.scss":function(t,e,r){},0:function(t,e,r){t.exports=r("./src/index.js")}}).default},t.exports=n()},aed0:function(t,e,r){},b0ee:function(t,e,r){"use strict";var n=r("023d");r.n(n).a},b5dc:function(t,e,r){},b62a:function(t,e,r){"use strict";var n=r("2711");r.n(n).a},b696:function(t,e,r){},bddf:function(t,e,r){"use strict";var n=r("3cb6");r.n(n).a},c24f:function(t,e,r){"use strict";r.d(e,"ab",(function(){return a})),r.d(e,"N",(function(){return i})),r.d(e,"M",(function(){return o})),r.d(e,"k",(function(){return s})),r.d(e,"r",(function(){return c})),r.d(e,"d",(function(){return l})),r.d(e,"h",(function(){return u})),r.d(e,"g",(function(){return d})),r.d(e,"q",(function(){return f})),r.d(e,"s",(function(){return p})),r.d(e,"J",(function(){return m})),r.d(e,"P",(function(){return h})),r.d(e,"L",(function(){return v})),r.d(e,"K",(function(){return _})),r.d(e,"f",(function(){return y})),r.d(e,"e",(function(){return g})),r.d(e,"n",(function(){return b})),r.d(e,"S",(function(){return w})),r.d(e,"p",(function(){return x})),r.d(e,"Q",(function(){return I})),r.d(e,"fb",(function(){return k})),r.d(e,"X",(function(){return C})),r.d(e,"V",(function(){return O})),r.d(e,"W",(function(){return D})),r.d(e,"Z",(function(){return j})),r.d(e,"Y",(function(){return L})),r.d(e,"bb",(function(){return S})),r.d(e,"v",(function(){return E})),r.d(e,"w",(function(){return $})),r.d(e,"cb",(function(){return T})),r.d(e,"i",(function(){return P})),r.d(e,"eb",(function(){return M})),r.d(e,"C",(function(){return F})),r.d(e,"gb",(function(){return N})),r.d(e,"m",(function(){return A})),r.d(e,"db",(function(){return W})),r.d(e,"F",(function(){return R})),r.d(e,"B",(function(){return G})),r.d(e,"A",(function(){return B})),r.d(e,"z",(function(){return z})),r.d(e,"D",(function(){return V})),r.d(e,"y",(function(){return U})),r.d(e,"x",(function(){return q})),r.d(e,"u",(function(){return Y})),r.d(e,"t",(function(){return H})),r.d(e,"o",(function(){return J})),r.d(e,"l",(function(){return Q})),r.d(e,"G",(function(){return K})),r.d(e,"I",(function(){return Z})),r.d(e,"hb",(function(){return X})),r.d(e,"O",(function(){return tt})),r.d(e,"E",(function(){return et})),r.d(e,"b",(function(){return rt})),r.d(e,"a",(function(){return nt})),r.d(e,"ib",(function(){return at})),r.d(e,"j",(function(){return it})),r.d(e,"c",(function(){return ot})),r.d(e,"H",(function(){return st})),r.d(e,"T",(function(){return ct})),r.d(e,"U",(function(){return lt})),r.d(e,"R",(function(){return ut}));var n=r("b6bd");function a(t){return Object(n.a)({url:"user/user",method:"get",params:t})}function i(t){return Object(n.a)({url:"setting/config/user/".concat(t),method:"get"})}function o(t,e){return Object(n.a)({url:"setting/config/user/".concat(t),method:"post",data:e})}function s(t){return Object(n.a)({url:"user/user/".concat(t,"/edit"),method:"get"})}function c(t){return Object(n.a)({url:"user/set_status/".concat(t.status,"/").concat(t.id),method:"put"})}function l(t){return Object(n.a)({url:"marketing/coupon/grant",method:"get",params:t})}function u(t){return Object(n.a)({url:"user/edit_other/".concat(t),method:"get"})}function d(t){return Object(n.a)({url:"user/user/".concat(t),method:"get"})}function f(t){return Object(n.a)({url:"user/one_info/".concat(t.id),method:"get",params:t.datas})}function p(t){return Object(n.a)({url:"user/user_level/vip_list",method:"get",params:t})}function m(t){return Object(n.a)({url:"user/user_level/set_show/".concat(t.id,"/").concat(t.is_show),method:"PUT"})}function h(t,e){return Object(n.a)({url:"user/user_level/task/".concat(t),method:"get",params:e})}function v(t){return Object(n.a)({url:"user/user_level/set_task_show/".concat(t.id,"/").concat(t.is_show),method:"PUT"})}function _(t){return Object(n.a)({url:"user/user_level/set_task_must/".concat(t.id,"/").concat(t.is_must),method:"PUT"})}function y(t){return Object(n.a)({url:"/user/user_level/create_task",method:"get",params:t})}function g(t){return Object(n.a)({url:"user/user_level/create",method:"get",params:t})}function b(t){return Object(n.a)({url:"user/give_level/".concat(t),method:"get"})}function w(t){return Object(n.a)({url:"user/user_group/list",method:"get",params:t})}function x(t){return Object(n.a)({url:"user/user_group/add/".concat(t),method:"get"})}function I(t){return Object(n.a)({url:"setting/update_admin",method:"PUT",data:t})}function k(t){return Object(n.a)({url:"user/set_group",method:"post",data:t})}function C(t){return Object(n.a)({url:"user/user_label",method:"get",params:t})}function O(t,e){return Object(n.a)({url:"user/user_label/add/".concat(t),method:"get",params:e})}function D(t){return Object(n.a)({url:"user/user_label_cate/all",method:"get",params:t})}function j(t){return Object(n.a)({url:"user/user_label_cate/".concat(t,"/edit"),method:"get"})}function L(t){return Object(n.a)({url:"user/user_label_cate/create",method:"get"})}function S(t){return Object(n.a)({url:"/user/member_batch/index",method:"get",params:t})}function E(t,e){return Object(n.a)({url:"/user/member_batch/save/".concat(t),method:"post",data:e})}function $(t,e){return Object(n.a)({url:"/user/member_batch/set_value/".concat(t),method:"get",params:e})}function T(t,e){return Object(n.a)({url:"/user/member_card/index/".concat(t),method:"get",params:e})}function P(t,e){return Object(n.a)({url:"/export/memberCard/".concat(t),method:"get",params:e})}function M(){return Object(n.a)({url:"/user/member/ship",method:"get"})}function F(t,e){return Object(n.a)({url:"/user/member_ship/save/".concat(t),method:"post",data:e})}function N(){return Object(n.a)({url:"/user/user/syncUsers",method:"get"})}function A(){return Object(n.a)({url:"/user/user/create",method:"get"})}function W(){return Object(n.a)({url:"/user/member_scan",method:"get"})}function R(t,e){return Object(n.a)({url:"user/label/".concat(t),method:"post",data:e})}function G(t){return Object(n.a)({url:"user/member_right/save/".concat(t.id),method:"post",data:t})}function B(){return Object(n.a)({url:"user/member/right",method:"get"})}function z(t){return Object(n.a)({url:"/user/member/record",method:"get",params:t})}function V(){return Object(n.a)({url:"user/member/ship_select",method:"get"})}function U(t){return Object(n.a)({url:"user/member_card/set_status",method:"get",params:t})}function q(t){return Object(n.a)({url:"user/member_ship/set_ship_status",method:"get",params:t})}function Y(t,e){return Object(n.a)({url:"user/member_agreement/save/".concat(t),method:"post",data:e})}function H(){return Object(n.a)({url:"user/member/agreement",method:"get"})}function J(t){return Object(n.a)({url:"user/give_level_time/".concat(t),method:"get"})}function Q(t){return Object(n.a)({url:"user/label/".concat(t),method:"get"})}function K(t){return Object(n.a)({url:"user/save_set_label",method:"put",data:t})}function Z(t){return Object(n.a)({url:"setting/info",method:"get"})}function X(t){return Object(n.a)({url:"user/visit_list/".concat(t.id),method:"get",params:t.datas})}function tt(t){return Object(n.a)({url:"user/spread_list/".concat(t.id),method:"get",params:t.datas})}function et(t){return Object(n.a)({url:"user/user/".concat(t.uid),method:"put",data:t})}function rt(t,e){return Object(n.a)({url:"agent/set_agent_agreement/".concat(t),method:"post",data:e})}function nt(){return Object(n.a)({url:"agent/get_agent_agreement",method:"get"})}function at(){return Object(n.a)({url:"user/synchro/work/label",method:"get"})}function it(t){return Object(n.a)({url:"user/user/extend_info/".concat(t),method:"get"})}function ot(t){return Object(n.a)({url:"user/batch_process",method:"post",data:t})}function st(t,e){return Object(n.a)({url:"/user/member/save/content/".concat(t),method:"post",data:e})}function ct(t){return Object(n.a)({url:"/user/import_user",method:"post",data:t})}function lt(t){return Object(n.a)({url:"user/import_user/list",method:"get",params:t})}function ut(t){return Object(n.a)({url:"export/importUserExport",method:"get",params:t})}},cc70:function(t,e,r){},d29f:function(t,e,r){"use strict";var n=r("0619");r.n(n).a},d5d4:function(t,e,r){"use strict";var n=r("a496");r.n(n).a},d616:function(t,e,r){"use strict";var n=r("2f62"),a=r("add5"),i=r.n(a),o=r("f8b7");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(){c=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),s=new $(n||[]);return a(o,"_invoke",{value:j(t,r,s)}),o}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var m="suspendedStart",h="suspendedYield",v="executing",_="completed",y={};function g(){}function b(){}function w(){}var x={};d(x,o,(function(){return this}));var I=Object.getPrototypeOf,k=I&&I(I(T([])));k&&k!==r&&n.call(k,o)&&(x=k);var C=w.prototype=g.prototype=Object.create(x);function O(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function r(a,i,o,c){var l=p(t[a],t,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==s(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,o,c)}),(function(t){r("throw",t,o,c)})):e.resolve(d).then((function(t){u.value=t,o(u)}),(function(t){return r("throw",t,o,c)}))}c(l.arg)}var i;a(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return i=i?i.then(a,a):a()}})}function j(e,r,n){var a=m;return function(i,o){if(a===v)throw Error("Generator is already running");if(a===_){if("throw"===i)throw o;return{value:t,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var c=L(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=v;var l=p(e,r,n);if("normal"===l.type){if(a=n.done?_:h,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=_,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=p(a,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(s(e)+" is not iterable")}return b.prototype=w,a(C,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,d(t,u,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},O(D.prototype),d(D.prototype,l,(function(){return this})),e.AsyncIterator=D,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new D(f(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(C),d(C,u,"Generator"),d(C,o,(function(){return this})),d(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function l(t,e,r,n,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){l(i,n,a,o,s,"next",t)}function s(t){l(i,n,a,o,s,"throw",t)}o(void 0)}))}}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p={name:"orderSend",props:{orderId:Number,status:Number,pay_type:String},data:function(){var t=this;return{productType:0,orderStatus:0,splitSwitch:!1,formItem:{type:"1",express_record_type:"1",delivery_name:"",delivery_id:"",express_temp_id:"",to_name:"",to_tel:"",to_addr:"",sh_delivery:"",fictitious_content:"",station_type:1,delivery_type:"1",cargo_weight:0,remark:"",mark:"",server_type:"",day_type:0,pickup_time:["",""]},modals:!1,express:[],expressTemp:[],deliveryList:[],temp:{pic:""},export_open:!0,manyFormValidate:[],stopSubmit:!1,header:[{type:"selection",width:60,align:"center"},{title:"商品信息",slot:"image",width:200,align:"center"},{title:"规格",slot:"value",align:"center",minWidth:120},{title:"商品售价",slot:"sellPrice",align:"center",minWidth:100},{title:"商品优惠价",slot:"price",align:"center",minWidth:100},{title:"总数",key:"cart_num",align:"center",minWidth:80},{title:"待发数量",key:"surplus_num",align:"center",width:180,render:function(e,r){return e("div",[e("InputNumber",{props:{min:1,max:r.row.numShow,value:r.row.surplus_num||1},on:{"on-change":function(e){r.row.surplus_num=e||1,t.manyFormValidate[r.index]=r.row,t.selectData.forEach((function(e,n){e.cart_id===r.row.cart_id&&t.selectData.splice(n,1,r.row)}))}}})])}}],selectData:[],sheetInfo:{},serviceTypeList:[],kuaidiExpress:[],sendPrice:0}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(n.e)("admin/order",["splitOrder"])),methods:{printImg:function(t){i()({printable:t,type:"image",documentTitle:"快递信息",style:"img{\n          width: 100%;\n          height: 476px;\n        }"})},changeDelivery:function(t){},selectOne:function(t){this.selectData=t},changeModal:function(t){t||this.cancel()},changeSplitStatus:function(t){var e=this;t&&Object(o.Z)(this.orderId).then((function(t){var r=t.data;r.forEach((function(t){t.numShow=t.surplus_num})),e.manyFormValidate=r}))},changeRadio:function(t){switch(this.$refs.formItem.resetFields(),t){case"1":this.formItem.delivery_name="",this.formItem.delivery_id="",this.formItem.express_temp_id="",this.formItem.express_record_type="1",this.expressTemp=[];break;case"2":this.formItem.sh_delivery="",this.sheetInfo.self_delivery_status?this.formItem.delivery_type="1":this.formItem.delivery_type="2",this.sheetInfo.dada_delivery_status?this.formItem.station_type=1:this.formItem.station_type=2;break;case"3":this.formItem.fictitious_content=""}},changeExpress:function(t){switch(t){case"2":this.formItem.delivery_name="",this.formItem.express_temp_id="",this.expressTemp=[],this.getList(2);break;case"1":this.formItem.delivery_name="",this.formItem.delivery_id="",this.getList(1)}},reset:function(){this.formItem={type:"1",express_record_type:"1",delivery_name:"",delivery_id:"",express_temp_id:"",to_name:"",to_tel:"",to_addr:"",sh_delivery:"",fictitious_content:"",station_type:1,delivery_type:"1",cargo_weight:0,remark:"",mark:"",server_type:"",day_type:0,pickup_time:["",""]},this.sendPrice=0},getList:function(t){var e=this,r=2===t?1:"";Object(o.k)(r).then(function(){var t=u(c().mark((function t(r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.express=r.data,e.getSheetInfo();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},putSend:function(t){var e=this,r={id:this.orderId,datas:this.formItem};if("1"===this.formItem.type&&"2"===this.formItem.express_record_type){if(""===this.formItem.delivery_name)return this.$Message.error("快递公司不能为空");if(""===this.formItem.express_temp_id)return this.$Message.error("电子面单不能为空");if(""===this.formItem.to_name)return this.$Message.error("寄件人姓名不能为空");if(""===this.formItem.to_tel)return this.$Message.error("寄件人电话不能为空");if(!/^1(3|4|5|7|8|9|6)\d{9}$/i.test(this.formItem.to_tel))return this.$Message.error("请输入正确的手机号码");if(""===this.formItem.to_addr)return this.$Message.error("寄件人地址不能为空")}if("1"===this.formItem.type&&"1"===this.formItem.express_record_type){if(""===this.formItem.delivery_name)return this.$Message.error("快递公司不能为空");if(""===this.formItem.delivery_id)return this.$Message.error("快递单号不能为空")}if("2"===this.formItem.type){if("1"===this.formItem.delivery_type&&""===this.formItem.sh_delivery)return this.$Message.error("送货人不能为空");if("2"===this.formItem.delivery_type&&this.formItem.cargo_weight<=0)return this.$Message.error("请输入有效的重量")}this.splitSwitch?(r.datas.cart_ids=[],this.selectData.forEach((function(t){r.datas.cart_ids.push({cart_id:t.cart_id,cart_num:t.surplus_num})})),Object(o.ab)(r).then((function(t){e.modals=!1,e.$Message.success(t.msg),e.$emit("submitFail"),e.reset(),e.splitSwitch=!1,t.data.dump.label&&e.printImg(t.data.dump.label)})).catch((function(t){e.$Message.error(t.msg)}))):Object(o.M)(r).then(function(){var t=u(c().mark((function t(r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.modals=!1,e.$Message.success(r.msg),e.splitSwitch=!1,e.$emit("submitFail"),e.reset(),r.data.dump.label&&e.printImg(r.data.dump.label);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},cancel:function(t){this.modals=!1,this.orderStatus=0,this.splitSwitch=!1,this.selectData=[],this.reset()},expressChange:function(t){var e=this;this.formItem.service_type="";var r=("3"==this.formItem.express_record_type?this.kuaidiExpress:this.express).find((function(e){return e.value===t}));void 0!==r&&(this.serviceTypeList=r.types,1==this.formItem.type&&3==this.formItem.express_record_type&&(this.formItem.service_type=r.types.length?r.types[0]:""),this.formItem.delivery_code=r.code,this.formItem.to_name&&this.formItem.to_addr&&3==this.formItem.express_record_type&&this.watchPrice(),"2"===this.formItem.express_record_type?(this.expressTemp=[],this.formItem.express_temp_id="",Object(o.z)({com:this.formItem.delivery_code}).then((function(t){e.expressTemp=t.data,e.formItem.express_temp_id=t.data.length?t.data[0].temp_id:"",e.temp=e.expressTemp[0],t.data.length||e.$Message.error("请配置你所选快递公司的电子面单")})).catch((function(t){e.$Message.error(t.msg)}))):"3"==this.formItem.express_record_type&&(this.expressTemp=r.list,r.list.length&&(this.formItem.express_temp_id=r.list[0].temp_id,this.temp=r.list[0])))},watchPrice:function(){var t=this;if(3==this.formItem.express_record_type){var e={kuaidicom:this.formItem.delivery_code,send_address:this.formItem.to_addr,orderId:this.orderId,service_type:this.formItem.service_type,cart_ids:[]};this.selectData.forEach((function(t){e.cart_ids.push({cart_id:t.cart_id,cart_num:t.num||t.surplus_num})})),Object(o.G)(e).then((function(e){t.sendPrice=e.data.price,t.deliveryErrorMsg=""})).catch((function(e){t.$Message.error(e.msg),1==t.formItem.type&&(t.deliveryErrorMsg=e.msg)}))}},getCartInfo:function(){var t=this;Object(o.Z)(this.orderId).then((function(e){var r=e.data;r.forEach((function(t){t.numShow=t.surplus_num})),t.manyFormValidate=r,t.productType=r[0].product_type,3==t.productType&&(t.formItem.type="3",t.formItem.fictitious_content="")}))},getDeliveryList:function(){var t=this;Object(o.x)().then((function(e){t.deliveryList=e.data.list})).catch((function(e){t.$Message.error(e.msg)}))},getSheetInfo:function(){var t=this;Object(o.J)().then((function(e){var r=e.data;for(var n in r)r.hasOwnProperty(n)&&(t.formItem[n]=r[n]);t.export_open=void 0===r.export_open||r.export_open,t.export_open||(t.formItem.express_record_type="1"),t.formItem.to_addr=r.to_add,t.sheetInfo=r})).catch((function(e){t.$Message.error(e.msg)}))},shDeliveryChange:function(t){if(t){var e=this.deliveryList.find((function(e){return e.id===t}));this.formItem.sh_delivery_name=e.wx_name,this.formItem.sh_delivery_id=e.phone,this.formItem.sh_delivery_uid=e.uid}},expressTempChange:function(t){this.temp=this.expressTemp.find((function(e){return t===e.temp_id})),void 0===this.temp&&(this.temp={})},preview:function(){if(!this.temp.pic)return this.$Message.warning("请先选择物流公司或者电子面单");this.$refs.viewer.$viewer.show()},getBusineseList:function(){var t=this;Object(o.u)().then((function(e){t.kuaidiExpress=e.data,t.formItem.delivery_name&&t.expressChange(t.formItem.delivery_name)}))}}},m=(r("d5d4"),r("2877")),h=Object(m.a)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{staticClass:"order_box",attrs:{scrollable:"",title:"订单发送货",closable:!1,width:"1000"},on:{"on-visible-change":t.changeModal},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[t.modals?r("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":120},nativeOn:{submit:function(t){t.preventDefault()}}},[r("FormItem",{attrs:{label:"选择类型："}},[r("RadioGroup",{on:{"on-change":t.changeRadio},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},[t.productType?t._e():r("Radio",{attrs:{label:"1"}},[t._v("发货")]),!t.productType&&t.sheetInfo.city_delivery_status?r("Radio",{attrs:{label:"2"}},[t._v("送货")]):t._e(),r("Radio",{attrs:{label:"3"}},[t._v("无需配送")])],1)],1),1==t.formItem.type?r("FormItem",{directives:[{name:"show",rawName:"v-show",value:t.export_open,expression:"export_open"}],attrs:{label:"发货类型："}},[r("RadioGroup",{on:{"on-change":t.changeExpress},model:{value:t.formItem.express_record_type,callback:function(e){t.$set(t.formItem,"express_record_type",e)},expression:"formItem.express_record_type"}},[r("Radio",{attrs:{label:"3"}},[t._v("商家寄件")]),r("Radio",{attrs:{label:"1"}},[t._v("手动填写")]),r("Radio",{attrs:{label:"2"}},[t._v("电子面单打印")])],1)],1):t._e(),["2","3"].includes(t.formItem.express_record_type)&&1==t.formItem.type?[r("FormItem",{attrs:{label:"寄件人姓名："}},[r("Input",{staticClass:"input-add",attrs:{placeholder:"请输入寄件人姓名"},model:{value:t.formItem.to_name,callback:function(e){t.$set(t.formItem,"to_name",e)},expression:"formItem.to_name"}})],1),r("FormItem",{attrs:{label:"寄件人电话："}},[r("Input",{staticClass:"input-add",attrs:{placeholder:"请输入寄件人电话"},model:{value:t.formItem.to_tel,callback:function(e){t.$set(t.formItem,"to_tel",e)},expression:"formItem.to_tel"}})],1),r("FormItem",{attrs:{label:"寄件人地址："}},[r("Input",{staticClass:"input-add",attrs:{placeholder:"请输入寄件人地址"},model:{value:t.formItem.to_addr,callback:function(e){t.$set(t.formItem,"to_addr",e)},expression:"formItem.to_addr"}})],1)]:t._e(),r("div",[1==t.formItem.type?r("FormItem",{attrs:{label:"快递公司：",required:""}},[r("Select",{staticClass:"input-add",attrs:{filterable:"",placeholder:"请选择快递公司"},on:{"on-change":t.expressChange},model:{value:t.formItem.delivery_name,callback:function(e){t.$set(t.formItem,"delivery_name",e)},expression:"formItem.delivery_name"}},t._l(3==t.formItem.express_record_type?t.kuaidiExpress:t.express,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.value)+"\n          ")])})),1)],1):t._e(),1==t.formItem.type&&3==t.formItem.express_record_type?r("FormItem",{attrs:{label:"快递业务类型：",required:""}},[r("Select",{staticClass:"input-add",attrs:{filterable:"",placeholder:"请选择业务类型"},on:{"on-change":t.watchPrice},model:{value:t.formItem.service_type,callback:function(e){t.$set(t.formItem,"service_type",e)},expression:"formItem.service_type"}},t._l(t.serviceTypeList,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e)+"\n          ")])})),1)],1):t._e(),"1"===t.formItem.express_record_type&&1==t.formItem.type?r("FormItem",{attrs:{label:"快递单号：",required:""}},[r("Input",{staticClass:"input-add",attrs:{placeholder:"请输入快递单号"},model:{value:t.formItem.delivery_id,callback:function(e){t.$set(t.formItem,"delivery_id",e)},expression:"formItem.delivery_id"}}),"顺丰速运"==t.formItem.delivery_name?r("div",{staticClass:"trips"},[r("p",[t._v("顺丰请输入单号 :收件人或寄件人手机号后四位，")]),r("p",[t._v("例如：SF000000000000:3941")])]):t._e()],1):t._e(),["2","3"].includes(t.formItem.express_record_type)&&"1"===t.formItem.type?[r("FormItem",{staticClass:"express_temp_id",attrs:{label:"电子面单："}},[r("Select",{staticClass:"input-add",attrs:{placeholder:"请选择电子面单"},on:{"on-change":t.expressTempChange},model:{value:t.formItem.express_temp_id,callback:function(e){t.$set(t.formItem,"express_temp_id",e)},expression:"formItem.express_temp_id"}},t._l(t.expressTemp,(function(e,n){return r("Option",{key:n,attrs:{value:e.temp_id}},[t._v(t._s(e.title)+"\n            ")])})),1),t.formItem.express_temp_id?r("Button",{attrs:{type:"text"},on:{click:t.preview}},[t._v("预览\n          ")]):t._e()],1),3==t.formItem.express_record_type?[r("FormItem",{attrs:{label:"预计寄件金额："}},[r("span",{staticClass:"red"},[t._v(t._s(t.sendPrice))]),r("Button",{attrs:{type:"text",size:"small"},on:{click:t.watchPrice}},[t._v("立即计算")])],1),r("FormItem",{attrs:{label:"取件日期："}},[r("RadioGroup",{model:{value:t.formItem.day_type,callback:function(e){t.$set(t.formItem,"day_type",e)},expression:"formItem.day_type"}},[r("Radio",{attrs:{label:0}},[t._v("今天")]),r("Radio",{attrs:{label:1}},[t._v("明天")]),r("Radio",{attrs:{label:2}},[t._v("后天")])],1)],1),r("FormItem",{attrs:{label:"取件时间："}},[r("TimePicker",{attrs:{type:"timerange",format:"HH:mm",placement:"bottom-end",placeholder:"请选择取件时间"},model:{value:t.formItem.pickup_time,callback:function(e){t.$set(t.formItem,"pickup_time",e)},expression:"formItem.pickup_time"}})],1)]:t._e()]:t._e()],2),r("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.formItem.type,expression:"formItem.type === '2'"}]},[r("FormItem",{attrs:{label:"配送类型："}},[r("RadioGroup",{on:{"on-change":t.changeDelivery},model:{value:t.formItem.delivery_type,callback:function(e){t.$set(t.formItem,"delivery_type",e)},expression:"formItem.delivery_type"}},[t.sheetInfo.self_delivery_status?r("Radio",{attrs:{label:"1"}},[t._v("商家配送")]):t._e(),t.sheetInfo.dada_delivery_status||t.sheetInfo.uu_delivery_status?r("Radio",{attrs:{label:"2"}},[t._v("第三方配送")]):t._e()],1)],1),"1"===t.formItem.delivery_type?r("FormItem",{attrs:{label:"送货人：",required:""}},[r("Select",{staticClass:"input-add",attrs:{placeholder:"请选择送货人"},on:{"on-change":t.shDeliveryChange},model:{value:t.formItem.sh_delivery,callback:function(e){t.$set(t.formItem,"sh_delivery",e)},expression:"formItem.sh_delivery"}},t._l(t.deliveryList,(function(e,n){return r("Option",{key:n,attrs:{value:e.id}},[t._v(t._s(e.wx_name)+"（"+t._s(e.phone)+"）\n          ")])})),1)],1):t._e(),"2"===t.formItem.delivery_type?r("div",[r("FormItem",{attrs:{label:"配送平台："}},[r("RadioGroup",{model:{value:t.formItem.station_type,callback:function(e){t.$set(t.formItem,"station_type",e)},expression:"formItem.station_type"}},[t.sheetInfo.dada_delivery_status?r("Radio",{attrs:{label:1}},[t._v("达达")]):t._e(),t.sheetInfo.uu_delivery_status?r("Radio",{attrs:{label:2}},[t._v("uu跑腿")]):t._e()],1)],1),r("FormItem",{attrs:{label:"包裹重量：",required:""}},[r("InputNumber",{staticClass:"input-add",attrs:{min:0},model:{value:t.formItem.cargo_weight,callback:function(e){t.$set(t.formItem,"cargo_weight",e)},expression:"formItem.cargo_weight"}}),r("span",{staticStyle:{"margin-left":"10px"}},[t._v("kg")])],1),r("FormItem",{attrs:{label:"配送备注："}},[r("Input",{staticClass:"input-add",attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"配送备注"},model:{value:t.formItem.remark,callback:function(e){t.$set(t.formItem,"remark",e)},expression:"formItem.remark"}})],1),r("FormItem",{attrs:{label:"备注："}},[r("Input",{staticClass:"input-add",attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"备注"},model:{value:t.formItem.mark,callback:function(e){t.$set(t.formItem,"mark",e)},expression:"formItem.mark"}})],1)],1):t._e()],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"3"===t.formItem.type,expression:"formItem.type === '3'"}]},[r("FormItem",{attrs:{label:"备注："}},[r("Input",{staticClass:"input-add",attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"备注"},model:{value:t.formItem.fictitious_content,callback:function(e){t.$set(t.formItem,"fictitious_content",e)},expression:"formItem.fictitious_content"}})],1)],1),t.splitOrder>1&&"3"!==t.formItem.type?r("div",[r("FormItem",{attrs:{label:"分单发货："}},[r("i-switch",{attrs:{size:"large",disabled:8===t.orderStatus},on:{"on-change":t.changeSplitStatus},model:{value:t.splitSwitch,callback:function(e){t.splitSwitch=e},expression:"splitSwitch"}},[r("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),r("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),r("div",{staticClass:"trips"},[r("p",[t._v("\n            可选择表格中的商品单独发货，发货后会生成新的订单且不能撤回，请谨慎操作！\n          ")])]),t.splitSwitch&&t.manyFormValidate.length?r("Table",{attrs:{data:t.manyFormValidate,columns:t.header,border:""},on:{"on-selection-change":t.selectOne},scopedSlots:t._u([{key:"image",fn:function(e){var n=e.row;return e.index,[r("div",{staticClass:"product-data"},[r("img",{staticClass:"image",attrs:{src:n.cart_info.productInfo.image}}),r("div",{staticClass:"line2"},[t._v("\n                "+t._s(n.cart_info.productInfo.store_name)+"\n              ")])])]}},{key:"value",fn:function(e){var n=e.row;return e.index,[r("div",[t._v(t._s(n.cart_info.productInfo.attrInfo.suk))])]}},{key:"sellPrice",fn:function(e){var n=e.row;return e.index,[r("div",[t._v("\n              "+t._s(n.cart_info.productInfo.attrInfo?n.cart_info.productInfo.attrInfo.price:n.cart_info.productInfo.price)+"\n            ")])]}},{key:"price",fn:function(e){var n=e.row;return e.index,[r("div",[r("div",[t._v(t._s(n.cart_info.truePrice))])])]}}],null,!1,1129913299)}):t._e()],1)],1):t._e()],2):t._e(),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:t.cancel}},[t._v("取消")]),t.stopSubmit?r("Button",{attrs:{type:"warning"}},[t._v("存在售后待处理订单")]):r("Button",{attrs:{type:"primary"},on:{click:t.putSend}},[t._v("提交")])],1),r("div",{directives:[{name:"viewer",rawName:"v-viewer"},{name:"show",rawName:"v-show",value:t.temp,expression:"temp"}],ref:"viewer"},[r("img",{staticClass:"display-add",attrs:{src:t.temp.pic}})])],1)}),[],!1,null,"c713abaa",null);e.a=h.exports},d84c:function(t,e,r){"use strict";var n=r("f361");r.n(n).a},f361:function(t,e,r){},f7b4:function(t,e,r){},fc48:function(t,e,r){"use strict";var n=r("f8b7");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){i=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function d(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,i=Object.create(a.prototype),s=new $(n||[]);return o(i,"_invoke",{value:j(t,r,s)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var m="suspendedStart",h="suspendedYield",v="executing",_="completed",y={};function g(){}function b(){}function w(){}var x={};d(x,c,(function(){return this}));var I=Object.getPrototypeOf,k=I&&I(I(T([])));k&&k!==r&&n.call(k,c)&&(x=k);var C=w.prototype=g.prototype=Object.create(x);function O(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function r(i,o,s,c){var l=p(t[i],t,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==a(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):e.resolve(d).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,a){r(t,n,e,a)}))}return i=i?i.then(a,a):a()}})}function j(e,r,n){var a=m;return function(i,o){if(a===v)throw Error("Generator is already running");if(a===_){if("throw"===i)throw o;return{value:t,done:!0}}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var c=L(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===m)throw a=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=v;var l=p(e,r,n);if("normal"===l.type){if(a=n.done?_:h,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=_,n.method="throw",n.arg=l.arg)}}}function L(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=p(a,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(a(e)+" is not iterable")}return b.prototype=w,o(C,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=d(w,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,d(t,u,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},O(D.prototype),d(D.prototype,l,(function(){return this})),e.AsyncIterator=D,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new D(f(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},O(C),d(C,u,"Generator"),d(C,c,(function(){return this})),d(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function o(t,e,r,n,a,i,o){try{var s=t[i](o),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function s(t){o(i,n,a,s,c,"next",t)}function c(t){o(i,n,a,s,c,"throw",t)}s(void 0)}))}}var c={components:{template:r("6112").default},name:"orderDetails",filters:{invoiceType:function(t){return 1==t?"电子普通发票":"纸质专用发票"},invoiceHeaderType:function(t){return 1==t?"个人":"企业"}},data:function(){return{isShow:0,modal2:!1,modals:!1,grid:{xl:8,lg:8,md:12,sm:24,xs:24},result:[],columns1:[{title:"商品信息",slot:"product",minWidth:400},{title:"售价",key:"sum_price"},{title:"实付金额",key:"truePrice"},{title:"商品编码",slot:"code"},{title:"数量",key:"cart_num"},{title:"小计",render:function(t,e){return t("div",(e.row.truePrice*e.row.cart_num).toFixed(2))}}],columns2:[{title:"订单ID",key:"oid",minWidth:40},{title:"操作记录",key:"change_message",minWidth:280},{title:"操作时间",key:"change_time",minWidth:100}],columnSplit:[{title:"订单号",slot:"order_id",minWidth:100},{title:"商品信息",slot:"product",minWidth:250},{title:"发货信息",slot:"deliveryInfo",minWidth:100},{title:"操作",slot:"action",minWidth:90}],columns3:[{title:"商品ID",key:"product_id",minWidth:40},{title:"图片",slot:"product",minWidth:60},{title:"商品名称",key:"store_name",minWidth:100},{title:"核销数",key:"writeoff_num",minWidth:40},{title:"核销时间",key:"add_time",minWidth:280},{title:"核销人员",key:"writeoff_name",minWidth:100}],recordData:[],activeName:"detail",orderData:{},splitList:[],logisticsChecked:{delivery_name:"",delivery_id:""},offRecordList:[],showWhiteOff:!1}},props:{orderDatalist:Object,orderId:Number,rowActive:Object,formType:{type:Number,default:0},openErp:{type:Boolean,default:!1}},watch:{orderDatalist:function(t){this.orderData=t.orderInfo,this.getList(this.formType?t.orderInfo.id:t.orderInfo.store_order_id),this.formType&&this.getSplitOrder(t.orderInfo.id),2==t.orderInfo.shipping_type&&2==t.orderInfo.status&&(this.showWhiteOff=!0,this.getWriteoffRecord())},orderData:function(t){var e=this;t&&t.custom_form&&t.custom_form.length&&t.custom_form.forEach((function(t){if(t.value)return e.isShow=1}))}},mounted:function(){var t=this;this.orderData&&this.orderData.custom_form&&this.orderData.custom_form.length&&this.orderData.custom_form.forEach((function(e){if(e.value)return t.isShow=1}))},methods:{getWriteoffRecord:function(){var t=this;Object(n.hb)(this.orderId).then((function(e){t.offRecordList=e.data})).catch((function(e){t.$Message.error(e.msg)}))},openItemLogistics:function(t){var e=this;this.logisticsChecked.delivery_name=t.delivery_name,this.logisticsChecked.delivery_id=t.delivery_id,this.modal2=!0,Object(n.j)(t.id).then(function(){var t=s(i().mark((function t(r){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.result=r.data.result;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},openLogistics:function(){this.logisticsChecked.delivery_name=this.orderDatalist.orderInfo.delivery_name,this.logisticsChecked.delivery_id=this.orderDatalist.orderInfo.delivery_id,this.modal2=!0,this.getOrderData()},btnClick:function(t){var e=this,r={supplier_id:t.supplier_id,id:t.id};Object(n.Y)(r).then(function(){var t=s(i().mark((function t(r){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$Message.success(r.msg);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$Message.error(t.msg)}))},getOrderData:function(){var t=this;Object(n.j)(this.formType?this.orderDatalist.orderInfo.id:this.orderDatalist.orderInfo.store_order_id).then(function(){var e=s(i().mark((function e(r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.result=r.data.result;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error(e.msg)}))},getSplitOrder:function(t){var e=this;t&&Object(n.bb)(t,{status:2}).then((function(t){e.splitList=t.data})).catch((function(t){e.$Message.error(t.msg)}))},getList:function(t){var e=this,r={id:t,datas:this.page};this.loading=!0,Object(n.n)(r).then(function(){var t=s(i().mark((function t(r){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.recordData=r.data,e.loading=!1;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.loading=!1,e.$Message.error(t.msg)}))},changeMenu:function(t,e,r,n){if(n)this.$parent.changeMenu(e,r,n);else if(5==t){var a=this.splitList.length?this.splitList[0]:this.rowActive;this.$parent.changeMenu(a,t)}else this.$parent.changeMenu(this.rowActive,t)},distribution:function(t,e){e?this.$parent.distribution(t):this.$parent.distribution(this.rowActive)},edit:function(t,e){e?this.$parent.edit(t):this.$parent.edit(this.rowActive)},sendOrder:function(t,e){e?this.$parent.sendOrder(t,e):this.$parent.sendOrder(this.rowActive)},delivery:function(t,e){e?this.$parent.delivery(t,e):this.$parent.delivery(this.rowActive)},bindWrite:function(t,e){e?this.$parent.bindWrite(t):this.$parent.bindWrite(this.rowActive)}},computed:{}},l=(r("d84c"),r("9cc8"),r("2877")),u=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Drawer",{attrs:{closable:!1,width:"1000","class-name":"order_box",styles:{padding:0}},model:{value:t.modals,callback:function(e){t.modals=e},expression:"modals"}},[t.orderDatalist?n("div",[n("div",{staticClass:"head"},[n("div",{staticClass:"full"},[n("Icon",{class:{"sale-after":-1===t.orderDatalist.orderInfo._status._type},attrs:{custom:"iconfont icondingdan",size:"60"}}),n("div",{staticClass:"text"},[n("div",{staticClass:"title"},[t._v(t._s(t.orderData.pink_name||"售后订单"))]),n("div",[t._v("订单编号："+t._s(t.orderDatalist.orderInfo.order_id))])]),null==t.rowActive.delete_time?n("div",[1===t.orderData._status_new&&0===t.orderData.paid&&"offline"===t.orderData.pay_type?n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("1")}}},[t._v("确认收款\n            ")]):t._e(),1==t.orderData._status_new?n("Button",{on:{click:t.edit}},[t._v("订单改价")]):t._e(),2!==t.orderData._status_new&&8!==t.orderData._status_new&&4!==t.orderData.status||1!==t.orderData.shipping_type||null!==t.orderData.pinkStatus&&2!==t.orderData.pinkStatus||t.orderData.refund.length?t._e():n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:t.sendOrder}},[t._v("发送货\n            ")]),4!==t.orderData._status_new||t.rowActive.split.length?t._e():n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:t.delivery}},[t._v("\n              配送信息\n            ")]),2!=t.orderData.shipping_type||0!=t.orderData.status&&5!=t.orderData.status||1!=t.orderData.paid||0!==t.orderData.refund_status?t._e():n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:t.bindWrite}},[t._v("立即核销\n            ")]),t.orderData._status_new>=2?n("Button",{on:{click:function(e){return t.changeMenu("10")}}},[t._v("小票打印")]):t._e(),t.orderData._status_new>=3&&t.orderData.express_dump?n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("11")}}},[t._v("电子面单打印\n            ")]):t._e(),t.orderData.kuaidi_label?n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("13")}}},[t._v("快递面单打印\n            ")]):t._e(),1!=t.orderData.apply_type&&5!=t.orderData.refund_type&&(4!=t.orderData.refund_type||3!=t.orderData.apply_type)||[3,6].includes(t.orderData.refund_type)||!(parseFloat(t.orderData.pay_price)>parseFloat(t.orderData.refunded_price)||0==t.orderData.pay_price)||t.formType?t._e():n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("5")}}},[t._v("立即退款\n            ")]),[2,3].includes(t.orderData.apply_type)&&[0,1,2].includes(t.orderData.refund_type)&&!t.formType?n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("55")}}},[t._v("同意退货\n            ")]):t._e(),[0,1,2,5].includes(t.orderData.refund_type)&&!t.formType?n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("7")}}},[t._v("不退款\n            ")]):t._e(),t.formType?t._e():n("Button",{on:{click:function(e){return t.changeMenu("4")}}},[t._v("售后备注")]),1==t.orderData.is_del?n("Button",{class:t.openErp?"on":"",attrs:{disabled:t.openErp},on:{click:function(e){return t.changeMenu("9")}}},[t._v("删除订单\n            ")]):t._e(),1!==t.orderData._status_new&&t.formType?n("Dropdown",{on:{"on-click":t.changeMenu}},[n("Button",{attrs:{icon:"ios-more"}}),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[1!==t.orderData._status_new||3===t.orderData._status_new&&t.orderData.use_integral>0&&t.orderData.use_integral>=t.orderData.back_integral?n("DropdownItem",{attrs:{name:"4"}},[t._v("订单备注\n                ")]):t._e(),[0,1,4,5].includes(t.orderData.refund_type)&&1==t.orderData.paid&&2!==t.orderData.refund_status&&parseFloat(t.orderData.pay_price)>0?n("DropdownItem",{attrs:{disabled:t.openErp,name:"5"}},[t._v("立即退款\n                ")]):t._e(),4===t.orderData._status_new?n("DropdownItem",{attrs:{disabled:t.openErp,name:"8"}},[t._v("已收货")]):t._e(),t.orderData.paid?n("DropdownItem",{attrs:{name:"12"}},[t._v("打印配货单")]):t._e()],1)],1):t._e()],1):t._e()],1),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"title"},[t._v("订单状态")]),t.formType?n("div",{staticClass:"value1"},[n("span",{domProps:{innerHTML:t._s(t.orderData.status_name.status_name)}}),!t.orderData.is_all_refund&&t.orderData.refund.length?n("span",[t._v(",部分退款中")]):t._e(),t.orderData.is_all_refund&&t.orderData.refund.length&&6!=t.orderData.refund_type?n("span",[t._v(",退款中")]):t._e()]):n("div",[1==t.orderData.refund_type?n("div",{staticClass:"value1"},[t._v("\n                仅退款\n              ")]):2==t.orderData.refund_type?n("div",{staticClass:"value1"},[t._v("\n                退货退款\n              ")]):3==t.orderData.refund_type?n("div",{staticClass:"value1"},[t._v("\n                拒绝退款\n              ")]):4==t.orderData.refund_type?n("div",{staticClass:"value1"},[t._v("\n                商品待退货\n              ")]):5==t.orderData.refund_type?n("div",{staticClass:"value1"},[t._v("\n                退货待收货\n              ")]):6==t.orderData.refund_type?n("div",{staticClass:"value2"},[t._v("\n                已退款\n              ")]):t._e()])]),t.orderData.orderStatus?n("li",{staticClass:"item"},[n("div",{staticClass:"title"},[t._v("主订单状态")]),n("div",[n("div",[t._v("\n                "+t._s(t.orderData.orderStatus._title)+"\n              ")])])]):t._e(),n("li",{staticClass:"item"},[n("div",{staticClass:"title"},[t._v("实际支付")]),n("div",[t._v("\n              ¥"+t._s(t.orderDatalist.orderInfo.paid>0?t.orderDatalist.orderInfo.pay_price:0)+"\n            ")])]),t.formType?n("li",{staticClass:"item"},[n("div",{staticClass:"title"},[t._v("支付方式")]),n("div",[t._v(t._s(t.orderDatalist.orderInfo._status._payType||"-"))])]):n("li",{staticClass:"item"},[n("div",{staticClass:"title"},[t._v("退款件数")]),n("div",[t._v(t._s(t.orderDatalist.orderInfo.total_num||0))])]),t.formType?n("li",{staticClass:"item"},[n("div",{staticClass:"title"},[t._v("支付时间")]),n("div",[t._v(t._s(t.orderDatalist.orderInfo._pay_time||"-"))])]):n("li",{staticClass:"item"},[n("div",{staticClass:"title"},[t._v("退款时间")]),n("div",[t._v(t._s(t.orderDatalist.orderInfo._refund_time||"-"))])])])]),n("Tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("TabPane",{attrs:{label:"订单信息",name:"detail"}},[t.formType?t._e():n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("退款信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("退款原因：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.refund_reason||"-")+"\n                ")])]),parseFloat(t.orderDatalist.orderInfo.refund_price)||parseFloat(t.orderDatalist.orderInfo.refunded_price)?n("li",{staticClass:"item"},[n("div",[t._v("退款金额：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(parseFloat(t.orderDatalist.orderInfo.refunded_price)?parseFloat(t.orderDatalist.orderInfo.refunded_price):parseFloat(t.orderDatalist.orderInfo.refund_price)||0)+"\n                ")])]):t._e(),parseFloat(t.orderDatalist.orderInfo.back_integral)?n("li",{staticClass:"item"},[n("div",[t._v("退回积分：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(parseFloat(t.orderDatalist.orderInfo.back_integral)||"-")+"\n                ")])]):t._e(),n("li",{staticClass:"item"},[n("div",[t._v("退款说明：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.refund_explain||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("退款凭证：")]),n("div",{staticClass:"value"},t._l(t.orderDatalist.orderInfo.refund_img,(function(t,e){return n("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e,staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"img"}]})])})),0)])])]),!t.formType&&t.orderDatalist.orderInfo.refund_express_name?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("退货信息")]),n("ul",{staticClass:"list"},[2==t.orderDatalist.orderInfo.apply_type?n("li",{staticClass:"item"},[n("div",[t._v("物流公司：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.refund_express_name||"-")+"\n                ")])]):t._e(),2==t.orderDatalist.orderInfo.apply_type?n("li",{staticClass:"item"},[n("div",[t._v("物流单号：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.refund_express||"-")+"\n                ")])]):t._e(),n("li",{staticClass:"item"},[n("div",[t._v("退货说明：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.refund_goods_explain||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("退货凭证：")]),n("div",{staticClass:"value"},t._l(t.orderDatalist.orderInfo.refund_goods_img,(function(t,e){return n("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e,staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"img"}]})])})),0)])])]):t._e(),n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("用户信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("用户UID：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.userInfo.uid?t.orderDatalist.userInfo.uid:"游客")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("用户昵称：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.userInfo.uid?t.orderDatalist.userInfo.nickname:"游客")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("绑定电话：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.userInfo.phone||"-")+"\n                ")])])])]),0==t.orderDatalist.orderInfo.product_type?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("收货信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"value"},[t._v("\n                  收货人："+t._s(t.orderDatalist.orderInfo.real_name||"-")+"\n                ")])])]),n("ul",{staticClass:"list"},[n("li",{staticClass:"mt10"},[n("div",{staticClass:"value"},[t._v("\n                  收货电话："+t._s(t.orderDatalist.orderInfo.user_phone||"-")+"\n                ")])])]),n("ul",{staticClass:"list"},[n("li",{staticClass:"mt10"},[n("div",{staticClass:"value"},[t._v("\n                  收货地址："+t._s(t.orderDatalist.orderInfo.user_address||"-")+"\n                ")])])])]):t._e(),t.orderDatalist.orderInfo.fictitious_content&&1!=t.orderDatalist.orderInfo.cartInfo[0].product_type?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("虚拟发货")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.fictitious_content)+"\n                ")])])])]):t._e(),1==t.orderDatalist.orderInfo.cartInfo[0].product_type?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("卡密发货")]),t.orderDatalist.orderInfo.virtual.length?n("div",t._l(t.orderDatalist.orderInfo.virtual,(function(e,r){return n("div",{key:r,staticClass:"list"},[n("div",{staticClass:"item"},[n("div",[t._v("卡号"+t._s(r+1)+"：")]),n("div",{staticClass:"value"},[t._v(t._s(e.card_no))])]),n("div",{staticClass:"item"},[n("div",[t._v("密码"+t._s(r+1)+"：")]),n("div",{staticClass:"value"},[t._v(t._s(e.card_pwd))])])])})),0):n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.virtual_info||"-")+"\n                ")])])])]):t._e(),t.orderDatalist.orderInfo.supplierInfo?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("供应商信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("供应商：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.supplierInfo.supplier_name?t.orderDatalist.orderInfo.supplierInfo.supplier_name:"游客")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("供应商姓名：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.supplierInfo.name?t.orderDatalist.orderInfo.supplierInfo.name:"游客")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("联系方式：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.supplierInfo.phone||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("供应商邮箱：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.supplierInfo.email||"-")+"\n                ")])])])]):t._e(),n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("订单信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("创建时间：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo._add_time||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("商品总数：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.total_num||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("商品总价：")]),n("div",{staticClass:"value"},[t._v("\n                  ￥"+t._s(t.orderDatalist.orderInfo.total_price||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("优惠券金额：")]),n("div",{staticClass:"value"},[t._v("\n                  ￥"+t._s(t.orderDatalist.orderInfo.coupon_price||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("积分抵扣：")]),n("div",{staticClass:"value"},[t._v("\n                  ￥"+t._s(t.orderDatalist.orderInfo.deduction_price||0)+"\n                ")])]),parseFloat(t.orderDatalist.orderInfo.use_integral)?n("li",{staticClass:"item"},[n("div",[t._v("使用积分：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(parseFloat(t.orderDatalist.orderInfo.use_integral))+"\n                ")])]):t._e(),n("li",{staticClass:"item"},[n("div",[t._v("支付邮费：")]),n("div",{staticClass:"value"},[t._v("\n                  ￥"+t._s(t.orderDatalist.orderInfo.pay_postage||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("会员商品优惠：")]),n("div",{staticClass:"value"},[t._v("\n                  ￥"+t._s(t.orderDatalist.orderInfo.vip_true_price||0)+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("首单优惠：")]),n("div",{staticClass:"value"},[t._v("\n                  ￥"+t._s(t.orderDatalist.orderInfo.first_order_price||0)+"\n                ")])]),2===t.orderDatalist.orderInfo.shipping_type&&0===t.orderDatalist.orderInfo.refund_status&&1===t.orderDatalist.orderInfo.paid?n("li",{staticClass:"item"},[n("div",[t._v("门店名称：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo._store_name||"-")+"\n                ")])]):t._e(),2===t.orderDatalist.orderInfo.shipping_type&&0===t.orderDatalist.orderInfo.refund_status&&1===t.orderDatalist.orderInfo.paid?n("li",{staticClass:"item"},[n("div",[t._v("核销码：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.verify_code||"-")+"\n                ")])]):t._e(),n("li",{staticClass:"item"},[n("div",[t._v("推广人：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.userInfo.spread_name)+"/ID:"+t._s(t.orderDatalist.userInfo.spread_uid)+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("支付时间：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo._pay_time||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("支付方式：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo._status._payType||"-")+"\n                ")])]),t.orderDatalist.orderInfo.store_order_sn?n("li",{staticClass:"item"},[n("div",[t._v("原订单号：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.store_order_sn)+"\n                ")])]):t._e(),t._l(t.orderDatalist.orderInfo.promotions_detail,(function(e,r){return n("li",{key:r,staticClass:"item"},[n("div",[t._v(t._s(e.title)+"：")]),n("div",{staticClass:"value"},[t._v("\n                  -￥"+t._s(parseFloat(e.promotions_price).toFixed(2))+"\n                ")])])})),4===t.orderDatalist.orderInfo.type?n("li",{staticClass:"item"},[n("div",[t._v("实付积分：")]),n("div",{staticClass:"value"},[t._v("\n                  -￥"+t._s(t.orderDatalist.orderInfo.pay_integral)+"\n                ")])]):t._e()],2)]),"express"===t.orderDatalist.orderInfo.delivery_type?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("物流信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("快递公司：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.delivery_name||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("快递单号：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.delivery_id)),n("span",{staticClass:"logisticsLook",on:{click:t.openLogistics}},[t._v("查询")])])])])]):t._e(),"send"===t.orderDatalist.orderInfo.delivery_type?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("配送信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("送货人姓名：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.delivery_name||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("送货人电话：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.delivery_id||"-")+"\n                ")])])])]):t._e(),t.orderDatalist.orderInfo.custom_form.length&&t.isShow?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("自定义留言")]),n("ul",{staticClass:"list"},t._l(t.orderDatalist.orderInfo.custom_form,(function(e,r){return e.value&&-1==["uploadPicture","dateranges"].indexOf(e.name)||e.value.length&&-1!=["uploadPicture","dateranges"].indexOf(e.name)?n("li",{key:r,staticClass:"item"},[n("div",{staticClass:"txtVal"},[t._v(t._s(e.titleConfig.value)+"：")]),"dateranges"===e.name?n("div",{staticClass:"value"},[t._v("\n                  "+t._s(e.value[0]+"/"+e.value[1])+"\n                ")]):"uploadPicture"===e.name?n("div",{staticClass:"value"},t._l(e.value,(function(t,e){return n("div",{directives:[{name:"viewer",rawName:"v-viewer"}],key:e,staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"img"}]})])})),0):n("div",{staticClass:"value"},[t._v(t._s(e.value||"-"))])]):t._e()})),0)]):t._e(),t.orderDatalist.orderInfo.mark?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("买家留言")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.mark||"-")+"\n                ")])])])]):t._e(),t.orderDatalist.orderInfo.remark?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("订单备注")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("备注：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.remark||"-")+"\n                ")])])])]):t._e(),t.orderDatalist.orderInfo.refuse_reason?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("拒绝退款原因")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.refuse_reason)+"\n                ")])])])]):t._e(),t.orderDatalist.orderInfo.invoice?n("div",{staticClass:"section"},[n("div",{staticClass:"title"},[t._v("发票信息")]),n("ul",{staticClass:"list"},[n("li",{staticClass:"item"},[n("div",[t._v("发票类型：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t._f("invoiceType")(t.orderDatalist.orderInfo.invoice.type))+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("抬头类型：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t._f("invoiceHeaderType")(t.orderDatalist.orderInfo.invoice.header_type))+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("发票抬头：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.invoice.name||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("税号：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.invoice.duty_number||"-")+"\n                ")])]),n("li",{staticClass:"item"},[n("div",[t._v("邮箱：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.invoice.email||"-")+"\n                ")])]),2==t.orderDatalist.orderInfo.invoice.type?n("li",{staticClass:"item"},[n("div",[t._v("开户银行：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.invoice.bank||"-")+"\n                ")])]):t._e(),2==t.orderDatalist.orderInfo.invoice.type?n("li",{staticClass:"item"},[n("div",[t._v("企业地址：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.invoice.address||"-")+"\n                ")])]):t._e(),n("li",{staticClass:"item"},[n("div",[t._v("企业电话：")]),n("div",{staticClass:"value"},[t._v("\n                  "+t._s(t.orderDatalist.orderInfo.invoice.drawer_phone||"-")+"\n                ")])])])]):t._e()]),n("TabPane",{attrs:{label:"商品信息",name:"product"}},[n("Table",{attrs:{columns:t.columns1,data:t.orderDatalist.orderInfo.cartInfo,"highlight-row":""},scopedSlots:t._u([{key:"product",fn:function(e){var r=e.row;return[n("Tooltip",{attrs:{theme:"dark","max-width":"300",delay:600}},[n("div",{staticClass:"product"},[n("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:r.productInfo.attrInfo?r.productInfo.attrInfo.image:r.productInfo.image,expression:"\n                        row.productInfo.attrInfo\n                          ? row.productInfo.attrInfo.image\n                          : row.productInfo.image\n                      "}]})]),n("div",{staticClass:"title"},[n("div",{staticClass:"line2"},[r.is_gift?n("span",{staticClass:"font-color-red"},[t._v("[赠品]")]):t._e(),t._v("\n                      "+t._s(r.productInfo.store_name)+" |\n                      "+t._s(r.productInfo.attrInfo?r.productInfo.attrInfo.suk:"")+"\n                    ")])])]),n("div",{attrs:{slot:"content"},slot:"content"},[n("div",[r.is_gift?n("p",{staticClass:"font-color-red"},[t._v("[赠品]")]):t._e(),n("p",[t._v(t._s(r.productInfo.store_name))]),n("p",[t._v("\n                      "+t._s(r.productInfo.attrInfo?r.productInfo.attrInfo.suk:"")+"\n                    ")])])])])]}},{key:"code",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.productInfo.spec_type?r.productInfo.attrInfo.code:r.productInfo.code))])]}}],null,!1,2962409082)})],1),n("TabPane",{attrs:{label:"订单记录",name:"record"}},[n("Table",{attrs:{columns:t.columns2,data:t.recordData,loading:t.loading,"no-data-text":"暂无数据","highlight-row":"","no-filtered-data-text":"暂无筛选结果"}})],1),t.splitList.length?n("TabPane",{attrs:{label:"发货记录",name:"recordList",index:1}},[n("Table",{attrs:{columns:t.columnSplit,data:t.splitList,loading:t.loading,"no-data-text":"暂无数据","highlight-row":"","no-filtered-data-text":"暂无筛选结果"},scopedSlots:t._u([{key:"order_id",fn:function(e){var r=e.row;return[n("div",[t._v(t._s(r.order_id))]),r.supplier_name?n("span",{staticClass:"supplierName"},[t._v("["+t._s(r.supplier_name)+"]")]):t._e(),r.store_name?n("span",{staticClass:"supplierName"},[t._v("["+t._s(r.store_name)+"]")]):t._e()]}},{key:"product",fn:function(e){var r=e.row;return[n("Tooltip",{attrs:{theme:"dark","max-width":"300",delay:600}},[t._l(r._info,(function(e,r){return n("div",{key:r,staticClass:"product productTime"},[n("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.image:e.cart_info.productInfo.image,expression:"\n                        j.cart_info.productInfo.attrInfo\n                          ? j.cart_info.productInfo.attrInfo.image\n                          : j.cart_info.productInfo.image\n                      "}]})]),n("div",{staticClass:"title"},[n("div",{staticClass:"line2"},[e.cart_info.is_gift?n("span",{staticClass:"font-color-red"},[t._v("[赠品]")]):t._e(),t._v("\n                      "+t._s(e.cart_info.productInfo.store_name)+" |\n                      "+t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.suk:"")+"\n                    ")])])])})),n("div",{attrs:{slot:"content"},slot:"content"},t._l(r._info,(function(e,r){return n("div",{key:r},[e.cart_info.is_gift?n("p",{staticClass:"font-color-red"},[t._v("\n                      [赠品]\n                    ")]):t._e(),n("p",[t._v(t._s(e.cart_info.productInfo.store_name))]),n("p",[t._v("\n                      "+t._s(e.cart_info.productInfo.attrInfo?e.cart_info.productInfo.attrInfo.suk:"")+"\n                    ")]),n("p",{staticClass:"tabBox_pice"},[t._v("\n                      "+t._s("￥"+e.cart_info.sum_price+" x "+e.cart_info.cart_num)+"\n                    ")])])})),0)],2)]}},{key:"deliveryInfo",fn:function(e){var r=e.row;return[r.add_time?n("div",[n("span",[t._v("创建时间：")]),t._v(t._s(r.add_time)+"\n              ")]):t._e(),r.delivery_time?n("div",[n("span",[t._v("发货时间：")]),t._v(t._s(r.delivery_time)+"\n              ")]):t._e(),"express"==r.delivery_type||"send"==r.delivery_type||"fictitious"==r.delivery_type?n("div",[t._v("\n                发货方式：\n                "),"express"==r.delivery_type?n("span",[t._v("物流发货")]):t._e(),"send"==r.delivery_type?n("span",[t._v("送货")]):t._e(),"fictitious"==r.delivery_type?n("span",[t._v("虚拟发货")]):t._e()]):t._e(),r.delivery_name?n("div",[t._v("\n                快递公司："+t._s(r.delivery_name)+"\n              ")]):t._e(),r.delivery_id?["express"==r.delivery_type?n("div",{on:{click:function(e){return t.openItemLogistics(r)}}},[t._v("\n                  快递单号："),n("span",{staticStyle:{color:"#1890ff",cursor:"pointer"}},[t._v(t._s(r.delivery_id))])]):t._e(),"send"==r.delivery_type?n("div",[t._v("\n                  快递单号："),n("span",{staticStyle:{color:"#1890ff"}},[t._v(t._s(r.delivery_id))])]):t._e()]:t._e()]}},{key:"action",fn:function(e){var r=e.row;return e.index,[2!==r._status||r.supplier_name||0!=r.store_id?t._e():n("Divider",{attrs:{type:"vertical"}}),1===r._status?n("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.edit(r,1)}}},[t._v("编辑")]):t._e(),2!==r._status&&8!==r._status&&4!==r.status||1!==r.shipping_type||null!==r.pinkStatus&&2!==r.pinkStatus||r.supplier_name||0!=r.store_id?t._e():n("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.sendOrder(r,1)}}},[t._v("发送货")]),4!==r._status||r.split.length?t._e():n("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.delivery(r,1)}}},[t._v("配送信息")]),4===r._status&&!r.split.length&&r.supplier_name&&0==r.store_id?n("Divider",{attrs:{type:"vertical"}}):t._e(),2!=r.shipping_type||0!=r.status&&5!=r.status||1!=r.paid||0!==r.refund_status?t._e():n("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.bindWrite(r,1)}}},[t._v("立即核销")]),r.supplier_name&&"未发货"==r.status_name.status_name?n("a",{attrs:{disabled:t.openErp},on:{click:function(e){return t.btnClick(r)}}},[t._v("提醒发货")]):t._e(),1===r._status||(2===r._status||r.split.length)&&1===r.shipping_type&&(null===r.pinkStatus||2===r.pinkStatus)||4===r._status||2==r.shipping_type&&0==r.status&&1==r.paid&&0===r.refund_status||r.supplier_name&&r.supplier_name&&"未发货"==r.status_name.status_name?n("Divider",{attrs:{type:"vertical"}}):t._e(),[n("Dropdown",{attrs:{transfer:!0},on:{"on-click":function(e){return t.changeMenu("",r,e,1)}}},[n("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n                    更多\n                    "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:1===r._status&&0===r.paid&&"offline"===r.pay_type,expression:"\n                        row._status === 1 &&\n                          row.paid === 0 &&\n                          row.pay_type === 'offline'\n                      "}],ref:"ones",attrs:{disabled:t.openErp,name:"1"}},[t._v("立即支付")]),n("DropdownItem",{attrs:{disabled:t.openErp,name:"3"}},[t._v("订单记录")]),n("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:r._status>=3&&r.express_dump,expression:"row._status >= 3 && row.express_dump"}],attrs:{disabled:t.openErp,name:"11"}},[t._v("电子面单打印")]),n("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:r._status>=2,expression:"row._status >= 2"}],attrs:{name:"10"}},[t._v("小票打印")]),n("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:1!==r._status||3===r._status&&r.use_integral>0&&r.use_integral>=r.back_integral,expression:"\n                        row._status !== 1 ||\n                          (row._status === 3 &&\n                            row.use_integral > 0 &&\n                            row.use_integral >= row.back_integral)\n                      "}],attrs:{name:"4"}},[t._v("订单备注")]),n("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:2!=r.refund_type&&4!=r.refund_type&&6!=r.refund_type&&1==r.paid&&2!==r.refund_status&&parseFloat(r.pay_price)>0&&(null==r.split||0==r.split.length),expression:"\n                        row.refund_type != 2 &&\n                          row.refund_type != 4 &&\n                          row.refund_type != 6 &&\n                          row.paid == 1 &&\n                          row.refund_status !== 2 &&\n                          parseFloat(row.pay_price) > 0 &&\n                          (row.split == null || row.split.length == 0)\n                      "}],attrs:{disabled:t.openErp,name:"5"}},[t._v("立即退款")]),n("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:2==r.refund_type,expression:"row.refund_type == 2"}],attrs:{disabled:t.openErp,name:"55"}},[t._v("同意退货")]),n("DropdownItem",{directives:[{name:"show",rawName:"v-show",value:4===r._status&&!r.split.length,expression:"row._status === 4 && !row.split.length"}],attrs:{disabled:t.openErp,name:"8"}},[t._v("已收货")]),1==r.is_del?n("DropdownItem",{attrs:{disabled:t.openErp,name:"9"}},[t._v("删除订单")]):t._e()],1)],1)]]}}],null,!1,2475477877)})],1):t._e(),t.offRecordList.length?n("TabPane",{attrs:{label:"核销记录",name:"writeOff",index:2}},[n("Table",{attrs:{columns:t.columns3,data:t.offRecordList,loading:t.loading,"no-data-text":"暂无数据","highlight-row":"","no-filtered-data-text":"暂无筛选结果"},scopedSlots:t._u([{key:"product",fn:function(t){var e=t.row;return[n("div",{staticClass:"product "},[n("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticClass:"image"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image,expression:"row.image"}]})])])]}}],null,!1,3448605298)})],1):t._e()],1)],1):t._e()]),n("Modal",{staticClass:"order_box2",attrs:{scrollable:"",title:"物流查询",width:"350"},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[n("div",{staticClass:"logistics acea-row row-top"},[n("div",{staticClass:"logistics_img"},[n("img",{attrs:{src:r("bd9b")}})]),n("div",{staticClass:"logistics_cent"},[n("span",[t._v("物流公司："+t._s(t.logisticsChecked.delivery_name))]),n("span",[t._v("物流单号："+t._s(t.logisticsChecked.delivery_id))])])]),n("div",{staticClass:"acea-row row-column-around trees-coadd"},[n("div",{staticClass:"scollhide"},[n("Timeline",t._l(t.result,(function(e,r){return n("TimelineItem",{key:r},[n("p",{staticClass:"time",domProps:{textContent:t._s(e.time)}}),n("p",{staticClass:"content",domProps:{textContent:t._s(e.status)}})])})),1)],1)])])],1)}),[],!1,null,"574ab062",null);e.a=u.exports},fc83:function(t,e,r){}}]);