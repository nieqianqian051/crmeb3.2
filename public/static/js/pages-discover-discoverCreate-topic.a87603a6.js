(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-discover-discoverCreate-topic"],{"1a2c":function(t,e,i){var n=i("9c2e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("967d").default;o("fdd34efc",n,!0,{sourceMap:!1,shadowMode:!1})},"3ab5":function(t,e,i){"use strict";var n=i("1a2c"),o=i.n(n);o.a},"53f7":function(t,e,i){"use strict";var n=i("7658"),o=i("57e7");n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),o)},"57e7":function(t,e,i){"use strict";var n=i("e37c"),o=i("e4ca"),c=i("a74c"),u=i("ae5c"),r=i("b720"),s=i("1eb8"),a=i("50757"),f=i("0cc2"),l=i("97ed"),d=i("437f"),m=i("ab4a"),p=i("d0b1").fastKey,v=i("235c"),h=v.set,y=v.getterFor;t.exports={getConstructor:function(t,e,i,f){var l=t((function(t,o){r(t,d),h(t,{type:e,index:n(null),first:void 0,last:void 0,size:0}),m||(t.size=0),s(o)||a(o,t[f],{that:t,AS_ENTRIES:i})})),d=l.prototype,v=y(e),g=function(t,e,i){var n,o,c=v(t),u=w(t,e);return u?u.value=i:(c.last=u={index:o=p(e,!0),key:e,value:i,previous:n=c.last,next:void 0,removed:!1},c.first||(c.first=u),n&&(n.next=u),m?c.size++:t.size++,"F"!==o&&(c.index[o]=u)),t},w=function(t,e){var i,n=v(t),o=p(e);if("F"!==o)return n.index[o];for(i=n.first;i;i=i.next)if(i.key===e)return i};return c(d,{clear:function(){var t=v(this),e=t.first;while(e)e.removed=!0,e.previous&&(e.previous=e.previous.next=void 0),e=e.next;t.first=t.last=void 0,t.index=n(null),m?t.size=0:this.size=0},delete:function(t){var e=v(this),i=w(this,t);if(i){var n=i.next,o=i.previous;delete e.index[i.index],i.removed=!0,o&&(o.next=n),n&&(n.previous=o),e.first===i&&(e.first=n),e.last===i&&(e.last=o),m?e.size--:this.size--}return!!i},forEach:function(t){var e,i=v(this),n=u(t,arguments.length>1?arguments[1]:void 0);while(e=e?e.next:i.first){n(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!w(this,t)}}),c(d,i?{get:function(t){var e=w(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),m&&o(d,"size",{configurable:!0,get:function(){return v(this).size}}),l},setStrong:function(t,e,i){var n=e+" Iterator",o=y(e),c=y(n);f(t,e,(function(t,e){h(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){var t=c(this),e=t.kind,i=t.last;while(i&&i.removed)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?l("keys"===e?i.key:"values"===e?i.value:[i.key,i.value],!1):(t.target=void 0,l(void 0,!0))}),i?"entries":"values",!i,!0),d(e)}}},"636f1":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{style:t.colorStyle},[i("v-uni-view",{staticClass:"px-30"},[i("v-uni-view",{staticClass:"topic-box pt-24 pb-10 bb-e w-full flex-y-center flex-wrap"},[t._l(t.topicSelectedList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"h-52 px-16 font-num bg-light rd-30rpx flex-center fs-26 mr-22 mb-20",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delTopic(n)}}},[i("v-uni-text",{staticClass:"pr-8"},[t._v("#"+t._s(e.name))]),i("v-uni-text",{staticClass:"iconfont icon-ic_close fs-24"})],1)})),i("v-uni-input",{staticClass:"fs-28 lh-40rpx flex-1 mb-20 min-w-150",attrs:{type:"text",placeholder:"新建或搜索话题",maxlength:10,focus:t.focus},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.handleInput.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmCreate.apply(void 0,arguments)}},model:{value:t.topicKeyword,callback:function(e){t.topicKeyword="string"===typeof e?e.trim():e},expression:"topicKeyword"}})],2),i("v-uni-view",{staticClass:"flex-y-center flex-wrap pt-32"},t._l(t.recommendTopic,(function(e,n){return i("v-uni-view",{key:n,staticClass:"h-52 px-16 bg--w111-f5f5f5 rd-30rpx flex-center fs-26 mr-22 mb-20",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeTopic(e)}}},[t._v("#"+t._s(e.name))])})),1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showFilter,expression:"showFilter"}],staticClass:"w-full fixed-lt bg--w111-fff z-20",style:[t.filterStyle]},[i("v-uni-view",{staticClass:"relative mt-20 px-30 h-full overflow-scroll"},[t._l(t.filterTopicList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"h-88 filter-cell flex-between-center",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeTopic(e)}}},[i("v-uni-text",{staticClass:"fs-28 fw-500 lh-40rpx"},[i("v-uni-text",[t._v("#")]),t._v(t._s(e.name))],1),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.community_count>0,expression:"cell.community_count > 0"}],staticClass:"text--w111-999 fs-22"},[t._v(t._s(e.community_count)+"篇内容")])],1)})),i("v-uni-view",{staticClass:"h-80"})],2)],1),i("v-uni-view",{staticClass:"fixed-lb w-full pb-safe"},[i("v-uni-view",{staticClass:"h-128 flex-center px-30"},[i("v-uni-view",{staticClass:"w-full h-88 rd-44rpx bg-color text--w111-fff flex-center fs-28",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveTopic.apply(void 0,arguments)}}},[t._v("完成")])],1)],1)],1)],1)},o=[]},"6d3c":function(t,e,i){"use strict";i.r(e);var n=i("636f1"),o=i("d64e");for(var c in o)["default"].indexOf(c)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(c);i("3ab5"),i("6f7c");var u=i("828b"),r=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,"0e52a0b7",null,!1,n["a"],void 0);e["default"]=r.exports},"6f7c":function(t,e,i){"use strict";var n=i("b03d"),o=i.n(n);o.a},9092:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 商家管理 */\n/* 行为相关颜色 */\n/* crmeb颜色变量 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.bg-light[data-v-0e52a0b7]{background-color:var(--view-minorColorT)}.bb-e[data-v-0e52a0b7]{border-bottom:%?1?% solid #eee}.min-w-150[data-v-0e52a0b7]{min-width:%?150?%}.filter-cell ~ .filter-cell[data-v-0e52a0b7]{border-top:1px solid #f5f5f5}.overflow-scroll[data-v-0e52a0b7]{overflow-y:scroll}',""]),t.exports=e},"9c2e":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,"uni-page-body[data-v-0e52a0b7]{background-color:#fff}body.?%PAGE?%[data-v-0e52a0b7]{background-color:#fff}",""]),t.exports=e},a74f:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("b7c7"));i("5c47"),i("3efd"),i("c223"),i("bf0f"),i("2797"),i("4626"),i("5ac7"),i("aa9c"),i("4100"),i("f3f7"),i("18f7"),i("de6c"),i("dd2b"),i("fd3c"),i("bd06");var c=i("eb8a"),u=n(i("89cc")),r=i("2c18"),s=uni.getWindowInfo().statusBarHeight,a={name:"createTopic",data:function(){return{sysHeight:s,id:0,topicSelectedList:[],topicKeyword:"",showFilter:!1,filterTopicList:[],focus:!0,recommendParams:{page:1,limit:10,is_recommend:1},showMore:!1,recommendTopic:[],boxHeight:0}},mixins:[u.default],computed:{filterStyle:function(){var t=uni.getWindowInfo().windowHeight;return{height:t-this.boxHeight+"px",top:this.boxHeight+"px"}}},onLoad:function(t){t.data&&(this.topicSelectedList=JSON.parse(t.data)),this.getTopic()},methods:{getHeight:function(){var t=this;uni.createSelectorQuery().select(".topic-box").boundingClientRect((function(e){t.boxHeight=e.height})).exec()},handleInput:(0,r.Debounce)((function(t){var e=this;this.topicKeyword?(0,c.getTopicApi)({is_community:1,name:this.topicKeyword}).then((function(t){e.getHeight(),e.filterTopicList=t.data,e.filterTopicList.unshift({name:e.topicKeyword}),e.showFilter=!0})):this.showFilter=!1})),getTopic:function(){var t=this;(0,c.getTopicApi)(this.recommendParams).then((function(e){t.showMore=e.data.length>=t.recommendParams.limit,t.recommendTopic=t.recommendTopic.concat(e.data),t.recommendParams.page++;var i=[];t.recommendTopic.forEach((function(e,n){t.topicSelectedList.forEach((function(t){t.name.includes(e.name)&&i.push(n)}))})),i=(0,o.default)(new Set(i)).sort((function(t,e){return e-t})),i.forEach((function(e){t.recommendTopic.splice(e,1)}))}))},changeTopic:function(t){var e=this;if(this.showFilter=!1,this.topicKeyword="",this.topicSelectedList.length>4)return this.$util.Tips({title:"最多可选择5个话题"});this.focus=!1;var i=this.topicSelectedList.map((function(t){return t.name}));i.includes(t.name)||this.topicSelectedList.push(t),this.recommendTopic.splice(this.recommendTopic.findIndex((function(e){return e.id==t.id})),1),this.$nextTick((function(){e.focus=!0}))},confirmCreate:function(){this.topicKeyword&&this.changeTopic({name:this.topicKeyword})},saveTopic:function(){uni.$emit("topicSave",this.topicSelectedList),uni.navigateBack()},delTopic:function(t){this.topicSelectedList.splice(t,1)}}};e.default=a},b03d:function(t,e,i){var n=i("9092");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("967d").default;o("12240a00",n,!0,{sourceMap:!1,shadowMode:!1})},d64e:function(t,e,i){"use strict";i.r(e);var n=i("a74f"),o=i.n(n);for(var c in n)["default"].indexOf(c)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(c);e["default"]=o.a},eb8a:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.communityBrowseApi=function(t){return o.default.put("community/browse/".concat(t))},e.communityDeleteApi=function(t){return o.default.delete("community/community_delete/".concat(t))},e.communityElegantListApi=function(t){return o.default.get("community/elegant_list",t)},e.communityFlowIndexApi=function(){return o.default.get("community/follow")},e.communityFlowListApi=function(t,e){return o.default.get("community/follow_list/".concat(t),e)},e.communityFriendListApi=function(t){return o.default.get("community/user_friend",t)},e.communityInfoApi=function(t){return o.default.get("community/detail/".concat(t),{},{noAuth:!0})},e.communityLikeApi=function(t,e){return o.default.post("community/community_like/".concat(t),e)},e.communityLikeListApi=function(t){return o.default.get("community/like_list",t)},e.communityListApi=function(t){return o.default.get("community/list",t,{noAuth:!0})},e.communityMessageApi=function(t){return o.default.get("community/message",t)},e.communityRecommendListApi=function(t){return o.default.get("community/recommend_list",t)},e.communityReplyDeleteApi=function(t){return o.default.delete("community/comment_delete/".concat(t))},e.communityReplyLikeApi=function(t,e){return o.default.post("community/comment_like/".concat(t),e)},e.communityReplyListApi=function(t){return o.default.get("community/comment/list",t,{noAuth:!0})},e.communityReplySaveApi=function(t){return o.default.post("community/comment/save",t)},e.communitySaveApi=function(t){return o.default.post("community/community_save",t)},e.communitySetInsterestApi=function(t,e){return o.default.post("community/set_interest/".concat(t),e)},e.communityShareApi=function(t){return o.default.get("community/share/".concat(t))},e.communityTopicCountApi=function(t){return o.default.get("community/topic_count/".concat(t),{},{noAuth:!0})},e.communityUpdateApi=function(t,e){return o.default.post("community/community_update/".concat(t),e)},e.communityUpdateDescApi=function(t){return o.default.post("community/update_desc",t)},e.communityUserInfoApi=function(t){return o.default.get("community/user_info/".concat(t))},e.getCommunityConfig=function(){return o.default.get("community/config",{},{noAuth:!0})},e.getProductApi=function(t){return o.default.get("community/product_list",t,{noAuth:!0})},e.getTopicApi=function(t){return o.default.get("community/topic",t,{noAuth:!0})};var o=n(i("65455"))},f3f7:function(t,e,i){"use strict";i("53f7")}}]);