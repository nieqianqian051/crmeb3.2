(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-admin-writeOffCard-index"],{"00c4":function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",{staticClass:"container"},[t.list.cart_info?r("v-uni-view",{staticClass:"goods-box"},[r("v-uni-view",{staticClass:"header"},[t._v("订单号："+t._s(t.list.order_id))]),t._l(t.list.cart_info,(function(e,n){return r("v-uni-view",{key:n,staticClass:"item acea-row"},[r("v-uni-view",{staticClass:"pictrue"},[r("v-uni-image",{attrs:{src:e.cart_info.productInfo.attrInfo.image,mode:""}})],1),r("v-uni-view",{staticClass:"text acea-row row-column row-between"},[r("v-uni-view",{staticClass:"title line2"},[t._v(t._s(e.cart_info.productInfo.store_name))]),r("v-uni-view",{staticClass:"money acea-row row-between row-middle"},[r("v-uni-view",{staticClass:"orangcol"},[t._v("已核销："),r("v-uni-text",[t._v(t._s(e.write_times-e.surplus_num))]),t._v("/"+t._s(e.write_times))],1),1==e.is_writeoff?r("v-uni-view",{staticClass:"txt acea-row row-middle"},[t._v("核销已完成")]):r("v-uni-view",{staticClass:"txt acea-row row-middle"},[t._v("本次核销："),r("v-uni-view",{staticClass:"carnum acea-row row-center-wrapper"},[1==e.surplus_num_input?r("v-uni-view",{staticClass:"reduce bggary"},[r("v-uni-text",{staticClass:"iconfont icon-ic_Reduce"})],1):r("v-uni-view",{staticClass:"reduce",on:{click:function(r){r.stopPropagation(),arguments[0]=r=t.$handleEvent(r),t.subCart(e,n)}}},[r("v-uni-text",{staticClass:"iconfont icon-ic_Reduce"})],1),r("v-uni-input",{staticClass:"nums",attrs:{type:"number"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.numInput.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t.numBlur.apply(void 0,arguments)}},model:{value:e.surplus_num_input,callback:function(r){t.$set(e,"surplus_num_input",r)},expression:"item.surplus_num_input"}}),e.surplus_num_input==e.surplus_num?r("v-uni-view",{staticClass:"plus bggary"},[r("v-uni-text",{staticClass:"iconfont icon-ic_increase"})],1):r("v-uni-view",{staticClass:"plus",on:{click:function(r){r.stopPropagation(),arguments[0]=r=t.$handleEvent(r),t.addCart(e,n)}}},[r("v-uni-text",{staticClass:"iconfont icon-ic_increase"})],1)],1)],1)],1)],1)],1)}))],2):t._e(),t.recordList.length?r("v-uni-view",{staticClass:"record-box"},[r("v-uni-view",{staticClass:"header"},[t._v("核销记录")]),r("v-uni-view",{staticClass:"list"},t._l(t.recordList,(function(e,n){return r("v-uni-view",{key:n,staticClass:"item acea-row row-middle row-between"},[r("v-uni-view",{staticClass:"left"},[t._v(t._s(e.add_time))]),r("v-uni-view",{staticClass:"right"},[t._v("核销"+t._s(e.writeoff_num)+"次")])],1)})),1)],1):t._e(),r("v-uni-view",{staticClass:"footer acea-row row-middle row-between"},[r("v-uni-navigator",{staticClass:"btn",attrs:{url:"/pages/admin/work/index","hover-class":"none"}},[t._v("返回工作台")]),t.list.cart_info&&t.list.cart_info[0].surplus_num?r("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.verification.apply(void 0,arguments)}}},[t._v("确认核销")]):t._e()],1)],1)},i=[]},"277d":function(t,e,r){"use strict";r.r(e);var n=r("bc95"),i=r.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},4765:function(t,e,r){var n=r("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 商家管理 */\n/* 行为相关颜色 */\n/* crmeb颜色变量 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.container[data-v-496e8514]{padding:%?22?% %?20?%}.goods-box[data-v-496e8514]{padding:%?32?% %?24?%;border-radius:%?24?%;background:#fff}.goods-box .header[data-v-496e8514]{margin-bottom:%?26?%;font-size:%?28?%;line-height:%?40?%;color:#333}.goods-box .pictrue[data-v-496e8514]{width:%?136?%;height:%?136?%;border-radius:%?16?%}.goods-box uni-image[data-v-496e8514]{width:100%;height:100%;border-radius:%?16?%}.goods-box .text[data-v-496e8514]{flex:1;padding-left:%?20?%}.goods-box .title[data-v-496e8514]{font-size:%?28?%;line-height:%?40?%;color:#333}.goods-box .orangcol[data-v-496e8514]{font-size:%?24?%;line-height:%?34?%;color:#666}.goods-box .orangcol uni-text[data-v-496e8514]{color:#2a7efb}.goods-box .txt[data-v-496e8514]{font-size:%?24?%;line-height:%?34?%;color:#666}.goods-box .reduce[data-v-496e8514]{width:%?32?%;height:%?36?%;text-align:left;line-height:%?36?%}.goods-box .reduce .iconfont[data-v-496e8514]{font-size:%?24?%;color:#333}.goods-box .reduce.bggary .iconfont[data-v-496e8514]{color:#ccc}.goods-box .plus[data-v-496e8514]{width:%?32?%;height:%?36?%;text-align:right;line-height:%?36?%}.goods-box .plus .iconfont[data-v-496e8514]{font-size:%?24?%;color:#333}.goods-box .plus.bggary .iconfont[data-v-496e8514]{color:#ccc}.goods-box .nums[data-v-496e8514]{width:%?72?%;height:%?36?%;border-radius:%?4?%;background:#f5f5f5;text-align:center;font-family:SemiBold;font-weight:600;font-size:%?24?%;line-height:%?36?%;color:#333}.goods-box .iconfont[data-v-496e8514]{font-size:%?24?%}.record-box[data-v-496e8514]{padding-bottom:%?30?%;border-radius:%?24?%;margin-top:%?20?%;background:#fff}.record-box .header[data-v-496e8514]{padding:%?32?% 0 %?16?% %?24?%;font-weight:500;font-size:%?30?%;line-height:%?42?%;color:#333}.record-box .list[data-v-496e8514]{padding:0 %?40?%}.record-box .item[data-v-496e8514]{height:%?88?%;border-bottom:%?1?% solid #f1f1f1;font-size:%?28?%;color:#333}.record-box .item .right[data-v-496e8514]{color:#666}.footer[data-v-496e8514]{position:fixed;bottom:0;left:0;width:100%;height:%?112?%;height:calc(%?112?% + constant(safe-area-inset-bottom));height:calc(%?112?% + env(safe-area-inset-bottom));padding:0 %?20?%;padding-bottom:constant(safe-area-inset-bottom);padding-bottom:env(safe-area-inset-bottom);background:#fff}.footer .btn[data-v-496e8514]{flex:1;height:%?72?%;border:%?2?% solid #2a7efb;border-radius:%?36?%;margin-right:%?16?%;text-align:center;font-weight:500;font-size:%?26?%;line-height:%?68?%;color:#2a7efb}.footer .btn[data-v-496e8514]:last-child{margin-right:0;background:#2a7efb;color:#fff}.item ~ .item[data-v-496e8514]{margin-top:%?40?%}',""]),t.exports=e},"6af6":function(t,e,r){"use strict";r("6a54");var n=r("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.OrderCancel=function(t){return i.default.post("store/order/cancel/"+t)},e.OrderDel=function(t){return i.default.delete("store/order/del/"+t)},e.OrderDetail=function(t){return i.default.get("store/order/detail/"+t)},e.OrderRefund=function(t){return i.default.post("store/order/refund",t,{login:!0})},e.adminCartAdd=function(t,e){return i.default.post("admin/order/cart/add/".concat(t),e)},e.adminCartDel=function(t,e){return i.default.delete("admin/order/cart/del/".concat(t),e)},e.adminCartList=function(t,e){return i.default.get("admin/order/cart/".concat(t),e)},e.adminCartNum=function(t,e){return i.default.post("admin/order/cart/num/".concat(t),e)},e.adminCategory=function(){return i.default.get("admin/product/category")},e.adminOrderRecordList=function(t){return i.default.get("admin/order/place/list",t)},e.adminProList=function(t){return i.default.get("admin/product/list",t)},e.adminProductList=function(t){return i.default.get("admin/product/admin_list",t)},e.adminRefundList=function(t){return i.default.get("admin/refund_order/list",t)},e.adminUserAddressList=function(t,e){return i.default.get("admin/user/address/list/".concat(t),e)},e.adminUserList=function(t){return i.default.get("admin/user/list",t)},e.deliveryInfo=function(t){return i.default.get("store/delivery/info")},e.deliveryList=function(t){return i.default.get("store/delivery/data",t)},e.deliveryOrderList=function(t){return i.default.get("store/delivery/order",t)},e.deliveryStatistics=function(t){return i.default.get("store/delivery/statistics",t)},e.getAdminOrderDelivery=function(t){return i.default.get("admin/order/delivery/gain/"+t,{},{login:!0})},e.getAdminOrderDetail=function(t){return i.default.get("admin/order/detail/"+t,{},{login:!0})},e.getAdminOrderList=function(t){return i.default.get("admin/order/list",t,{login:!0})},e.getAdminRefundDetail=function(t){return i.default.get("admin/refund_order/detail/"+t,{},{login:!0})},e.getCashierApi=function(t,e){return i.default.post("admin/order/pay/".concat(t),e)},e.getCategory=function(){return i.default.get("admin/product/category")},e.getCouponsOrderPrice=function(t,e){return i.default.get("admin/order/coupons/".concat(t),e)},e.getGetAttrs=function(t){return i.default.get("admin/product/get_attr/".concat(t))},e.getGroupList=function(){return i.default.get("admin/user/group/list")},e.getLevelList=function(){return i.default.get("admin/user/level/list")},e.getListApi=function(t){return i.default.get("store/order/data",t)},e.getLogistics=function(t){return i.default.get("logistics",t,{login:!1})},e.getOrderChart=function(t){return i.default.get("admin/order/time/chart",t)},e.getOrderDelivery=function(){return i.default.get("store/delivery/list")},e.getOrderDeliveryinfoApi=function(t){return i.default.get("store/order/delivery_info/"+t)},e.getOrderExportApi=function(t){return i.default.get("store/order/export_all",t,{login:!1})},e.getOrderExportTemp=function(t){return i.default.get("store/order/export_temp",t)},e.getOrderOfflineApi=function(t){return i.default.post("store/order/offline",t)},e.getOrderPriceApi=function(t){return i.default.post("store/order/price",t)},e.getOrderStaging=function(){return i.default.get("admin/order/staging")},e.getOrderTime=function(t){return i.default.get("admin/order/time",t)},e.getOrderlistApi=function(t){return i.default.get("store/order/list",t)},e.getOrderreMarkApi=function(t){return i.default.post("store/order/remark",t)},e.getPayStatusApi=function(t){return i.default.get("admin/order/pay/status",t)},e.getProductLabel=function(){return i.default.get("admin/product/product_label")},e.getRefundMarkApi=function(t){return i.default.post("store/refund/remark",t)},e.getRefundlistApi=function(t){return i.default.get("store/refund/list",t)},e.getStatisticsInfo=function(){return i.default.get("admin/order/statistics",{},{login:!0})},e.getStatisticsListApi=function(t,e){return i.default.get("store/staff/data/"+t,e)},e.getStatisticsMonth=function(t){return i.default.get("admin/order/data",t,{login:!0})},e.getStatisticsTime=function(t){return i.default.get("admin/order/time",t,{login:!0})},e.getUserCoupon=function(t){return i.default.get("admin/user/coupon/grant",t)},e.getUserInfo=function(t){return i.default.get("admin/user/info/".concat(t))},e.getUserLabel=function(){return i.default.get("admin/user/label/0")},e.getUserList=function(t){return i.default.get("admin/user/list",t)},e.offOrderInfo=function(t){return i.default.post("admin/order/info",t)},e.openRefund=function(t,e){return i.default.post("admin/order/open/refund/".concat(t),e)},e.orderCartInfo=function(t){return i.default.post("store/order/cart_info",t)},e.orderConfirm=function(t,e){return i.default.post("admin/order/confirm/".concat(t),e)},e.orderCreate=function(t,e,r){return i.default.post("admin/order/create/".concat(t,"/").concat(e),r)},e.orderDeliveryInfo=function(){return i.default.get("admin/order/delivery_info")},e.orderExportTemp=function(t){return i.default.get("admin/order/export_temp",t)},e.orderInfo=function(t){return i.default.get("store/order/statistics",t)},e.orderOrderDelivery=function(){return i.default.get("admin/order/delivery")},e.orderRefundAgree=function(t){return i.default.post("admin/order/refund_agree/"+t)},e.orderSplitDelivery=function(t,e){return i.default.put("admin/order/split_delivery/"+t,e)},e.orderSplitInfo=function(t){return i.default.get("admin/order/split_cart_info/"+t)},e.orderVerific=function(t,e){return i.default.post("admin/order/order_verific",{code:t,auth:e})},e.orderWirteOff=function(t,e){return i.default.post("admin/order/wirteoff/".concat(t),e)},e.orderWirteOffRecords=function(t,e){return i.default.post("admin/order/wirteoff/records/".concat(t),e)},e.orderWriteoff=function(t){return i.default.post("store/order/writeoff",t)},e.orderWriteoffInfo=function(t,e){return i.default.get("store/order/writeoff_info/"+t,e)},e.postBatchProcess=function(t){return i.default.post("admin/product/batch_process",t)},e.postOrderComputed=function(t,e,r){return i.default.post("admin/order/computed/".concat(t,"/").concat(e),r)},e.postUpdateAttrs=function(t,e){return i.default.post("admin/product/update_attrs/".concat(t),e)},e.postUserUpdate=function(t){return i.default.post("admin/user/update",t)},e.postUserUpdateOther=function(t,e){return i.default.post("admin/user/update_other/".concat(t),e)},e.productSetShow=function(t){return i.default.post("admin/product/set_show",t)},e.refundDetail=function(t){return i.default.get("store/refund/detail/"+t)},e.setAdminOrderDelivery=function(t,e){return i.default.post("admin/order/delivery/keep/"+t,e,{login:!0})},e.setAdminOrderPrice=function(t){return i.default.post("admin/order/price",t,{login:!0})},e.setAdminOrderRemark=function(t){return i.default.post("admin/order/remark",t,{login:!0})},e.setAdminRefundRemark=function(t){return i.default.post("admin/refund_order/remark",t,{login:!0})},e.setOfflinePay=function(t){return i.default.post("admin/order/offline",t,{login:!0})},e.setOrderDelivery=function(t,e){return i.default.post("store/order/delivery/"+t,e,{login:!0})},e.setOrderRefund=function(t){return i.default.post("admin/order/refund",t,{login:!0})},e.statisticsMenuApi=function(t){return i.default.get("store/staff/statistics",t)},e.storeRefundAgree=function(t){return i.default.post("store/order/refund_agree/"+t)},e.storeSplitDelivery=function(t,e){return i.default.put("store/order/split_delivery/"+t,e)},e.storeSplitInfo=function(t){return i.default.get("store/order/split_cart_info/"+t)},e.userInfo=function(){return i.default.get("store/staff/info")},r("c223");var i=n(r("65455"))},"6bc6":function(t,e,r){var n=r("4765");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=r("967d").default;i("57a19398",n,!0,{sourceMap:!1,shadowMode:!1})},8283:function(t,e,r){"use strict";var n=r("6bc6"),i=r.n(n);i.a},aac5:function(t,e,r){"use strict";r.r(e);var n=r("00c4"),i=r("277d");for(var o in i)["default"].indexOf(o)<0&&function(t){r.d(e,t,(function(){return i[t]}))}(o);r("8283");var a=r("828b"),u=Object(a["a"])(i["default"],n["b"],n["c"],!1,null,"496e8514",null,!1,n["a"],void 0);e["default"]=u.exports},bc95:function(t,e,r){"use strict";r("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r("64aa"),r("aa9c"),r("d4b5");var n=r("6af6"),i={data:function(){return{list:{},recordList:[],lists:{},checkModel:[],nums:[],auth:1,id:0}},watch:{checkModel:function(){this.lengt==this.checkModel.length?this.checked=!0:this.checked=!1}},onLoad:function(t){this.auth=t.auth||1,this.id=t.id,this.getCartList(),this.orderWirteOffRecords()},methods:{numInput:function(t){var e=this,r=t.detail.value;r&&(r=Number(r),this.$nextTick((function(){r>e.list.cart_info[0].surplus_num?e.list.cart_info[0].surplus_num_input=e.list.cart_info[0].surplus_num:r<1&&(e.list.cart_info[0].surplus_num_input=1)})))},numBlur:function(t){var e=this,r=t.detail.value;r||this.$nextTick((function(){e.list.cart_info[0].surplus_num_input=1}))},orderWirteOffRecords:function(){var t=this;(0,n.orderWirteOffRecords)(this.id,{product_type:4}).then((function(e){t.recordList=e.data.list}))},num:function(){for(var t=0;t<this.lists.cart_info.length;t++)this.nums.push({num:0})},getCartList:function(){var t=this;(0,n.orderCartInfo)({oid:this.id,auth:this.auth}).then((function(e){for(var r=e.data,n=0;n<r.cart_info.length;n++)r.cart_info[n].surplus_num_input=1;t.list=e.data,t.lists=JSON.parse(JSON.stringify(e.data)),t.listlet=e.data.cart_info.length,t.$set(t.attr,"id",t.list.id),t.num()})).catch((function(e){t.$util.Tips({title:e})}))},subCart:function(t,e){this.list.cart_info[e].surplus_num_input--},addCart:function(t,e){this.list.cart_info[e].surplus_num_input++},verification:function(){for(var t=this,e=[],r=0;r<this.list.cart_info.length;r++)e.push({cart_id:this.list.cart_info[r].cart_id,cart_num:this.list.cart_info[r].surplus_num_input});(0,n.orderWriteoff)({auth:this.auth,oid:this.id,cart_ids:e}).then((function(e){t.$util.Tips({title:e.msg},(function(){t.orderWirteOffRecords()})),t.list.cart_info[0].surplus_num=t.list.cart_info[0].surplus_num-t.list.cart_info[0].surplus_num_input})).catch((function(e){t.$util.Tips({title:e})}))}}};e.default=i}}]);