(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-goodsShare-index"],{"27de":function(e,t,i){var s=i("9903");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var a=i("967d").default;a("70c1a795",s,!0,{sourceMap:!1,shadowMode:!1})},"428f":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return s}));var s={zbCode:i("4d7f").default},a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-uni-view",{style:e.colorStyle},[s("v-uni-view",{staticClass:"px-20"},[s("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.showCardOne,expression:"showCardOne"}],staticClass:"w-full bg--w111-fff rd-24rpx p-24 mt-24"},[s("v-uni-view",{staticClass:"flex-y-center"},[s("v-uni-text",{staticClass:"iconfont icon-icon_WeChat_1 fs-36"}),s("v-uni-text",{staticClass:"fs-30 lh-42rpx fw-500 pl-8"},[e._v("方式一：商品卡片分享")])],1),s("v-uni-view",{staticClass:"mt-24 w-full h-256 bg--w111-f9f9f9 rd-12rpx relative bg-cover",style:[e.shareCardBg]},[s("v-uni-view",{staticClass:"flex-y-center card-site"},[s("v-uni-image",{staticClass:"site-logo",attrs:{src:e.mpData.site_logo}}),s("v-uni-text",{staticClass:"site-name line1"},[e._v(e._s(e.mpData.site_name))])],1),s("v-uni-image",{staticClass:"w-210 h-168 card-center-image",attrs:{src:e.storeInfo.image,mode:"aspectFill"}})],1),s("v-uni-view",{staticClass:"w-full bg-gradient h-80 rd-40rpx flex-center fs-28 text--w111-fff mt-24",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cardShare.apply(void 0,arguments)}}},[e._v("分享商品卡片")])],1),s("v-uni-view",{staticClass:"w-full bg--w111-fff rd-24rpx p-24 mt-32"},[s("v-uni-view",{staticClass:"flex-between-center"},[s("v-uni-view",{staticClass:"flex-y-center"},[s("v-uni-image",{staticClass:"w-36 h-36",attrs:{src:i("bacd")}}),s("v-uni-text",{staticClass:"fs-30 lh-42rpx fw-500 pl-8"},[e._v("方式"+e._s(e.showCardOne?"二":"一")+"：商品图片分享")])],1),e.storeInfo.slider_image.length>1?s("v-uni-text",{staticClass:"iconfont fs-28 text--w111-666",class:e.isGrid?"icon-a-ic_Imageandtextsorting":"icon-a-ic_Picturearrangement",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),function(){e.isGrid=!e.isGrid}.apply(void 0,arguments)}}}):e._e()],1),1==e.storeInfo.slider_image.length?s("v-uni-view",[s("v-uni-view",{staticClass:"mt-24 flex-x-center"},[s("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!e.posterImage,expression:"!posterImage"}],staticClass:"load-box poster-img"}),s("v-uni-image",{directives:[{name:"show",rawName:"v-show",value:e.posterImage,expression:"posterImage"}],staticClass:"poster-img",attrs:{src:e.posterImage,mode:"aspectFill"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.proviewPhoto(0)}}})],1),s("v-uni-view",{staticClass:"w-full flex-between-center"},[s("v-uni-view",{staticClass:"w-full bg-gradient h-80 rd-40rpx flex-center fs-28 text--w111-fff mt-24",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.proviewPhoto(0)}}},[e._v("保存分享")])],1)],1):s("v-uni-view",[s("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!e.isGrid,expression:"!isGrid"}],staticClass:"mt-24"},[s("v-uni-scroll-view",{staticClass:"white-nowrap vertical-middle w-full",attrs:{"scroll-x":"true","show-scrollbar":"false"}},[s("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!e.posterImage,expression:"!posterImage"}],staticClass:"inline-block mr-16"},[s("v-uni-view",{staticClass:"load-box w-192 h-192 rd-8rpx"})],1),e._l(e.productSwiper,(function(t,i){return s("v-uni-view",{key:i,staticClass:"inline-block mr-16"},[s("v-uni-view",{staticClass:"w-192 h-192 relative text--w111-fff",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.proviewPhoto(i)}}},[s("v-uni-image",{staticClass:"w-full h-full rd-8rpx",class:{"b-e":t.isQrcode},attrs:{src:t.pic,mode:"aspectFill"}}),e.posterImage&&t.isQrcode?s("v-uni-view",{staticClass:"qr-tag flex-center fs-18 text--w111-fff"},[e._v("二维码推广图")]):e._e()],1)],1)}))],2)],1),s("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.isGrid,expression:"isGrid"}],staticClass:"w-full grid-column-3 grid-gap-16rpx mt-24"},[s("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!e.posterImage,expression:"!posterImage"}],staticClass:"load-box w-full h-210 rd-12rpx"}),e._l(e.productSwiper,(function(t,i){return s("v-uni-view",{key:i,staticClass:"w-full h-210 relative text--w111-fff",class:{"b-e rd-12rpx":t.isQrcode},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.proviewPhoto(i)}}},[s("v-uni-image",{staticClass:"w-full h-full rd-12rpx",attrs:{src:t.pic,mode:"aspectFill"}}),e.posterImage&&t.isQrcode?s("v-uni-view",{staticClass:"qr-tag flex-center fs-18 text--w111-fff"},[e._v("二维码推广图")]):e._e()],1)}))],2),s("v-uni-view",{staticClass:"w-full flex-between-center"},[s("v-uni-view",{staticClass:"w-full bg-gradient h-80 rd-40rpx flex-center fs-28 text--w111-fff mt-24",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.proviewPhoto(0)}}},[e._v("保存分享")])],1)],1)],1),s("v-uni-view",{staticClass:"w-full bg--w111-fff rd-24rpx p-24 mt-24"},[s("v-uni-view",{staticClass:"flex-y-center"},[s("v-uni-image",{staticClass:"w-36 h-36",attrs:{src:i("ce68")}}),s("v-uni-text",{staticClass:"fs-30 lh-42rpx fw-500 pl-8"},[e._v("方式"+e._s(e.showCardOne?"三":"二")+"：文案分享")])],1),s("v-uni-view",{staticClass:"mt-24 bg--w111-f9f9f9 rd-12rpx p-16 fs-26 lh-36rpx space-line"},[e._v(e._s(e.storeInfo.share_content||e.storeInfo.store_name)),s("v-uni-text",[s("br"),e._v(e._s(e.codeVal))])],1),s("v-uni-view",{staticClass:"w-full flex-between-center"},[s("v-uni-view",{staticClass:"w-320 h-80 rd-40rpx flex-center fs-26 view-border fw-500 font-num mt-24",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.copyShare(0)}}},[e._v("仅复制链接")]),s("v-uni-view",{staticClass:"w-320 bg-gradient h-80 rd-40rpx flex-center fw-500 fs-28 text--w111-fff mt-24",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.copyShare(1)}}},[e._v("复制文案及链接")])],1)],1),s("v-uni-view",{staticClass:"pb-safe"},[s("v-uni-view",{staticClass:"h-80"})],1)],1),s("zb-code",{ref:"qrcode",attrs:{onval:!0,loadMake:!0,show:e.codeShow,cid:"1",val:e.codeVal},on:{result:function(t){arguments[0]=t=e.$handleEvent(t),e.qrR.apply(void 0,arguments)}}}),e.canvasStatus?s("v-uni-canvas",{staticClass:"canvas",attrs:{"canvas-id":"myCanvas"}}):e._e()],1)},n=[]},"540f":function(e,t,i){"use strict";i.r(t);var s=i("428f"),a=i("8b41");for(var n in a)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(n);i("f422");var o=i("828b"),r=Object(o["a"])(a["default"],s["b"],s["c"],!1,null,"29891635",null,!1,s["a"],void 0);t["default"]=r.exports},"8b41":function(e,t,i){"use strict";i.r(t);var s=i("994d"),a=i.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(n);t["default"]=a.a},9903:function(e,t,i){var s=i("c86c");t=s(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 商家管理 */\n/* 行为相关颜色 */\n/* crmeb颜色变量 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.icon-icon_WeChat_1[data-v-29891635]{color:#0bbe24}.h-256[data-v-29891635]{height:%?256?%}.bg-cover[data-v-29891635]{background-size:cover}.card-site[data-v-29891635]{position:absolute;left:50%;top:%?24?%;-webkit-transform:translateX(-50%);transform:translateX(-50%);width:%?210?%}.card-site .site-logo[data-v-29891635]{width:%?18?%;height:%?18?%;border-radius:50%}.card-site .site-name[data-v-29891635]{width:%?152?%;font-size:%?18?%;color:#727272;line-height:%?16?%;padding-left:%?4?%}.card-center-image[data-v-29891635]{position:absolute;left:50%;top:%?48?%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.poster-img[data-v-29891635]{width:%?254?%;height:%?438?%;border-radius:%?12?%;border:%?1?% solid #eee}.load-box[data-v-29891635]{-webkit-animation:looming-gray-data-v-29891635 1s infinite linear;animation:looming-gray-data-v-29891635 1s infinite linear;background-color:#e3e3e3}.view-border[data-v-29891635]{border:1px solid var(--view-theme)}.icon-a-ic_CompleteSelect[data-v-29891635]{color:var(--view-theme)}.space-line[data-v-29891635]{white-space:pre-line}.select-icon[data-v-29891635]{position:absolute;top:%?12?%;right:%?12?%}.b-e[data-v-29891635]{border:%?1?% solid #eee}.qr-tag[data-v-29891635]{position:absolute;bottom:0;left:0;width:100%;height:%?40?%;border-radius:0 0 %?8?% %?8?%;background-color:rgba(0,0,0,.5)}.canvas[data-v-29891635]{position:fixed;top:-1300px;left:0;width:750px;height:1300px}@-webkit-keyframes looming-gray-data-v-29891635{0%{background-color:hsla(0,0%,89%,.6666666666666666)}50%{background-color:#e3e3e3}100%{background-color:hsla(0,0%,89%,.6666666666666666)}}@keyframes looming-gray-data-v-29891635{0%{background-color:hsla(0,0%,89%,.6666666666666666)}50%{background-color:#e3e3e3}100%{background-color:hsla(0,0%,89%,.6666666666666666)}}',""]),e.exports=t},"994d":function(e,t,i){"use strict";(function(e){i("6a54");var s=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("fd3c"),i("c9b5"),i("bf0f"),i("ab80"),i("5ef2"),i("5c47"),i("a1c1"),i("3efd"),i("c223"),i("8f71");var a=s(i("2634")),n=s(i("2fdc")),o=s(i("9b1b")),r=s(i("89cc")),c=i("4d38"),l=i("0f73"),u=(i("92f9"),i("5088"),i("8f59")),d=s(i("4d7f")),f={data:function(){return{imgHost:c.HTTP_REQUEST_URL,id:0,canvasStatus:!1,codeShow:!1,codeVal:"",shareQrcode:0,PromotionCode:"",followCode:"",siteName:"",posterTitle:"",themeColor:"#e93323",fontColor:"#e93323",posterImage:"",storeImage:"",isDown:!0,posterImageStatus:!1,storeInfo:{slider_image:[]},productSwiper:[],showCardOne:!0,shortLink:"",isGrid:!0,mpData:{}}},components:{zbCode:d.default},computed:(0,o.default)((0,o.default)({},(0,u.mapGetters)(["isLogin","uid"])),{},{shareCardBg:function(){return{backgroundImage:"url("+this.imgHost+"/statics/images/promoter/promoter_group9.png)"}}}),mixins:[r.default],onLoad:function(e){if(this.showCardOne=!!this.$wechat.isWeixin(),!e.id)return this.$util.Tips({title:"缺少参数无法查看商品"},{tab:3});this.id=e.id||0,this.getInfo()},onReady:function(){this.isNodes++;var e=this.isLogin?this.$store.state.app.uid:"";this.codeVal=window.location.origin+"/pages/goods_details/index?id="+this.id+"&spid="+e},methods:{getInfo:function(){var e=this;return(0,n.default)((0,a.default)().mark((function t(){var i,s;return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,l.getProductDetail)(e.id,{promotions_type:0});case 2:i=t.sent,s=i.data.storeInfo,e.$set(e,"storeInfo",s),e.$set(e,"shareQrcode",i.data.share_qrcode),e.$set(e,"siteName",i.data.site_name),e.$set(e,"posterTitle",i.data.product_poster_title),e.productSwiper=s.slider_image.map((function(e){return{pic:e,select:!1,isQrcode:!1}})),e.goPoster();case 10:case"end":return t.stop()}}),t)})))()},getShortLink:function(){var e=this;(0,l.getShortLinkApi)(this.id).then((function(t){e.shortLink=t.data.code})).catch((function(t){return e.$util.Tips({title:t})}))},copyShare:function(e){var t,i=this.storeInfo.share_content||this.storeInfo.store_name;t=1==e?i+" "+this.codeVal:this.codeVal,uni.setClipboardData({data:t,success:function(){uni.showToast({title:"复制成功，快去分享吧",icon:"none"})}})},qrR:function(e){this.$wechat.isWeixin()&&"1"==this.shareQrcode||(this.PromotionCode=e,this.followCode="")},setDomain:function(e){return e=e?e.toString():"",e.indexOf("https://")>-1?e:e.replace("http://","https://")},downloadFileImage:function(t){return t=this.setDomain(t),new Promise((function(i,s){uni.downloadFile({url:t,success:function(e){i(e.tempFilePath)},fail:function(t){e.error(t.errMsg)}})}))},goPoster:function(){var e=this;return(0,n.default)((0,a.default)().mark((function t(){var i,s,n,o,r,c;return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e,t.next=3,e.downloadFileImage(e.storeInfo.image);case 3:return s=t.sent,t.next=6,e.downloadFileImage(e.imgHost+"/statics/images/product/posterbackgd.png");case 6:if(n=t.sent,o="",!e.$wechat.isWeixin()){t.next=17;break}return t.next=11,(0,l.getProductCode)(i.id);case 11:return r=t.sent,t.next=14,e.downloadFileImage(r.data.code);case 14:o=t.sent,t.next=18;break;case 17:o=e.PromotionCode;case 18:i.$set(i,"canvasStatus",!0),c=[n,s,o],i.$nextTick((function(){setTimeout((function(){i.$util.PosterCanvas(i.fontColor,i.themeColor,i.siteName,c,i.storeInfo.store_name,i.storeInfo.price,i.storeInfo.ot_price,i.posterTitle,(function(e){i.$set(i,"posterImage",e),i.$set(i,"posterImageStatus",!0),i.$set(i,"canvasStatus",!1),i.productSwiper.unshift({pic:e,select:!1,isQrcode:!0})}))}),1e3)}));case 21:case"end":return t.stop()}}),t)})))()},cardShare:function(){this.ShareInfo(),uni.showToast({title:"请点击右上角三个点进行分享",icon:"none"})},ShareInfo:function(){var e=this.storeInfo;if(this.$wechat.isWeixin()){var t={desc:e.store_info,title:e.store_name,link:"/pages/goods_details/index?id="+this.id+"&spid="+this.uid,imgUrl:e.image};this.$wechat.wechatEvevt(["updateAppMessageShareData","updateTimelineShareData","onMenuShareAppMessage","onMenuShareTimeline"],t).then((function(e){})).catch((function(e){}))}},appShare:function(){uni.share({provider:"weixin",scene:"WXSceneSession",type:0,href:"".concat(c.HTTP_REQUEST_URL,"/pages/goods_details/index?id=").concat(this.id,"&spid=").concat(this.uid),title:this.storeInfo.store_name,summary:this.storeInfo.store_info,imageUrl:this.storeInfo.small_image,success:function(e){},fail:function(e){uni.showToast({title:"分享失败",icon:"none",duration:2e3})}})},selectPic:function(e){e.select=!e.select},savePhoto:function(e){},mpSave:function(){var e=this,t=this.productSwiper.filter((function(e){return e.select})),i=t.length,s=0;uni.showLoading({title:"图片下载中",mask:!0});for(var a=0;a<t.length;a++)t[a].isQrcode?this.savePoster():uni.downloadFile({url:t[a].pic,success:function(t){var a=t.tempFilePath;uni.saveImageToPhotosAlbum({filePath:a,success:function(t){s++,s==i&&(uni.hideLoading(),e.$util.Tips({title:"保存成功",icon:"success"}))},fail:function(t){uni.hideLoading(),e.$util.Tips({title:"保存失败"})}})},fail:function(e){uni.hideLoading()}})},savePoster:function(){var e=this;uni.saveImageToPhotosAlbum({filePath:e.posterImage,success:function(t){e.$util.Tips({title:"保存成功",icon:"success"})},fail:function(t){e.$util.Tips({title:"保存失败"})}})},proviewPhoto:function(e){var t=this.productSwiper.map((function(e){return e.pic}));uni.previewImage({current:e,urls:t})}}};t.default=f}).call(this,i("ba7c")["default"])},bacd:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAA51BMVEUAAAD/mkP/pUf/lD7/kjv/ijb/izj+sU//gjL/nEH+wVj+uFP/gjP/oEX+vVb9nEL+pkj+oUX/lT3/gDH/nEH/nEL/nUP+s1H/hzb/slD+o0b+wVn/rEz9q0z9rEz8ulX/gDH+sE7+pEf+nEL+m0H+wVn/gDH+tVD/wlr/gDD9uFT9wVr/gDD9tlL9lkD/pUr/mkD/gDD+qkr+pEb+pkj+sU7+t1L+nkP+rUz+qEn+nEH+r03+okX+oET9wVn+vFX+ulT+tVH+s1D+v1f+mUD/gjH+lj7/hjT/kzz/kDr/iTb/jjn/jDdGn67IAAAAMnRSTlMAIBBAv79Av7/fv79Az7+A39/f37+fUEBAIO/fn4BwYGDv7+/vz8+vn5+PgIBwcDAwIFT5RqsAAAFpSURBVDjLzdLXdoJAFAXQcVJJNPZu1PTeJIo1Vjr//z25wxxAUd89T3ct9jrcGWCHm9bzhcgV5VLkzE+jySNSrf+JLJfT6WzW683ni253NOr3O53MV2B4HYRMj8zCN0Q6g99MFegtXkOmL42qFoEeQLZqyIxTQDu3GVANmckECNu8lstPsZrxRNOAZM2HGBvYJqjRhkMguQ0XY3mzhswKSG4jb2x9G0FWAZKHaonxOlazMgwgeaibJudkohrlnkyIYneDmjTjOcOwLCBcMREyqLkr0YNEzrJsoB01SoIxX9kBit0NmQIZqWwXU7yG1gnjehhgajXcjW8Qz8Ega9IskRU1yhFbixMiMrf+aQpDrBMhEwPVZPCIc7YZM0RqCmY7po5BzXK2L3qAUlm2Hz1iKGp735bU3zEllFTpCDmVqVQqSUo7nw83+VbET2HR17Rd1/Mcx6ToIvmfqJV/Fo9lTmTO/by02cHmH6cjdAMcwjRgAAAAAElFTkSuQmCC"},ce68:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAqFBMVEUAAABfwu9iyfFgxvJWte9nz+9dwfFv3PNr1fNnz/Nfw/FavfBfw+9avfFn0vRlzvNq1PNmz/JjzPJgxvJp1PNcwfJavPBm0fJZuvFgx/diyfJx3/VUtPBgx/Jky/Nw3fRlzfJw3/Rp1PNiyvJexPFgxvJcwfFYu/FhyPJWuPBt2vRr1/Rbv/Fw3fRo0vNkzPJm0PNmzvNlzvJavfFdwvFUtPBs2PRVtvC8qiykAAAAInRSTlMAIIDfgBDfgICAgIAw3zDP7+/v78+/cFBIIO/Pz5+PcGAwkEqfBgAAARpJREFUOMvF1NlygkAQheFBgiQGzWI0msWFRUDcwO3938yeHmumu5p7zyX11U8XF6hH7Pt3a7aGXaqqeh8Is6QETBx/STVnGTBxIFVoCRqYCt4+BgLRTLzbKalCQ5w5KK0+I4ZYBgwgoUKeOdR1gMr/iQhCg8SYeoHPPX/o1DPLNE2z3886ev9ZzyEg7lXaJElSFEWWMSRIokmapgSRa2iGI3sNz6SnFUFt16BZvVr0gkRkwGwIwmtEBgxF7hpONkeOpAFyzAlquwYNRTJzN/mTRR1Dhj6sq9eHaZKXBKEZKbYRkJIifJM/mU49u6gPhqG2a9BcKTIEDSXXs0M9kSnvhqCx/TY8Axtb5GFGGlhEfhhdNIL8TdQDdgNEX27+9fHdwwAAAABJRU5ErkJggg=="},f422:function(e,t,i){"use strict";var s=i("27de"),a=i.n(s);a.a}}]);