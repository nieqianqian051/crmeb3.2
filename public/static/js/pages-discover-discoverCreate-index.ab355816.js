(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-discover-discoverCreate-index"],{"16b1":function(t,e,i){"use strict";var n=i("93f2"),a=i.n(n);a.a},"672b":function(t,e,i){"use strict";i.r(e);var n=i("bbe9"),a=i("ec7c");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("84e0"),i("16b1");var c=i("828b"),s=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,"3d159a14",null,!1,n["a"],void 0);e["default"]=s.exports},8104:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMwAAADMCAMAAAAI/LzAAAAArlBMVEUAAAD////////////d3d3////////19fX////////////////////////////Q0ND///9/f39zdXh4ent1dnlobHFxc3Zla3F3eHpydHdZWVl8fX1tcHRucXVsb3N6e3xvcnVrbnNqbXJna3F+fn9iaG9fZm5kanBdZGxbY2z///9jY2OOjo6srKyXl5e+vr5eXl6Hh4fv7+9vb2+goKBra2vg4OCvr6/39/fq6uqLVZDYAAAAEXRSTlMA7yAQ71Df37+vn4+AcGD1QN7cpW4AAAlNSURBVHja7NVLj4IwFIbh6tyvzimElOOCzaxawI6Al///xwbFKDmjUuPE9BBeNsbdk48WsWv8+fx4vyzTH/A0PJIpoJw8vXzciXbjVz1feusgGCrKVvqtxXkY6Rl4HuI5zuhB7HrX8xx8D8+l1vq9sXzpeQreh2cr1nq7zd2IgwWwSzMa15g37f871o1BpV/rYfw/+04YzPRYfKz8vpKdMbj+FC88hgGLXeXP4onHMA4Y8yjugUcGW81yswOoFPdNBJO3DCpsVS4ajUmLFiYXJfCowHZZrdlacjwEgsMHc1OIfzTEgoVgcv4BLNHMUmJBI4BLBqnGlOQvPpiYXMQLPUsNVwxYYsmyWsMVUxELYpalhikmoJZGwxPTmmaytTQappjDqcnz/S/giimQxPZq3lT1CQO2T5jA9ghTa3qEqTVMMEkovx00DDDfgYyiKE6gq2nlOyYJo12qe5zQeozZjHJITh3GsZ5i6lFIAbhw/MM0o5BCcCk09mpMok511SgU4+YpKmvtFRgVnUheOooioxDM5d0WQ0fpBWY7iheY+ETOmCSMz8cHM5Vx3BtMEg8YgAHTkYrl8ccZI7ueG2LkiUJwKpFd3RATDJiLMAqONWBI/42ZDpi6AfPLjt0lKQpDYRheA0kOCZXkQKL87X+DQyLNwaADzqRtrOrXK/VCn/pQK+7ExZOOYsRuv5hfDN9/C/+L4cWjfjHUy5irWqo/H0P3+Edg6ndhdGmxVMULZfwT8OhlpnaLGOFjVhe3PhkjcM4Wtz4Yo80SL6i3YXhOjLJLVRH7ecxVr3oFI0qqiP08RqtV11cw1dJplvlHjNaKLQn91UdiQmKJXuAbMPxJAUN3ZgxfNWP4oRQZlr4R06BziMYYa5uSqRVGNM6ZpimnrC3FDuZwdWYMvRk/jEPXde1U3/cSfPWFEXJcPSUlOHFujGrHoYe7fHXDiG7sZPKUOjXGjx2keR0x3dhCGp4ZU43DBTaJgLHjANvEiTFubGGbKQrO27GHbSWnzobpx/byoIAZRnnZhqfGSHhQrSdMBw/y58UIhyZXtmQ/iKmZyR3j9ZF0doxuTMw2u9njqR/B8Cgpmfhb7G9VSWWoYW/DXJdqouxZjmNi4l0YXc9xGyw5V6HEuzElWfKssqfhlcFG5MXMKTRo88xCFErpJF55H04ZlY7lxVSIyHJZtpgqsTAHPuSMyoRRlaj1nEE0OS8wi/b5NAwkgIeQq7JgNPopNq+OiOUe5vgqJhzgeiwpRhTlw7HuqyYLxmJM6ZBAxCrbdxiOQ9e2vVxr9Bw3fd9fYMnkwGh7q1owLNcl1sSz9YSBJsVwbCclrHI5MPXdR5M55x5hXoXE3DgvA/M0zVStp2w/WS6QHaPZLUGYXL8sclnGESZ8Y7bhUbgPc2AKJWL1U8xzRWnQxf+ibEohTDtjmjnN2iAEeIi5/ifmykO1jjHvD2Iq6+TUJQbgTLnB4LIMEkYOw9D1sMllwASNrmt9XTCeHVilxAlCmMAB15RJw9cyDdUNNEvmZUh01eF2DFO5mULLxDDBmCEuczFrTHuBR7nw+tkwsYjZm8WCXKJhYuZeY+W0jLdEsRae5K6h/Jgdi5EULUPjpN0fTP0bMQDAEkqSk/eYhOO3EJJ8K4YUCYYdtNAypDkZhj0PZYLZavApZB9TZMf8JSPXeaBlEs3LGMyASfpDvd0tKQoDYRi+hkW6Y4pOJmkdHe7/Bhcc3A75kWUWIft6pFapT33gAZYLGAwprm1bZJlGMuhiyTLml7QhRpcxrCRsxxpKlwFOVlnG+DdglLqUMFo7JcHz+xs51VBIORKjyhhWEj0oY9rHFmCxxMHxGD3mVJBpW1kM8tOYJKJaMH6OCZ5Cjj9atRj9HaowE1CGCOaZVEJD+2Lu97vOW7RTYSSWR9GZTaZGjP6TjzEiwfGQshDkE8kUXPLtgNFBHGHEMp0exILhyHI8Rs+6zDExxRCFmohyBEa/wKhZFM8yZrMYOhCDhQtIc4ydJCHFWi8YkfwnmIhivWCoAsxwpRGzlASTo3ieY4jocIyWypiiRTBUASaGTF3mmAyFA0xOYofgonK3vTGgwrwZE8poAYmphFH5dsBgkI8wMYUhyOcoO2PwBcZEmMwRJtmUcigG4+ZvHlISCySU2jAcYZIjTOLIsozhd2IwjVQQCyW1gI0kx2But5srYTDGCCWO6sFgIaskeFIY0otNPg8Z+dVgHCiJvS9QgKkeTIninFHSRWaJNbZI2RXjXmOcV0EAI6V4kNmcxavjMe4Zq3mXlMOlVarDOFj8fcZmLQdhTAqRjOHcMoElL6kRY0ykSS0VYb6+vkxxlSlbPmd89rSXmCvBGInzy7AtrSKYlg/BpBTJwnyZv6QMddcGKsMYQx4EI5QXFn7UnLrO7IgpQiR6ZD0z8JC3tLjKlB0iC/VhgpZnEcwY74BpRswGkngViaYsvBvT4YChVZb1GOG8EXNqnKG+762T1q1SlkgmyCoJrtthPlpnxm5979+0imAkL8tg222C6Vp0U9D38EYKezfP8ISh4Q6erz/FCMUFffW3FRi70sLk4ggmy6Om+xfMtcVZtu9p81UkfGacbvA7Zw1KwlmLuZ4xTvWfOcw2FsIpska3Z425ztcfYboGJdHc3yIBAI/PeMScWszWdD/AnHQ21UNk2QjDqKe+MedWFzqtw4gljT7vtP0sQFryj2UaXdSsxHw05egOtO0qYHUThI9lmnKnVZjrwj9inEGHy7lMJsmhjl9fHsl3XYM5NXX3m307NgEYhoEoOoOwC4GKNLf/jCkPUhgOlOQc8j3BQ4WxQUPBTPPyS5ipYHJ6J01m5LQ+h4JBeqfdM5XOlYaJGr7RcsXsp6mQMYHhGWKF2Wo4tX6c7cQphI5hdfhEiohh5eGppmUg1PuRssb4eyB8z1qDCGnCMOBBEghpxjA8IMIC0oZhuK8Q6sGwFwlXzIf6Ma79GNfO9urthGEYhsLwcew091A9dwNhIiwMyf6TtZS2dARb+NvgB6HTYkrVYkrVYkrVYkplKyaRGQmRzIjIZEbGSVY8BIHMCLiZ+QBpwGjmzmTCrmRDujZ0LGSCsAdmPsiAgxcAnVMDwxnVebz0XH9NVO7xtrJWfmmH8oqPu2OpeW6EXY8fv/BVa046lecO//w2DUFyrKooxXyG27h/U54FVe4IB07VgAAAAABJRU5ErkJggg=="},"84e0":function(t,e,i){"use strict";var n=i("8ff7"),a=i.n(n);a.a},"8ff7":function(t,e,i){var n=i("c4d5");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("2b855028",n,!0,{sourceMap:!1,shadowMode:!1})},"93f2":function(t,e,i){var n=i("e4fd");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("285257bc",n,!0,{sourceMap:!1,shadowMode:!1})},bbe9:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uniPopup:i("b29f").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{style:t.colorStyle},[i("v-uni-view",[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:(t.configData.community_integral_num>0||t.configData.community_exp_num>0)&&!t.id,expression:"(configData.community_integral_num > 0 || configData.community_exp_num > 0) && !id"}],staticClass:"w-full notice flex-y-center pl-30 fs-26"},[t._v("完成本次发布，审核通过可得"),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.configData.community_integral_num>0,expression:"configData.community_integral_num > 0"}],staticClass:"font-num"},[t._v(t._s(t.configData.community_integral_num)+"积分")]),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.configData.community_integral_num>0&&t.configData.community_exp_num>0,expression:"configData.community_integral_num > 0 && configData.community_exp_num > 0"}],staticClass:"font-num"},[t._v("+")]),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.configData.community_exp_num>0,expression:"configData.community_exp_num > 0"}],staticClass:"font-num"},[t._v(t._s(t.configData.community_exp_num)+"经验值")]),t._v("奖励")],1),i("v-uni-view",{staticClass:"px-30"},[i("v-uni-view",{staticClass:"pt-30 grid-column-3 grid-gap-20rpx"},[t._l(t.formData.slider_image,(function(e,n){return i("v-uni-view",{key:n,staticClass:"relative w-full h-214",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.proviewPic(e)}}},[i("v-uni-image",{staticClass:"w-full h-214 rd-16rpx",attrs:{src:e,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"abs-rt w-32 h-32 del-pic flex-center",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.DelPic(n)}}},[i("v-uni-text",{staticClass:"iconfont icon-ic_close text--w111-fff fs-20"})],1),0==n?i("v-uni-view",{staticClass:"abs-lt poster-badge flex-center fs-18"},[t._v("封面")]):t._e()],1)})),!t.formData.video_url&&t.formData.slider_image.length<9?i("v-uni-view",{staticClass:"w-full h-214 flex-col flex-center upload bg--w111-f5f5f5 rd-16rpx text--w111-999",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadpic.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-ic_camera fs-60"}),i("v-uni-text",{staticClass:"fs-28 lh-40rpx pt-20"},[t._v("添加照片")])],1):t._e(),t.formData.slider_image.length||t.formData.video_url?t._e():i("v-uni-view",{staticClass:"w-full h-214 flex-col flex-center upload bg--w111-f5f5f5 rd-16rpx text--w111-999",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadVideo.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-icon_video fs-60"}),i("v-uni-text",{staticClass:"fs-28 lh-40rpx pt-20"},[t._v("添加视频")])],1),t.formData.video_url?[i("v-uni-view",{staticClass:"w-full h-214 flex-col flex-center video-bg rd-16rpx relative",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openVideoPopup.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"abs-rt w-32 h-32",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.delVideo()}}}),i("v-uni-view",{staticClass:"video-player flex-center"},[i("v-uni-text",{staticClass:"iconfont icon-ic_right2 fs-28 text--w111-fff relative"})],1),i("v-uni-text",{staticClass:"pt-22 fs-18 text--w111-fff"},[t._v("点击可预览视频")])],1),t.formData.image?t._e():i("v-uni-view",{staticClass:"w-full h-214 flex-col flex-center upload bg--w111-f5f5f5 rd-16rpx text--w111-999",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadPoster.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-ic_camera fs-60"}),i("v-uni-text",{staticClass:"fs-28 lh-40rpx pt-12"},[t._v("添加封面")])],1),t.formData.image?i("v-uni-view",{staticClass:"w-full h-214 flex-col flex-center upload bg--w111-f5f5f5 rd-16rpx relative text--w111-999",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadPoster.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"w-full h-214 rd-16rpx",attrs:{src:t.formData.image,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"abs-lt poster-badge flex-center fs-18"},[t._v("封面")]),i("v-uni-view",{staticClass:"poster-huan flex-center text--w111-fff fs-18"},[t._v("更换封面")])],1):t._e()]:t._e()],2),i("v-uni-view",{staticClass:"py-32 bb-e"},[i("v-uni-input",{staticClass:"fs-30 fw-500",attrs:{placeholder:"填写标题会有更多赞噢~","placeholder-class":"text--w111-999",maxlength:"20"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),i("v-uni-view",{staticClass:"pt-18 pb-46 bb-e textarea"},[i("v-uni-textarea",{staticClass:"w-full fs-28 h-280",attrs:{placeholder:"分享你的体验和心得，你的文字我们都很喜欢~",name:"comment","placeholder-class":"text--w111-999",maxlength:600},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1),i("v-uni-view",{staticClass:"h-100 flex-between-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openDrawer(0)}}},[i("v-uni-view",{staticClass:"flex-y-center"},[i("v-uni-text",{staticClass:"iconfont icon-icon_talk_2-2"}),i("v-uni-view",{staticClass:"pl-8"},[t._v("添加话题")])],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.topicSelectedList.length,expression:"!topicSelectedList.length"}],staticClass:"fs-28 text--w111-999 flex-y-center"},[i("v-uni-text",[t._v("去添加")]),i("v-uni-text",{staticClass:"iconfont icon-ic_rightarrow"})],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.topicSelectedList.length,expression:"topicSelectedList.length"}],staticClass:"fs-28 flex-y-center"},[i("v-uni-view",{staticClass:"w-428 line1 text-right"},t._l(t.topicSelectedList,(function(e,n){return i("v-uni-text",{key:n,staticClass:"pl-8"},[t._v("#"+t._s(e.name))])})),1),i("v-uni-text",{staticClass:"iconfont icon-ic_rightarrow text--w111-999"})],1)],1),i("v-uni-view",{staticClass:"mt-30 flex-between-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openDrawer(1)}}},[i("v-uni-view",{staticClass:"flex-y-center"},[i("v-uni-text",{staticClass:"iconfont icon-icon_Link"}),i("v-uni-view",{staticClass:"pl-8"},[t._v("关联商品")])],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.productSelect.length,expression:"productSelect.length"}],staticClass:"flex-y-center justify-end"},[t._l(t.productSelect,(function(t,e){return i("v-uni-image",{key:e,staticClass:"w-60 h-60 rd-6rpx block mr-12",attrs:{src:t.image}})})),i("v-uni-text",{staticClass:"iconfont icon-ic_rightarrow fs-32 text--w111-999"})],2),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.productSelect.length,expression:"!productSelect.length"}],staticClass:"fs-28 text--w111-999 flex-y-center"},[i("v-uni-text",[t._v("请选择")]),i("v-uni-text",{staticClass:"iconfont icon-ic_rightarrow"})],1)],1)],1)],1),i("v-uni-view",{staticClass:"pb-safe"},[i("v-uni-view",{staticClass:"h-200"})],1),i("v-uni-view",{staticClass:"fixed-lb w-full pb-safe bg--w111-fff z-100"},[i("v-uni-view",{staticClass:"footer-box flex-center"},[i("v-uni-view",{staticClass:"w-690 h-88 flex-center bg-color text--w111-fff fs-28 rd-44rpx",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmSave.apply(void 0,arguments)}}},[t._v("发布")])],1)],1),i("base-drawer",{attrs:{mode:"bottom",visible:t.visible,"background-color":"transparent",mask:!0,maskClosable:!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmProductDrawer.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"w-full bg--w111-fff rd-t-40rpx py-32 relative"},[i("v-uni-view",{staticClass:"close-btn flex-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmProductDrawer.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-ic_close text--w111-666 fs-24"})],1),i("v-uni-view",{staticClass:"flex-center fs-30 text--w111-999"},[i("v-uni-view",{class:{"tab-active":0==t.tabActive},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTab(0,"pay")}}},[t._v("已购")]),i("v-uni-view",{staticClass:"ml-70",class:{"tab-active":1==t.tabActive},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTab(1,"collect")}}},[t._v("收藏")]),i("v-uni-view",{staticClass:"ml-70",class:{"tab-active":2==t.tabActive},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTab(2,"visit")}}},[t._v("浏览")])],1),i("v-uni-view",{staticClass:"px-30 mt-50 flex-between-center"},[i("v-uni-view",{staticClass:"flex-1 px-32 h-58 rd-30rpx bg--w111-f5f5f5 flex-y-center"},[i("v-uni-text",{staticClass:"iconfont icon-ic_search text--w111-999 fs-28"}),i("v-uni-input",{staticClass:"flex-1 pl-20 fs-26",attrs:{type:"text",placeholder:"输入关键字搜索","placeholder-class":"text--w111-ccc"},model:{value:t.where.keyword,callback:function(e){t.$set(t.where,"keyword",e)},expression:"where.keyword"}})],1),i("v-uni-text",{staticClass:"fs-28 pl-24",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getSearch.apply(void 0,arguments)}}},[t._v("搜索")])],1),i("v-uni-view",{staticClass:"px-30"},[i("v-uni-scroll-view",{staticStyle:{height:"780rpx"},attrs:{"scroll-y":"true"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.getProductList.apply(void 0,arguments)}}},[t._l(t.productList,(function(e,n){return i("v-uni-view",{key:n,staticClass:"flex-between-center"},[i("v-uni-text",{staticClass:"iconfont text--w111-ccc fs-36",class:e.isSelect?"icon-a-ic_CompleteSelect":"icon-ic_unselect",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.selectItem(e,n)}}}),i("v-uni-view",{staticClass:"flex-1 flex h-160 mt-30 pl-30"},[i("v-uni-image",{staticClass:"w-160 h-160 rd-16rpx",attrs:{src:e.image,mode:"aspectFill"}}),i("v-uni-view",{staticClass:"h-160 flex-1 flex-col justify-between pl-30"},[i("v-uni-view",{staticClass:"h-68 lh-34rpx fs-30 line2"},[t._v(t._s(e.store_name))]),i("baseMoney",{attrs:{money:e.price,symbolSize:"24",integerSize:"40",decimalSize:"24",weight:!0}})],1)],1)],1)})),t.productList.length?t._e():i("v-uni-view",[i("emptyPage",{attrs:{title:"暂无商品，去看点别的吧～"}})],1)],2)],1),i("v-uni-view",{staticClass:"mx-20 pb-safe bg--w111-fff"},[i("v-uni-view",{staticClass:"mt-52 h-88 flex-center rd-44rpx bg-color fs-28 text--w111-fff mt-24",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmProductDrawer.apply(void 0,arguments)}}},[t._v("确定("+t._s(t.productNum)+"/5)")])],1)],1)],1),i("uni-popup",{ref:"popup"},[i("v-uni-view",{staticClass:"flex-center"},[i("v-uni-view",{staticClass:"fixed-lt h-80 flex-y-center pl-20 z-999",style:{top:t.sysHeight+"px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-ic_close fs-40 text--w111-fff"})],1),i("v-uni-video",{style:[t.videoStyle],attrs:{id:"myVideo",autoplay:!0,loop:!0,muted:!0,src:t.formData.video_url}})],1)],1),t.canvasStatus?i("v-uni-canvas",{style:{width:t.canvasWidth+"px",height:t.canvasHeight+"px",position:"absolute",left:"-100000px",top:"-100000px"},attrs:{"canvas-id":"canvas"}}):t._e()],1)},o=[]},c2ad:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("aa9c"),i("dd2b"),i("fd3c"),i("bf0f"),i("2797"),i("d4b5"),i("c223"),i("4626"),i("5ac7"),i("bd06"),i("dc8a");var a=n(i("39d8")),o=n(i("9b1b")),c=n(i("89cc")),s=n(i("d1e1")),l=i("8f59"),r=i("5088"),u=i("4d38"),d=n(i("af01")),f=n(i("398a")),p=(i("0f73"),i("eb8a")),m=(i("2c18"),getApp()),v={data:function(){return{sysHeight:m.globalData.sysHeight,id:"",canvasStatus:!1,visible:!1,tabActive:0,keyword:"",topicList:[],recommendTopic:[],topicSelectedList:[],productList:[],productSelect:[],loading:!1,where:{page:1,limit:20,type:"pay",keyword:""},formData:{content_type:null,title:"",content:"",image:"",video_url:"",slider_image:[],topic_name:[],product_id:[]},upload_max:50,uploadUrl:"".concat(u.HTTP_REQUEST_URL,"/api/upload/video"),videoContext:"",productNum:0,topicNum:0,canvasWidth:"",canvasHeight:"",configData:{community_exp_num:0,community_integral_num:0}}},components:{baseDrawer:d.default,emptyPage:f.default},computed:(0,o.default)((0,o.default)({},(0,l.mapGetters)(["isLogin"])),{},{videoHtml:function(){return'<video  autoplay loop muted controls="controls" width="100%" height="870px"><source src="'.concat(this.formData.video_url,'" type="video/mp4"></video>')},videoStyle:function(){return{width:uni.getWindowInfo().windowWidth+"px",height:uni.getWindowInfo().windowHeight+"px"}},popupHeight:function(){return.8*uni.getWindowInfo().windowHeight}}),mixins:[c.default],onShow:function(){var t=this;uni.$on("topicSave",(function(e){e&&(t.topicSelectedList=e),uni.$off("topicSave")}))},onLoad:function(t){this.isLogin?(this.getConfig(),t.id&&(this.id=t.id,this.getInfo()),t.topic_name&&this.topicSelectedList.push({name:t.topic_name}),this.getProductList(),this.videoContext=uni.createVideoContext("myVideo",this)):(0,r.toLogin)()},methods:{getConfig:function(){var t=this;(0,p.getCommunityConfig)().then((function(e){t.configData=e.data}))},proviewPic:function(t){uni.previewImage({urls:this.formData.slider_image,current:t})},DelPic:function(t){this.formData.slider_image.splice(t,1)},delVideo:function(){this.formData.video_url=""},openVideoPopup:function(){var t=this;this.$refs.popup.open(),this.videoContext=uni.createVideoContext("myVideo",this),this.$nextTick((function(){t.videoContext.play()}))},hideModal:function(){this.$refs.popup.close()},uploadPoster:function(){var t=this,e=this;this.canvasStatus=!0,e.$util.uploadImageChange({count:1,url:"upload/image"},(function(t){e.formData.image=t.data.url}),(function(e){t.canvasStatus=!1}),(function(e){t.canvasWidth=e.w,t.canvasHeight=e.h}))},uploadpic:function(){var t=this,e=this;this.canvasStatus=!0,e.$util.uploadImageChange({count:9,url:"upload/image"},(function(t){if(9==e.formData.slider_image.length)return e.$util.Tips({title:"最多上传9张"});e.formData.slider_image.push(t.data.url)}),(function(e){t.canvasStatus=!1}),(function(e){t.canvasWidth=e.w,t.canvasHeight=e.h}))},uploadVideo:function(){var t=this,e=this;uni.chooseVideo({sourceType:["camera","album"],success:function(i){uni.showLoading({title:"视频上传中"}),Math.ceil(i.size/1024)<1024*e.upload_max?uni.uploadFile({url:e.uploadUrl,filePath:i.tempFilePath,name:"file",header:(0,a.default)({},u.TOKENNAME,"Bearer "+s.default.state.app.token),success:function(i){uni.hideLoading();var n=JSON.parse(i.data);if(200!=n.status)return t.$util.Tips({title:n.msg});e.formData.video_url=n.data.url},complete:function(t){uni.hideLoading()}}):(uni.hideLoading(),uni.showModal({title:"提示",showCancel:!1,content:"视频超出限制".concat(e.upload_max,"MB")}))},fail:function(t){e.$util.Tips({title:t})}})},confirmProductDrawer:function(){this.visible=!1},openDrawer:function(t){var e=this;if(1==t)this.id&&this.productList.map((function(t){e.formData.product_id.forEach((function(i){i===t.product_id&&e.$set(t,"isSelect",!0)}))})),this.visible=!this.visible;else{var i="";this.topicSelectedList.length&&(i=JSON.stringify(this.topicSelectedList)),uni.navigateTo({url:"/pages/discover/discoverCreate/topic?data="+i})}},getProductList:function(){var t=this;this.loading||(this.loading=!0,(0,p.getProductApi)(this.where).then((function(e){e.data.map((function(e){t.$set(e,"isSelect",!1),t.formData.product_id.forEach((function(i){i===e.product_id&&t.$set(e,"isSelect",!0)}))}));var i=e.data,n=i.length<t.where.limit;t.productList=t.productList.concat(i),t.where.page++,t.loading=n})).catch((function(e){return t.loading=!1,t.$util.Tips({title:e})})))},getSearch:function(){this.loading=!1,this.where.page=1,this.productList=[],this.getProductList()},changeTab:function(t,e){this.tabActive=t,this.where.type=e,this.getSearch()},selectItem:function(t){if(t.isSelect){if(t.isSelect=!1,this.formData.product_id.includes(t.product_id)){var e=this.productSelect.findIndex((function(e){return e.id==t.product_id}));this.productSelect.splice(e,1),this.formData.product_id.splice(e,1),this.productNum--}}else{if(5==this.productSelect.length)return this.$util.Tips({title:"最多选择5件商品"});t.isSelect=!0;var i=[];this.productSelect.forEach((function(t){i.push(t.id)})),i.includes(t.product_id)||(this.productNum++,this.productSelect.push(t),this.formData.product_id.push(t.product_id))}},confirmSave:function(){var t=this;if(!this.formData.content)return this.$util.Tips({title:"请输入内容"});if(!this.formData.video_url&&!this.formData.slider_image.length)return this.$util.Tips({title:"请上传要分享的图片"});if(this.formData.video_url&&!this.formData.image)return this.$util.Tips({title:"请上传海报"});this.formData.topic_name=this.topicSelectedList.map((function(t){return t.name})),this.formData.content_type=this.formData.slider_image.length?1:2,uni.showLoading({title:"正在提交..."});var e="";e=this.id?(0,p.communityUpdateApi)(this.id,this.formData):(0,p.communitySaveApi)(this.formData),e.then((function(e){uni.hideLoading();t.configData.community_exp_num,t.configData.community_integral_num;return t.$util.Tips({title:e.msg},{tab:4,url:"/pages/discoverIndex/index"})})).catch((function(e){return uni.hideLoading(),t.$util.Tips({title:e})}))},getInfo:function(){var t=this;(0,p.communityInfoApi)(this.id).then((function(e){var i=e.data,n=Object.keys(t.formData);n.map((function(e){t.formData[e]=i[e]})),null==t.formData.product_id&&(t.formData.product_id=[]),e.data.topic.length&&(t.topicSelectedList=e.data.topic),e.data.product&&e.data.product.length&&(t.productSelect=e.data.product),t.productNum=e.data.product.length,t.topicNum=e.data.topic.length})).catch((function(e){return t.$util.Tips({title:e})}))}}};e.default=v},c4d5:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,"uni-page-body[data-v-3d159a14]{background-color:#fff}body.?%PAGE?%[data-v-3d159a14]{background-color:#fff}",""]),t.exports=e},e4fd:function(t,e,i){var n=i("c86c"),a=i("2ec5"),o=i("8104");e=n(!1);var c=a(o);e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 商家管理 */\n/* 行为相关颜色 */\n/* crmeb颜色变量 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.notice[data-v-3d159a14]{height:%?84?%;background:var(--view-minorColorT)}.del-pic[data-v-3d159a14]{background-color:#999;border-radius:0 %?16?% 0 %?16?%}.close-btn[data-v-3d159a14]{position:absolute;right:%?28?%;top:%?28?%;width:%?36?%;height:%?36?%;border-radius:50%;background-color:#eee}.bb-e[data-v-3d159a14]{border-bottom:%?1?% solid #eee}.b-e[data-v-3d159a14]{border:%?1?% solid #eee}.b-d[data-v-3d159a14]{border:%?1?% solid #ddd}.filter-cell ~ .filter-cell[data-v-3d159a14]{border-top:1px solid #f5f5f5}.textarea[data-v-3d159a14]{height:100%}.label-item[data-v-3d159a14]{color:var(--view-theme);background:var(--view-minorColorT);border:%?1?% solid transparent}.icon-a-ic_CompleteSelect[data-v-3d159a14]{color:var(--view-theme)}.pro-cell[data-v-3d159a14]{padding:%?36?% %?30?%}.add-btn[data-v-3d159a14]{width:%?690?%;height:%?88?%;background:var(--view-theme);border-radius:%?50?%;background-color:var(--view-theme);margin-bottom:%?32?%}.tab-active[data-v-3d159a14]{font-weight:500;color:#333;position:relative}.tab-active[data-v-3d159a14]:after{content:"";position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);bottom:%?-14?%;width:%?40?%;height:%?5?%;background:var(--view-theme);border-radius:%?4?%}.poster-badge[data-v-3d159a14]{width:%?54?%;height:%?29?%;background:var(--view-theme);color:#fff;border-radius:%?16?% %?0?% %?16?% %?0?%}.video-bg[data-v-3d159a14]{background-image:url('+c+");background-repeat:no-repeat;background-size:cover}.video-player[data-v-3d159a14]{width:%?50?%;height:%?50?%;border-radius:50%;background:rgba(0,0,0,.5)}.video-player .iconfont[data-v-3d159a14]{left:%?2?%}.poster-huan[data-v-3d159a14]{position:absolute;bottom:0;width:100%;height:%?40?%;background:rgba(0,0,0,.5);border-radius:%?0?% %?0?% %?16?% %?16?%}.canvas-box[data-v-3d159a14]{position:absolute;left:-100px;top:-100px;width:750px;height:1624px}.footer-box[data-v-3d159a14]{height:%?126?%}.footer-box .w-690[data-v-3d159a14]{width:%?690?%}.mt-62[data-v-3d159a14]{margin-top:%?62?%}.close-icon[data-v-3d159a14]{top:%?36?%;right:%?32?%}.overflow-scroll[data-v-3d159a14]{overflow-y:scroll}",""]),t.exports=e},eb8a:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.communityBrowseApi=function(t){return a.default.put("community/browse/".concat(t))},e.communityDeleteApi=function(t){return a.default.delete("community/community_delete/".concat(t))},e.communityElegantListApi=function(t){return a.default.get("community/elegant_list",t)},e.communityFlowIndexApi=function(){return a.default.get("community/follow")},e.communityFlowListApi=function(t,e){return a.default.get("community/follow_list/".concat(t),e)},e.communityFriendListApi=function(t){return a.default.get("community/user_friend",t)},e.communityInfoApi=function(t){return a.default.get("community/detail/".concat(t),{},{noAuth:!0})},e.communityLikeApi=function(t,e){return a.default.post("community/community_like/".concat(t),e)},e.communityLikeListApi=function(t){return a.default.get("community/like_list",t)},e.communityListApi=function(t){return a.default.get("community/list",t,{noAuth:!0})},e.communityMessageApi=function(t){return a.default.get("community/message",t)},e.communityRecommendListApi=function(t){return a.default.get("community/recommend_list",t)},e.communityReplyDeleteApi=function(t){return a.default.delete("community/comment_delete/".concat(t))},e.communityReplyLikeApi=function(t,e){return a.default.post("community/comment_like/".concat(t),e)},e.communityReplyListApi=function(t){return a.default.get("community/comment/list",t,{noAuth:!0})},e.communityReplySaveApi=function(t){return a.default.post("community/comment/save",t)},e.communitySaveApi=function(t){return a.default.post("community/community_save",t)},e.communitySetInsterestApi=function(t,e){return a.default.post("community/set_interest/".concat(t),e)},e.communityShareApi=function(t){return a.default.get("community/share/".concat(t))},e.communityTopicCountApi=function(t){return a.default.get("community/topic_count/".concat(t),{},{noAuth:!0})},e.communityUpdateApi=function(t,e){return a.default.post("community/community_update/".concat(t),e)},e.communityUpdateDescApi=function(t){return a.default.post("community/update_desc",t)},e.communityUserInfoApi=function(t){return a.default.get("community/user_info/".concat(t))},e.getCommunityConfig=function(){return a.default.get("community/config",{},{noAuth:!0})},e.getProductApi=function(t){return a.default.get("community/product_list",t,{noAuth:!0})},e.getTopicApi=function(t){return a.default.get("community/topic",t,{noAuth:!0})};var a=n(i("65455"))},ec7c:function(t,e,i){"use strict";i.r(e);var n=i("c2ad"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a}}]);