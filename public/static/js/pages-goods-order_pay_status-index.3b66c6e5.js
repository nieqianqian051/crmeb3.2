(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-order_pay_status-index"],{"06ba":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{style:t.colorStyle},[n("v-uni-view",{staticClass:"w-full relative  z-99 bg-gradient ",style:{"padding-top":t.sysHeight+"px"}},[n("v-uni-view",{staticClass:"w-full px-20 pl-20 h-80 flex-between-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goIndex()}}},[n("v-uni-text",{staticClass:"iconfont icon-ic_leftarrow fs-40 text--w111-fff"}),n("v-uni-text",{staticClass:"fs-34 fw-500 text--w111-fff"},[t._v("订单支付")]),n("v-uni-text")],1),n("v-uni-view",{staticClass:"flex-col flex-center mt-50"},[n("v-uni-view",{staticClass:"flex-y-center"},[t.order_pay_info.paid||"offline"==t.order_pay_info.pay_type?n("v-uni-text",{staticClass:"iconfont icon-ic-complete1 fs-52 text--w111-fff"}):n("v-uni-view",{staticClass:"iconfont icon-ic_close1 fs-52 text--w111-fff"}),"offline"!=t.order_pay_info.pay_type||t.order_pay_info.paid?n("v-uni-text",{staticClass:"fs-40 fw-500 text--w111-fff pl-16"},[t._v(t._s(t.order_pay_info.paid?"订单支付成功":"等待支付..."))]):n("v-uni-text",{staticClass:"fs-40 fw-500 text--w111-fff pl-16"},[t._v("订单创建成功")])],1),n("v-uni-view",{staticClass:"flex-center mt-30"},[n("v-uni-view",{staticClass:"w-192 h-64 rd-40rpx flex-center fs-24 text--w111-fff white-border",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goIndex.apply(void 0,arguments)}}},[t._v("返回首页")]),n("v-uni-view",{staticClass:"w-192 h-64 rd-40rpx flex-center fs-24 text--w111-fff white-border ml-48",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goOrderDetails.apply(void 0,arguments)}}},[t._v("查看订单")])],1)],1),n("v-uni-view",{staticClass:"h-216"})],1),n("v-uni-view",{staticClass:"relative content bg--w111-fff w-full pt-32 pl-20 pr-20 z-999"},[t.order_pay_info.paid&&"offline"!=t.order_pay_info.pay_type&&t.prize.length&&t.loading&&t.lotteryLoading?n("v-uni-view",{staticClass:"card bg--w111-fff rd-24rpx h-484 pt-32 pl-20 pr-20"},[n("gridsLottery",{attrs:{prizeData:t.prize,lotteryNum:t.lottery_num,lotteryType:1,datatime:t.datatime},on:{get_winingIndex:function(e){arguments[0]=e=t.$handleEvent(e),t.getWiningIndex.apply(void 0,arguments)},luck_draw_finish:function(e){arguments[0]=e=t.$handleEvent(e),t.luck_draw_finish.apply(void 0,arguments)}}})],1):t._e(),t.showGift?n("v-uni-view",{staticClass:"card bg--w111-fff rd-24rpx px-32"},[t._l(t.couponList,(function(e,r){return n("v-uni-view",{key:r+"n",staticClass:"cell flex-between-center py-32",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goPage(1,"/pages/users/user_coupon/index")}}},[n("v-uni-view",{staticClass:"flex-y-center"},[n("v-uni-image",{staticClass:"w-76 h-76 rd-40rpx",attrs:{src:t.imgHost+"/statics/images/order/prize_coupon_icon.png"}}),n("v-uni-view",{staticClass:"ml-24"},[n("v-uni-view",{staticClass:"fs-28 text--w111-333 lh-38rpx"},[t._v("下单得"+t._s(e.coupon_price)+"元优惠券")]),parseInt(e.use_min_price>0)?n("v-uni-view",{staticClass:"fs-22 text--w111-999 lh-30rpx mt-8"},[t._v("满"+t._s(e.use_min_price)+"元可用")]):n("v-uni-view",{staticClass:"fs-22 text--w111-999 lh-30rpx mt-8"},[t._v("无门槛优惠券")])],1)],1),n("v-uni-view",{staticClass:"card_btn flex-center font-color fs-22"},[t._v("去使用")])],1)})),t._l(t.giftList,(function(e,r){return n("v-uni-view",{key:r+"o",staticClass:"cell flex-between-center py-32"},[n("v-uni-view",{staticClass:"flex-y-center"},[n("v-uni-image",{staticClass:"w-76 h-76 rd-40rpx",attrs:{src:t.imgHost+"/statics/images/order/prize_gift_icon.png"}}),n("v-uni-view",{staticClass:"ml-24"},[n("v-uni-view",{staticClass:"fs-28 text--w111-333 line2 w-400"},[t._v(t._s(e.store_name))])],1)],1),n("v-uni-view",{staticClass:"card_btn flex-center font-color fs-22",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goOrderDetails.apply(void 0,arguments)}}},[t._v("去使用")])],1)})),t.prize_integral>0?n("v-uni-view",{staticClass:"cell flex-between-center py-32",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goPage(1,"/pages/users/user_integral/index")}}},[n("v-uni-view",{staticClass:"flex-y-center"},[n("v-uni-image",{staticClass:"w-76 h-76 rd-40rpx",attrs:{src:t.imgHost+"/statics/images/order/prize_integral_icon.png"}}),n("v-uni-view",{staticClass:"ml-24"},[n("v-uni-view",{staticClass:"fs-28 text--w111-333 line2 w-400"},[t._v("获得"+t._s(t.prize_integral)+"积分")]),n("v-uni-view",{staticClass:"fs-22 text--w111-999 lh-30rpx mt-8"},[t._v("下单即可抵扣")])],1)],1),n("v-uni-view",{staticClass:"card_btn flex-center font-color fs-22",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goOrderDetails.apply(void 0,arguments)}}},[t._v("去使用")])],1):t._e(),t.prize_exp>0?n("v-uni-view",{staticClass:"cell flex-between-center py-32"},[n("v-uni-view",{staticClass:"flex-y-center"},[n("v-uni-image",{staticClass:"w-76 h-76 rd-40rpx",attrs:{src:t.imgHost+"/statics/images/order/prize_exp_icon.png"}}),n("v-uni-view",{staticClass:"ml-24"},[n("v-uni-view",{staticClass:"fs-28 text--w111-333 line2 w-400"},[t._v("获得"+t._s(t.prize_exp)+"经验")]),n("v-uni-view",{staticClass:"fs-22 text--w111-999 lh-30rpx mt-8"},[t._v("下单即可抵扣")])],1)],1),n("v-uni-view",{staticClass:"card_btn flex-center font-color fs-22",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goOrderDetails.apply(void 0,arguments)}}},[t._v("去使用")])],1):t._e()],2):t._e(),n("recommend",{attrs:{hostProduct:t.hostProduct}})],1),n("lotteryAleart",{attrs:{aleartStatus:t.aleartStatus,alData:t.alData,theme:!0,aleartType:t.aleartType},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.closeLottery.apply(void 0,arguments)}}}),t.aleartStatus||t.addressModel?n("v-uni-view",{staticClass:"mask z-8000",on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.moveHandle.apply(void 0,arguments)}}}):t._e(),n("home")],1)},i=[]},"204f":function(t,e,n){"use strict";var r=n("3acb"),i=n.n(r);i.a},"2e79":function(t,e,n){"use strict";n.r(e);var r=n("06ba"),i=n("6a70");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("204f");var o=n("828b"),s=Object(o["a"])(i["default"],r["b"],r["c"],!1,null,"17922740",null,!1,r["a"],void 0);e["default"]=s.exports},"3acb":function(t,e,n){var r=n("5428");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=n("967d").default;i("d6348d30",r,!0,{sourceMap:!1,shadowMode:!1})},5428:function(t,e,n){var r=n("c86c");e=r(!1),e.push([t.i,".white-border[data-v-17922740]{border:%?1?% solid #fff}.h-484[data-v-17922740]{height:%?484?%}.content[data-v-17922740]{background:#f5f5f5;border-radius:%?40?% %?40?% 0 0;left:0;top:%?-164?%;min-height:%?500?%}.card ~ .card[data-v-17922740]{margin-top:%?20?%}.cell ~ .cell[data-v-17922740]{border-top:1px solid #eee}.card_btn[data-v-17922740]{width:%?114?%;height:%?52?%;border-radius:%?26?%;border:1px solid #e93323}.z-8000[data-v-17922740]{z-index:8000}",""]),t.exports=e},"606e":function(t,e,n){"use strict";n("6a54");var r=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.aliPay=function(t,e){return a.default.get("ali_pay",{key:t,quitUrl:e},{noAuth:!0})},e.cancelRefundOrder=function(t){return a.default.post("order/refund/cancel/"+t)},e.cartCompute=function(t){return a.default.post("cart/compute",t)},e.cartDel=function(t){"object"===(0,i.default)(t)&&(t=t.join(","));return a.default.post("cart/del",{ids:t})},e.changeCartNum=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return a.default.post("cart/num",{id:t,number:e,type:n})},e.checkShipping=function(t){return a.default.post("order/check_shipping",t)},e.deliveryDetail=function(t){return a.default.get("delivery_order/detail/".concat(t))},e.express=function(t,e){return a.default.get("order/express/"+t+(e?"/"+e:""))},e.getCartCounts=function(t,e){return a.default.get("cart/count",{numType:void 0===t?0:t,store_id:e})},e.getCartList=function(t){return a.default.get("cart/list",t)},e.getCashierOrder=function(t,e){return a.default.get("order/cashier/".concat(t,"/").concat(e))},e.getCouponsOrderPrice=function(t,e){return a.default.get("coupons/order/"+t,e)},e.getNewOrderList=function(t){return a.default.get("order/refund/list",t)},e.getOrderDetail=function(t){return a.default.get("order/detail/"+t)},e.getOrderList=function(t){return a.default.get("order/list",t)},e.getOrderPrizeApi=function(t){return a.default.post("order/prize/".concat(t))},e.getRefundOrderDetail=function(t){return a.default.get("order/refund/detail/"+t)},e.getResetCart=function(t){return a.default.post("v2/reset_cart",t)},e.offlineCheckPrice=function(t){return a.default.post("order/offline/check/price",t)},e.offlineCreate=function(t){return a.default.post("order/offline/create",t)},e.ordeRefundReason=function(){return a.default.get("order/refund/reason")},e.orderAgain=function(t){return a.default.post("order/again",{uni:t})},e.orderCancel=function(t){return a.default.post("order/cancel",{id:t})},e.orderComment=function(t){return a.default.post("order/comment",t)},e.orderConfirm=function(t,e,n,r,i,o,s){return a.default.post("order/confirm",{cartId:t,new:e,addressId:n,shipping_type:r,store_id:i,couponId:o,luckRecordId:s})},e.orderCoupon=function(t){return a.default.post("v2/order/product_coupon/"+t)},e.orderCreate=function(t,e){return a.default.post("order/create/"+t,e)},e.orderData=function(t){return a.default.get("order/data",t)},e.orderDel=function(t){return a.default.post("order/del",{uni:t})},e.orderInvoiceDetail=function(t,e){return a.default.get("v2/order/invoice_detail/".concat(t,"/").concat(e))},e.orderInvoiceList=function(t){return a.default.get("v2/order/invoice_list",t)},e.orderOfflinePayType=function(){return a.default.get("order/offline/pay/type")},e.orderPay=function(t){return a.default.post("order/pay",t)},e.orderProduct=function(t){return a.default.post("order/product",{unique:t})},e.orderRefundAgain=function(t){return a.default.post("order/refund/again/"+t)},e.orderRefundVerify=function(t){return a.default.post("order/refund/verify",t)},e.orderTake=function(t){return a.default.post("order/take",{uni:t})},e.payCashier=function(t){return a.default.get("order/pay_cashier?store_id=".concat(t))},e.postOrderComputed=function(t,e){return a.default.post("order/computed/"+t,e)},e.postRefundGoods=function(t){return a.default.post("order/refund/cart_info",t)},e.refundExpress=function(t){return a.default.post("order/refund/express",t)},e.refundGoodsList=function(t){return a.default.get("order/refund/cart_info/".concat(t))},e.refundOrderDel=function(t){return a.default.get("order/refund/del/"+t,{})},e.returnGoodsSubmit=function(t,e){return a.default.post("order/refund/apply/".concat(t),e)},e.vcartList=function(t){return a.default.get("v2/cart_list",t)},n("c223");var i=r(n("fcf3")),a=r(n("65455"))},"6a70":function(t,e,n){"use strict";n.r(e);var r=n("e769"),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e["default"]=i.a},e769:function(t,e,n){"use strict";n("6a54");var r=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("e966"),n("aa9c"),n("bf0f"),n("2797"),n("c223");var i=r(n("9b1b")),a=r(n("dc6e")),o=r(n("4b97")),s=r(n("a60c")),d=n("606e"),u=(n("7391"),n("df03")),c=n("0f73"),l=n("5088"),f=n("8f59"),p=r(n("89cc")),v=n("4d38"),g=uni.getWindowInfo().statusBarHeight,h={components:{gridsLottery:a.default,lotteryAleart:o.default,recommend:s.default},mixins:[p.default],data:function(){return{imgHost:v.HTTP_REQUEST_URL,sysHeight:g,loading:!1,lotteryLoading:!1,orderLottery:!1,orderId:"",order_pay_info:{paid:1,_status:{}},isAuto:!1,isShowAuth:!1,status:0,msg:"",couponsHidden:!0,couponList:[],giftList:[],options:{},prize:[],datatime:0,totalPrice:0,type:"",lottery_draw_param:{startIndex:3,totalCount:3,winingIndex:1,speed:100},aleartType:0,aleartStatus:!1,addressModel:!1,lottery_num:0,alData:{},hostProduct:[],hotScroll:!1,hotPage:1,hotLimit:10,prize_integral:0,prize_exp:0}},computed:(0,i.default)((0,i.default)({},(0,f.mapGetters)(["isLogin","cartNum"])),{},{showGift:function(){return!(!this.couponList.length&&!this.giftList.length&&0==this.prize_integral&&0==this.prize_exp)}}),watch:{isLogin:{handler:function(t,e){t&&this.getOrderPayInfo()},deep:!0}},onLoad:function(t){if(this.options=t,!t.order_id)return this.$util.Tips({title:"缺少参数无法查看订单支付状态"},{tab:3,url:1});this.orderId=t.order_id,this.status=t.status||0,this.msg=t.msg||"",this.type=this.options.type,this.totalPrice=this.options.totalPrice,this.getLotteryData(this.type),this.getHostProduct()},onShow:function(){uni.setStorageSync("form_type_cart",1),this.isLogin?this.getOrderPayInfo():(0,l.toLogin)()},methods:{moveHandle:function(){return!1},authColse:function(t){this.isShowAuth=t},openTap:function(){this.$set(this,"couponsHidden",!this.couponsHidden)},onLoadFun:function(){this.getOrderPayInfo(),this.isShowAuth=!1},getOrderPayInfo:function(){var t=this,e=this;uni.showLoading({title:"正在加载中"}),(0,d.getOrderDetail)(e.orderId).then((function(n){if(uni.hideLoading(),e.$set(e,"order_pay_info",n.data),uni.setNavigationBarTitle({title:n.data.paid?"支付成功":"未支付"}),uni.$emit("newCartNum",n.data.cartInfo),0===parseInt(uni.getStorageSync("news"))){var r=t.cartNum-n.data.total_num;t.$store.commit("indexData/setCartNum",r+""),uni.removeStorageSync("news")}t.loading=!0,setTimeout((function(){e.getOrderPrize()}),1e3)})).catch((function(e){t.loading=!0,uni.hideLoading()}))},getOrderPrize:function(){var t=this;(0,d.getOrderPrizeApi)(this.orderId).then((function(e){t.couponList=e.data.coupons,t.giftList=e.data.gift,t.prize_integral=e.data.integral,t.prize_exp=e.data.exp}))},goIndex:function(t){uni.switchTab({url:"/pages/index/index"})},goPink:function(t){uni.navigateTo({url:"/pages/activity/goods_combination_status/index?id="+t})},goOrderDetails:function(t){uni.navigateTo({url:"/pages/goods/order_details/index?order_id="+this.orderId})},getLotteryData:function(t){var e=this;(0,u.getLotteryData)(t).then((function(t){e.factor_num=t.data.lottery.factor_num,e.id=t.data.lottery.id,e.prize=t.data.lottery.prize,e.prize.length&&e.prize.push({name:1}),e.lottery_num=t.data.lottery_num,e.lotteryLoading=!0,e.datatime=parseInt(t.data.cache_time),6==t.data.lottery.type&&uni.navigateTo({url:"/pages/goods/lottery/grids/record"})})).catch((function(t){e.lotteryLoading=!1}))},getWiningIndex:function(t){var e=this;this.aleartType=0,(0,u.startLottery)({id:this.id}).then((function(n){e.prize.forEach((function(r,i){n.data.id===r.id&&(e.alData=n.data,e.lottery_draw_param.winingIndex=i,t(e.lottery_draw_param))}))})).catch((function(t){e.$util.Tips({title:t})}))},luck_draw_finish:function(t){this.aleartType=2,this.aleartStatus=!0},closeLottery:function(t){var e=this;this.aleartStatus=!1,6===this.alData.type&&(0,c.postCartAdd)({cartNum:1,new:1,is_new:1,productId:this.alData.product_id,uniqueId:this.alData.unique,luckRecordId:this.alData.lottery_record_id}).then((function(t){uni.navigateTo({url:"/pages/goods/order_confirm/index?new=1&luckRecordId=".concat(e.alData.lottery_record_id,"&cartId=").concat(t.data.cartId)})})).catch((function(t){e.$util.Tips({title:"".concat(t,",请联系客服")})})),this.getLotteryData(this.type)},getHostProduct:function(){var t=this;t.hotScroll||(0,c.getProductHot)(t.hotPage,t.hotLimit).then((function(e){t.hotPage++,t.hotScroll=e.data.length<t.hotLimit,t.hostProduct=t.hostProduct.concat(e.data)}))},goPage:function(t,e){1==t?uni.navigateTo({url:e}):2==t?uni.switchTab({url:e}):3==t&&uni.navigateBack()}},onPageScroll:function(t){uni.$emit("scroll")}};e.default=h}}]);