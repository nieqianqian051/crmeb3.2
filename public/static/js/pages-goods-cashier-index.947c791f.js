(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-cashier-index"],{1706:function(t,e,r){"use strict";r.r(e);var n=r("91fd"),a=r("e068");for(var i in a)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return a[t]}))}(i);r("308c");var o=r("828b"),u=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"0f39c0db",null,!1,n["a"],void 0);e["default"]=u.exports},2538:function(t,e,r){"use strict";r("6a54");var n=r("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r("bf0f"),r("2797"),r("aa9c"),r("4626"),r("e838");var a=n(r("39d8")),i=n(r("1706")),o=n(r("89cc")),u=r("606e"),s=r("92f9"),d=r("4d38"),c={data:function(){var t;return t={invalidTime:0,checked:!1,orderId:0,fromType:"",active:-1,payPrice:0,payPriceShow:0,now_money:"",payPostage:0,offlinePostage:!1},(0,a.default)(t,"invalidTime",0),(0,a.default)(t,"initIn",!1),(0,a.default)(t,"jumpData",{orderId:"",msg:""}),(0,a.default)(t,"formContent",""),(0,a.default)(t,"cartArr",[{name:"微信支付",icon:d.HTTP_REQUEST_URL+"/statics/images/order/wx_pay.png",value:"weixin",title:"使用微信快捷支付",payStatus:1},{name:"支付宝支付",icon:d.HTTP_REQUEST_URL+"/statics/images/order/alipay.png",value:"alipay",title:"使用线上支付宝支付",payStatus:1},{name:"余额支付",icon:d.HTTP_REQUEST_URL+"/statics/images/order/yue_pay.png",value:"yue",title:"可用余额:",payStatus:1},{name:"线下支付",icon:d.HTTP_REQUEST_URL+"/statics/images/order/xianxia_pay.png",value:"offline",title:"选择线下付款方式",payStatus:2}]),(0,a.default)(t,"paytype",""),(0,a.default)(t,"isShow",!1),t},mixins:[o.default],components:{countDown:i.default},computed:{payTypeList:function(){var t=[];return this.cartArr.forEach((function(e){1==e.payStatus&&t.push(e)})),t.length&&this.payType(t[0].value,0),t}},onLoad:function(t){t.order_id&&(this.orderId=t.order_id),t.from_type&&(this.fromType=t.from_type),this.getCashierOrder()},methods:{payType:function(t,e){this.active=e,this.paytype=t,this.offlinePostage&&(this.payPriceShow="offline"==t?this.$util.$h.Sub(this.payPrice,this.payPostage):this.payPrice)},getCashierOrder:function(){var t=this;(0,u.getCashierOrder)(this.orderId,this.fromType).then((function(e){t.isShow=!0,t.cartArr[0].payStatus=e.data.pay_weixin_open||0,t.cartArr[1].payStatus=t.$wechat.isWeixin()?0:e.data.ali_pay_status,t.cartArr[2].payStatus=e.data.yue_pay_status,t.now_money=e.data.now_money,1==e.data.offline_pay_status?t.cartArr[3].payStatus=1:t.cartArr[3].payStatus=0,t.payPrice=t.payPriceShow=e.data.pay_price,t.invalidTime=e.data.invalid_time,t.payPostage=e.data.pay_postage,t.getShowPay()})).catch((function(e){return t.isShow=!0,uni.hideLoading(),t.$util.Tips({title:e})}))},getShowPay:function(){var t=this.cartArr.every((function(t){return 0==t.payStatus||2==t.payStatus}));if(t&&["vip","recharge"].includes(this.fromType))return this.$util.Tips({title:"未开启线上支付，请联系管理员"},{tab:3})},goPay:function(){var t=this,e=this;if(-1==e.active)return e.$util.Tips({title:"请选择付款方式"});if(!e.orderId)return e.$util.Tips({title:"请选择要支付的订单"});if("yue"==e.paytype&&parseFloat(this.now_money)<parseFloat(e.payPriceShow))return e.$util.Tips({title:"余额不足"});uni.showLoading({title:"支付中"});var r="";"order"==this.fromType?r=(0,u.orderPay)({uni:e.orderId,paytype:e.paytype,from:this.$wechat.isWeixin()?"weixin":"weixinh5",quitUrl:location.port?location.protocol+"//"+location.hostname+":"+location.port+"/pages/goods/order_pay_status/index?order_id="+this.orderId:location.protocol+"//"+location.hostname+"/pages/goods/order_pay_status/index?order_id="+this.orderId}):"recharge"==this.fromType?r=(0,s.rechargePayAPi)({uni:this.orderId,paytype:e.paytype,from:this.$wechat.isWeixin()?"weixin":"weixinh5",quitUrl:location.port?location.protocol+"//"+location.hostname+":"+location.port+"/pages/users/user_payment/index":location.protocol+"//"+location.hostname+"/pages/users/user_payment/index"}):"vip"==this.fromType&&(r=(0,s.memberCardPayApi)({uni:this.orderId,paytype:this.paytype,from:this.$wechat.isWeixin()?"weixin":"weixinh5",quitUrl:"/pages/annex/vip_paid/index"})),r.then((function(r){var n=r.data.status,a=(r.data.result.order_id,r.data.result.jsConfig),i={order:"/pages/goods/order_pay_status/index?order_id="+t.orderId+"&msg="+r.msg+"&type=3&totalPrice="+t.payPriceShow,recharge:"/pages/users/user_payment/index",vip:"/pages/annex/vip_paid/index"},o=i[t.fromType];switch(n){case"ORDER_EXIST":case"EXTEND_ORDER":case"PAY_ERROR":t.pageReject(r.msg,o);break;case"SUCCESS":t.pageReject(r.msg,o);break;case"WECHAT_PAY":t.wechatPayFun(a,o);break;case"PAY_DEFICIENCY":uni.hideLoading(),t.pageReject(r.msg,o);break;case"WECHAT_H5_PAY":uni.hideLoading(),setTimeout((function(){location.href=r.data.result.jsConfig.mweb_url+"&redirect_url="+window.location.protocol+"//"+window.location.host+o}),500);break;case"ALIPAY_PAY":uni.hideLoading(),e.formContent=r.data.result.jsConfig,e.$nextTick((function(){document.getElementById("alipaysubmit").submit()}));break}})).catch((function(t){return uni.hideLoading(),e.$util.Tips({title:t})}))},wechatPayFun:function(t,e){var r=this;this.$wechat.pay(t).then((function(t){r.pageReject("支付成功",e)})).catch((function(t){r.$wechat.isWeixin()||r.pageReject("支付失败",e),"chooseWXPay:cancel"==t.errMsg&&r.pageReject("取消支付",e)}))},pageReject:function(t,e){return uni.hideLoading(),this.$util.Tips({title:t},{tab:5,url:e})}}};e.default=c},"308c":function(t,e,r){"use strict";var n=r("8b27f"),a=r.n(n);a.a},4070:function(t,e,r){"use strict";r.r(e);var n=r("56be"),a=r("f1f79");for(var i in a)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return a[t]}))}(i);r("4fbf");var o=r("828b"),u=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"4b939b5e",null,!1,n["a"],void 0);e["default"]=u.exports},"4fbf":function(t,e,r){"use strict";var n=r("b1df"),a=r.n(n);a.a},"56be":function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return a})),r.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",{style:t.colorStyle},[r("v-uni-view",{staticClass:"flex-col flex-center py-78"},[r("baseMoney",{attrs:{money:t.payPriceShow,symbolSize:"48",integerSize:"64",decimalSize:"48",color:"#333",weight:!0}}),r("v-uni-view",{staticClass:"flex-y-center mt-20"},[r("v-uni-text",{staticClass:"fs-24 text--w111-333 lh-36rpx pr-10"},[t._v("支付剩余时间")]),r("countDown",{attrs:{"is-day":!1,"tip-text":" ","day-text":" ","hour-text":":","minute-text":":","second-text":" ",bgColor:"#FFFFFF",dotColor:"var(--view-theme)",datatime:t.invalidTime}})],1)],1),r("v-uni-view",{staticClass:"px-20"},[r("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"bg--w111-fff rd-24rpx pay_card"},t._l(t.payTypeList,(function(e,n){return r("v-uni-view",{key:n,staticClass:"flex-between-center pay_item",on:{click:function(r){arguments[0]=r=t.$handleEvent(r),t.payType(e.value,n)}}},[r("v-uni-view",{staticClass:"flex-y-center"},[r("v-uni-image",{staticClass:"w-52 h-52",attrs:{src:e.icon}}),r("v-uni-view",{staticClass:"pl-20"},[r("v-uni-view",{staticClass:"text--w111-333 fs-28 lh-38rpx"},[t._v(t._s(e.name))]),"yue"==e.value?r("v-uni-view",{staticClass:"fs-22 text--w111-999 lh-30rpx mt-8"},[t._v("可用余额¥"+t._s(t.now_money))]):r("v-uni-view",{staticClass:"fs-22 text--w111-999 lh-30rpx mt-8"},[t._v(t._s(e.title))])],1)],1),r("v-uni-text",{staticClass:"iconfont fs-40 text--w111-999",class:t.active==n?"icon-a-ic_CompleteSelect":"icon-ic_unselect"})],1)})),1)],1),r("v-uni-view",{staticClass:"w-full h-128 fixed-lb pb-safe flex-center"},[r("v-uni-view",{staticClass:"w-710 h-80 flex-center rd-40rpx text--w111-fff bg-color fs-28",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goPay()}}},[t._v("确认付款")])],1),r("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],domProps:{innerHTML:t._s(t.formContent)}})],1)},a=[]},"606e":function(t,e,r){"use strict";r("6a54");var n=r("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.aliPay=function(t,e){return i.default.get("ali_pay",{key:t,quitUrl:e},{noAuth:!0})},e.cancelRefundOrder=function(t){return i.default.post("order/refund/cancel/"+t)},e.cartCompute=function(t){return i.default.post("cart/compute",t)},e.cartDel=function(t){"object"===(0,a.default)(t)&&(t=t.join(","));return i.default.post("cart/del",{ids:t})},e.changeCartNum=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return i.default.post("cart/num",{id:t,number:e,type:r})},e.checkShipping=function(t){return i.default.post("order/check_shipping",t)},e.deliveryDetail=function(t){return i.default.get("delivery_order/detail/".concat(t))},e.express=function(t,e){return i.default.get("order/express/"+t+(e?"/"+e:""))},e.getCartCounts=function(t,e){return i.default.get("cart/count",{numType:void 0===t?0:t,store_id:e})},e.getCartList=function(t){return i.default.get("cart/list",t)},e.getCashierOrder=function(t,e){return i.default.get("order/cashier/".concat(t,"/").concat(e))},e.getCouponsOrderPrice=function(t,e){return i.default.get("coupons/order/"+t,e)},e.getNewOrderList=function(t){return i.default.get("order/refund/list",t)},e.getOrderDetail=function(t){return i.default.get("order/detail/"+t)},e.getOrderList=function(t){return i.default.get("order/list",t)},e.getOrderPrizeApi=function(t){return i.default.post("order/prize/".concat(t))},e.getRefundOrderDetail=function(t){return i.default.get("order/refund/detail/"+t)},e.getResetCart=function(t){return i.default.post("v2/reset_cart",t)},e.offlineCheckPrice=function(t){return i.default.post("order/offline/check/price",t)},e.offlineCreate=function(t){return i.default.post("order/offline/create",t)},e.ordeRefundReason=function(){return i.default.get("order/refund/reason")},e.orderAgain=function(t){return i.default.post("order/again",{uni:t})},e.orderCancel=function(t){return i.default.post("order/cancel",{id:t})},e.orderComment=function(t){return i.default.post("order/comment",t)},e.orderConfirm=function(t,e,r,n,a,o,u){return i.default.post("order/confirm",{cartId:t,new:e,addressId:r,shipping_type:n,store_id:a,couponId:o,luckRecordId:u})},e.orderCoupon=function(t){return i.default.post("v2/order/product_coupon/"+t)},e.orderCreate=function(t,e){return i.default.post("order/create/"+t,e)},e.orderData=function(t){return i.default.get("order/data",t)},e.orderDel=function(t){return i.default.post("order/del",{uni:t})},e.orderInvoiceDetail=function(t,e){return i.default.get("v2/order/invoice_detail/".concat(t,"/").concat(e))},e.orderInvoiceList=function(t){return i.default.get("v2/order/invoice_list",t)},e.orderOfflinePayType=function(){return i.default.get("order/offline/pay/type")},e.orderPay=function(t){return i.default.post("order/pay",t)},e.orderProduct=function(t){return i.default.post("order/product",{unique:t})},e.orderRefundAgain=function(t){return i.default.post("order/refund/again/"+t)},e.orderRefundVerify=function(t){return i.default.post("order/refund/verify",t)},e.orderTake=function(t){return i.default.post("order/take",{uni:t})},e.payCashier=function(t){return i.default.get("order/pay_cashier?store_id=".concat(t))},e.postOrderComputed=function(t,e){return i.default.post("order/computed/"+t,e)},e.postRefundGoods=function(t){return i.default.post("order/refund/cart_info",t)},e.refundExpress=function(t){return i.default.post("order/refund/express",t)},e.refundGoodsList=function(t){return i.default.get("order/refund/cart_info/".concat(t))},e.refundOrderDel=function(t){return i.default.get("order/refund/del/"+t,{})},e.returnGoodsSubmit=function(t,e){return i.default.post("order/refund/apply/".concat(t),e)},e.vcartList=function(t){return i.default.get("v2/cart_list",t)},r("c223");var a=n(r("fcf3")),i=n(r("65455"))},6919:function(t,e,r){var n=r("c86c");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 商家管理 */\n/* 行为相关颜色 */\n/* crmeb颜色变量 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */[data-v-4b939b5e] .styleAll{padding:0 %?6?%;border:%?1?% solid #ddd;border-radius:%?8?%}.pay_card[data-v-4b939b5e]{padding:%?40?% %?32?%}.pay_item ~ .pay_item[data-v-4b939b5e]{margin-top:%?56?%}.icon-ic_unselect[data-v-4b939b5e]{color:#ccc}.icon-a-ic_CompleteSelect[data-v-4b939b5e]{color:var(--view-theme)}',""]),t.exports=e},"8b27f":function(t,e,r){var n=r("ed3c");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=r("967d").default;a("9c6432c0",n,!0,{sourceMap:!1,shadowMode:!1})},"90ba":function(t,e,r){"use strict";r("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r("64aa");var n={name:"countDown",props:{justifyLeft:{type:String,default:""},tipText:{type:String,default:"倒计时"},inDayText:{type:String,default:"天"},dayText:{type:String,default:"天"},hourText:{type:String,default:"时"},minuteText:{type:String,default:"分"},secondText:{type:String,default:"秒"},datatime:{type:Number,default:0},isDay:{type:Boolean,default:!0},isSecond:{type:Boolean,default:!0},bgColor:{type:String,default:""},colors:{type:String,default:"#e93323"},dotColor:{type:String,default:"#ffffff"}},data:function(){return{day:"00",hour:"00",minute:"00",second:"00",times:null}},watch:{datatime:{handler:function(t){this.show_time()},immediate:!0}},methods:{show_time:function(){var t=this;function e(){var e=t.datatime-Date.parse(new Date)/1e3,r=0,n=0,a=0,i=0;e>0?(r=!0===t.isDay?Math.floor(e/86400):0,n=Math.floor(e/3600)-24*r,a=Math.floor(e/60)-24*r*60-60*n,i=Math.floor(e)-24*r*60*60-60*n*60-60*a,n<=9&&(n="0"+n),a<=9&&(a="0"+a),i<=9&&(i="0"+i),t.day=r,t.hour=n,t.minute=a,t.second=i):(t.day="00",t.hour="00",t.minute="00",t.second="00",clearInterval(t.times),t.times=null,t.$emit("endTime",1))}e(),this.times=setInterval(e,1e3)}}};e.default=n},"91fd":function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return a})),r.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",{staticClass:"time",style:t.justifyLeft},[t.tipText.trim()?r("v-uni-text",{staticClass:"title red"},[t._v(t._s(t.tipText))]):t._e(),!0===t.isDay?r("v-uni-text",{staticClass:"styleAll",style:"background-color:"+t.bgColor+";color:"+t.colors+";"},[t._v(t._s(t.day)),r("v-uni-text",{staticClass:"dayTxt"},[t._v(t._s(t.inDayText))])],1):t._e(),t.dayText?r("v-uni-text",{staticClass:"timeTxt red",style:"color:"+t.dotColor},[t._v(t._s(t.dayText))]):t._e(),r("v-uni-text",{staticClass:"styleAll",style:"background-color:"+t.bgColor+";color:"+t.colors+";"},[t._v(t._s(t.hour))]),t.hourText?r("v-uni-text",{staticClass:"timeTxt red",style:"color:"+t.dotColor},[t._v(t._s(t.hourText))]):t._e(),r("v-uni-text",{staticClass:"styleAll",style:"background-color:"+t.bgColor+";color:"+t.colors+";"},[t._v(t._s(t.minute))]),t.minuteText?r("v-uni-text",{staticClass:"timeTxt red",style:"color:"+t.dotColor},[t._v(t._s(t.minuteText))]):t._e(),!0===t.isSecond?r("v-uni-text",{staticClass:"styleAll",style:"background-color:"+t.bgColor+";color:"+t.colors+";"},[t._v(t._s(t.second))]):t._e(),t.secondText?r("v-uni-text",{staticClass:"timeTxt red",style:"color:"+t.dotColor},[t._v(t._s(t.secondText))]):t._e(),t._t("bottom")],2)},a=[]},b1df:function(t,e,r){var n=r("6919");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=r("967d").default;a("e925dbca",n,!0,{sourceMap:!1,shadowMode:!1})},e068:function(t,e,r){"use strict";r.r(e);var n=r("90ba"),a=r.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},ed3c:function(t,e,r){var n=r("c86c");e=n(!1),e.push([t.i,".time[data-v-0f39c0db]{display:flex;justify-content:center}.timeTxt[data-v-0f39c0db]{margin:0 %?4?%}",""]),t.exports=e},f1f79:function(t,e,r){"use strict";r.r(e);var n=r("2538"),a=r.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a}}]);