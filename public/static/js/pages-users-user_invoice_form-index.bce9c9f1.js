(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-users-user_invoice_form-index"],{1757:function(e,t,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("c223"),a("aa77"),a("bf0f"),a("5c47"),a("0506");var n=a("92f9"),o=i(a("89cc")),r={mixins:[o.default],data:function(){return{invoiceTypeList:[{name:"普通发票",value:1,info:"纸质发票开出后将以邮寄形式交付"},{name:"专用发票",value:2,info:"纸质发票开出后将以邮寄形式交付"}],headerTypeList:[{name:"个人",value:1},{name:"企业",value:2}],formData:{id:"",header_type:1,type:1,drawer_phone:"",name:"",duty_number:"",tell:"",address:"",bank:"",card_number:"",is_default:0,email:""},popupType:!1,typeName:"",urlQuery:"",from:"",specialInvoice:!0,order_id:""}},computed:{backUrl:function(){switch(this.from){case"order_confirm":return"/pages/goods/order_confirm/index".concat(this.urlQuery);default:return"/pages/users/user_invoice_list/index?from=invoice_form"}}},onPageScroll:function(e){uni.$emit("scroll")},onLoad:function(e){var t=this;for(var a in e)switch(a){case"couponTitle":case"new":case"cartId":case"pinkId":case"couponId":case"addressId":this.urlQuery+="".concat(this.urlQuery?"&":"?").concat(a,"=").concat(e[a]);break;case"from":this.from=e[a];break;case"header_type":this.header_type=e[a];break;case"id":this.id=e[a],this.getInvoiceDetail();break;case"specialInvoice":"false"===e[a]&&(this.specialInvoice=!1);break}e.order_id&&(this.order_id=e.order_id);var i=this.invoiceTypeList.find((function(e){return e.value===t.formData.type}));this.typeName=i.name},onShow:function(){uni.removeStorageSync("form_type_cart")},methods:{exportInvoice:function(){},getInvoiceDetail:function(){var e=this;uni.showLoading({title:"加载中"}),(0,n.invoiceDetail)(this.id).then((function(t){uni.hideLoading(),e.formData=t.data})).catch((function(e){uni.showToast({title:e,icon:"none"})}))},formSubmit:function(e){var t=this,a=this.formData;if(1==a.header_type){if(!a.name)return uni.showToast({title:"请输入需要开具发票的姓名",icon:"none"});if(!a.drawer_phone)return uni.showToast({title:"请输入您的手机号",icon:"none"});if(!a.email)return uni.showToast({title:"请输入您的联系邮箱",icon:"none"});if(!/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(a.email))return uni.showToast({title:"请正确输入您的联系邮箱",icon:"none"})}if(2==a.header_type){if(1==a.type){if(!a.name)return uni.showToast({title:"请输入需要开具发票的企业名称",icon:"none"});if(!a.duty_number)return uni.showToast({title:"请输入纳税人识别号",icon:"none"});if(!/[0-9A-HJ-NPQRTUWXY]{2}\d{6}[0-9A-HJ-NPQRTUWXY]{10}/.test(a.duty_number))return uni.showToast({title:"请正确输入单位税号",icon:"none"});if(!a.drawer_phone)return uni.showToast({title:"请输入您的手机号",icon:"none"});if(!a.email)return uni.showToast({title:"请输入您的联系邮箱",icon:"none"});if(!/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(a.email))return uni.showToast({title:"请正确输入您的联系邮箱",icon:"none"})}if(2==a.type){if(!a.name)return uni.showToast({title:"请输入需要开具发票的企业名称",icon:"none"});if(!a.duty_number)return uni.showToast({title:"请输入纳税人识别号",icon:"none"});if(!/[0-9A-HJ-NPQRTUWXY]{2}\d{6}[0-9A-HJ-NPQRTUWXY]{10}/.test(a.duty_number))return uni.showToast({title:"请正确输入纳税人识别号",icon:"none"});if(!/^1(3|4|5|7|8|9|6)\d{9}$/i.test(a.drawer_phone))return uni.showToast({title:"请正确输入您的手机号",icon:"none"});if(!a.email)return uni.showToast({title:"请输入您的联系邮箱",icon:"none"});if(!/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(a.email))return uni.showToast({title:"请正确输入您的联系邮箱",icon:"none"});if(!a.bank)return uni.showToast({title:"请输入您的开户银行",icon:"none"});if(!a.card_number)return uni.showToast({title:"请输入您的银行账号",icon:"none"});if(!a.address)return uni.showToast({title:"请输入您所在的企业地址",icon:"none"});if(!a.tell)return uni.showToast({title:"请输入您的企业电话",icon:"none"})}}a.id=this.id,uni.showLoading({title:"保存中"}),(0,n.invoiceSave)(a).then((function(e){var i=t;uni.showToast({title:"保存成功",icon:"success",success:function(){switch(i.from){case"order_confirm":var t="";t+=1==a.header_type?"个人":"企业",t+=1==a.type?"普通":"专用",t+="发票",i.id?uni.navigateTo({url:"/pages/goods/order_confirm/index".concat(i.urlQuery,"&invoice_id=").concat(i.id,"&invoice_name=").concat(t)}):uni.navigateTo({url:"/pages/goods/order_confirm/index".concat(i.urlQuery,"&invoice_id=").concat(e.data.id,"&invoice_name=").concat(t)});break;case"order_details":i.id?uni.navigateTo({url:"/pages/goods/order_details/index?order_id=".concat(i.order_id,"&invoice_id=").concat(i.id)}):uni.navigateTo({url:"/pages/goods/order_details/index?order_id=".concat(i.order_id,"&invoice_id=").concat(e.data.id)});break;default:uni.navigateTo({url:"/pages/users/user_invoice_list/index?from=invoice_form"});break}}})})).catch((function(e){uni.showToast({title:e,icon:"none"})}))},callType:function(){this.popupType=!0},changeType:function(e){2==e.value&&1==this.formData.header_type&&(this.formData.header_type=2),this.typeName=e.name,this.formData.type=e.value},closeType:function(){this.popupType=!1},changeHeaderType:function(e){this.formData.header_type=e,this.formData.type=1},changeDefault:function(){this.formData.is_default=1-this.formData.is_default}}};t.default=r},"2cdc":function(e,t,a){"use strict";a.r(t);var i=a("1757"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},"5b02":function(e,t,a){"use strict";a.r(t);var i=a("a9aa"),n=a("2cdc");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("908a");var r=a("828b"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"3cc630d2",null,!1,i["a"],void 0);t["default"]=c.exports},"7e21":function(e,t,a){var i=a("c86c");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 商家管理 */\n/* 行为相关颜色 */\n/* crmeb颜色变量 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.invoice-form[data-v-3cc630d2]{padding:%?24?% %?20?%}.invoice-form .label[data-v-3cc630d2]{color:#999}[data-v-3cc630d2] .disabled .uni-radio-input{background-color:#f8f8f8}.form[data-v-3cc630d2]{font-size:%?28?%;color:#282828}.form uni-input[data-v-3cc630d2],\n.form uni-radio-group[data-v-3cc630d2]{flex:1;margin-left:%?24?%}.form uni-input[data-v-3cc630d2]{font-size:%?26?%}.form uni-label[data-v-3cc630d2]{margin-right:%?50?%}.form uni-radio[data-v-3cc630d2]{margin-right:%?8?%}.form uni-checkbox-group[data-v-3cc630d2]{height:%?90?%}.form uni-checkbox[data-v-3cc630d2]{margin-right:%?20?%}.icon-ic_wechat[data-v-3cc630d2]{margin-right:%?20?%;font-size:%?48?%;color:#00c800}.panel[data-v-3cc630d2]{padding:%?8?% 0;border-radius:%?24?%;background-color:#fff}.panel .acea-row[data-v-3cc630d2]{padding:%?32?% %?24?%}.panel .button-group[data-v-3cc630d2]{margin-left:%?24?%}.panel .button-group .button[data-v-3cc630d2]{display:inline-block;height:%?56?%;padding:0 %?32?%;border:%?1?% solid #f5f5f5;border-radius:%?28?%;background:#f5f5f5;font-weight:500;font-size:%?24?%;line-height:%?54?%;color:#333}.panel .button-group .button + .button[data-v-3cc630d2]{margin-left:%?16?%}.panel .button-group .button.active[data-v-3cc630d2]{border-color:var(--view-theme);background-color:var(--view-minorColorT);color:var(--view-theme)}.default[data-v-3cc630d2]{height:%?128?%;padding:0 %?24?%;border-radius:%?24?%;margin-top:%?20?%;background-color:#fff;font-size:%?28?%;line-height:%?40?%;color:#333}.default .switch[data-v-3cc630d2]{position:relative;width:%?79?%;height:%?48?%;padding:%?4?%;border-radius:%?24?%;background-color:#ddd;transition:background-color .3s}.default .switch[data-v-3cc630d2]::after{content:"";position:absolute;top:%?4?%;left:%?4?%;width:%?40?%;height:%?40?%;border-radius:%?20?%;background-color:#fff;box-shadow:%?0?% %?3?% %?6?% %?0?% rgba(0,0,0,.08);transition:-webkit-transform .3s cubic-bezier(.4,.4,.25,1.35);transition:transform .3s cubic-bezier(.4,.4,.25,1.35);transition:transform .3s cubic-bezier(.4,.4,.25,1.35),-webkit-transform .3s cubic-bezier(.4,.4,.25,1.35)}.default .switch.checked[data-v-3cc630d2]{background-color:var(--view-theme)}.default .switch.checked[data-v-3cc630d2]::after{-webkit-transform:translateX(%?30?%);transform:translateX(%?30?%)}.input-placeholder[data-v-3cc630d2]{font-size:%?26?%;color:#bbb}.icon-xiangyou[data-v-3cc630d2]{margin-left:%?25?%;font-size:%?26?%;color:#bfbfbf;margin-top:%?2?%}.popup[data-v-3cc630d2]{position:fixed;bottom:0;left:0;z-index:99;width:100%;padding-bottom:%?100?%;border-top-left-radius:%?16?%;border-top-right-radius:%?16?%;background-color:#f5f5f5;overflow:hidden;-webkit-transform:translateY(100%);transform:translateY(100%);transition:.3s}.popup.on[data-v-3cc630d2]{-webkit-transform:translateY(0);transform:translateY(0)}.popup .title[data-v-3cc630d2]{position:relative;height:%?137?%;font-size:%?32?%;line-height:%?137?%;text-align:center}.popup uni-scroll-view[data-v-3cc630d2]{height:%?466?%;padding-right:%?30?%;padding-left:%?30?%;box-sizing:border-box}.popup uni-label[data-v-3cc630d2]{padding:%?35?% %?30?%;border-radius:%?16?%;margin-bottom:%?20?%;background-color:#fff}.popup .text[data-v-3cc630d2]{flex:1;min-width:0;font-size:%?28?%;color:#282828}.popup .info[data-v-3cc630d2]{margin-top:%?10?%;font-size:%?22?%;color:#909090}.popup .icon-guanbi[data-v-3cc630d2]{position:absolute;top:50%;right:%?30?%;z-index:2;-webkit-transform:translateY(-50%);transform:translateY(-50%);font-size:%?30?%;color:#707070;cursor:pointer}.popup .text .acea-row[data-v-3cc630d2]{display:inline-flex;max-width:100%}.popup .name[data-v-3cc630d2]{flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:%?30?%}.popup .label[data-v-3cc630d2]{width:%?56?%;height:%?28?%;border:%?1?% solid #e93323;margin-left:%?18?%;font-size:%?20?%;line-height:%?26?%;text-align:center;color:#e93323}.popup .type[data-v-3cc630d2]{width:%?124?%;height:%?42?%;margin-top:%?14?%;background-color:#fcf0e0;font-size:%?24?%;line-height:%?42?%;text-align:center;color:#d67300}.popup .type.special[data-v-3cc630d2]{background-color:#fde9e7;color:#e93323}.button-section[data-v-3cc630d2]{position:fixed;right:0;bottom:0;left:0;padding:%?20?% %?20?% calc(%?20?% + env(safe-area-inset-bottom));background-color:#fff}.button-section .button[data-v-3cc630d2]{height:%?80?%;border-radius:%?40?%;background-color:var(--view-theme);font-weight:500;font-size:%?28?%;line-height:%?80?%;color:#fff}.button-section .navigator[data-v-3cc630d2]{height:%?86?%;border:%?1?% solid var(--view-theme);border-radius:%?43?%;margin-top:%?26?%;font-size:%?30?%;line-height:%?86?%;text-align:center;color:var(--view-theme)}',""]),e.exports=t},"908a":function(e,t,a){"use strict";var i=a("adad"),n=a.n(i);n.a},a9aa:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"invoice-form",style:e.colorStyle},[a("v-uni-view",{staticClass:"panel form"},[a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",{staticClass:"label"},[e._v("发票类型")]),a("v-uni-view",{staticClass:"button-group"},e._l(e.invoiceTypeList,(function(t){return a("v-uni-view",{key:t.value,staticClass:"button",class:{active:e.formData.type==t.value},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.changeType(t)}}},[e._v(e._s(t.name))])})),1)],1),1==e.formData.type?a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",{staticClass:"label"},[e._v("抬头类型")]),a("v-uni-view",{staticClass:"button-group"},e._l(e.headerTypeList,(function(t){return a("v-uni-view",{key:t.value,staticClass:"button",class:{active:e.formData.header_type==t.value},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.changeHeaderType(t.value)}}},[e._v(e._s(t.name))])})),1)],1):e._e(),a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",{staticClass:"label"},[e._v("发票抬头")]),a("v-uni-input",{attrs:{name:"name",placeholder:"请输入发票抬头"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:2==e.formData.header_type,expression:"formData.header_type == 2"}],staticClass:"acea-row row-middle"},[a("v-uni-view",{staticClass:"label"},[e._v("单位税号")]),a("v-uni-input",{attrs:{name:"duty_number",placeholder:"请输入单位税号"},model:{value:e.formData.duty_number,callback:function(t){e.$set(e.formData,"duty_number",t)},expression:"formData.duty_number"}})],1),a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",{staticClass:"label"},[e._v("联系电话")]),a("v-uni-input",{attrs:{name:"drawer_phone",placeholder:"请输入联系电话"},model:{value:e.formData.drawer_phone,callback:function(t){e.$set(e.formData,"drawer_phone",t)},expression:"formData.drawer_phone"}})],1),a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",{staticClass:"label"},[e._v("电子邮箱")]),a("v-uni-input",{attrs:{name:"email",placeholder:"请输入电子邮箱"},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1),2==e.formData.type?[a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",{staticClass:"label"},[e._v("开户银行")]),a("v-uni-input",{attrs:{name:"bank",placeholder:"请输入开户银行"},model:{value:e.formData.bank,callback:function(t){e.$set(e.formData,"bank",t)},expression:"formData.bank"}})],1),a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",{staticClass:"label"},[e._v("银行账号")]),a("v-uni-input",{attrs:{name:"card_number",placeholder:"请输入银行账号"},model:{value:e.formData.card_number,callback:function(t){e.$set(e.formData,"card_number",t)},expression:"formData.card_number"}})],1),a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",{staticClass:"label"},[e._v("企业地址")]),a("v-uni-input",{attrs:{name:"address",placeholder:"请输入企业地址"},model:{value:e.formData.address,callback:function(t){e.$set(e.formData,"address",t)},expression:"formData.address"}})],1),a("v-uni-view",{staticClass:"acea-row row-middle"},[a("v-uni-view",{staticClass:"label"},[e._v("企业电话")]),a("v-uni-input",{attrs:{name:"tell",placeholder:"请输入企业电话"},model:{value:e.formData.tell,callback:function(t){e.$set(e.formData,"tell",t)},expression:"formData.tell"}})],1)]:e._e()],2),a("v-uni-view",{staticClass:"default acea-row row-between-wrapper"},[a("v-uni-view",[e._v("设置为默认抬头")]),a("v-uni-view",{staticClass:"switch",class:{checked:e.formData.is_default},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeDefault.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"pb-safe"},[a("v-uni-view",{staticClass:"button-section"},[a("v-uni-button",{staticClass:"button",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.formSubmit.apply(void 0,arguments)}}},[e._v("保存")])],1)],1),a("home")],1)},n=[]},adad:function(e,t,a){var i=a("7e21");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("967d").default;n("a1a7b332",i,!0,{sourceMap:!1,shadowMode:!1})}}]);